<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="keywords" content="gvNIX, Documentation">
<meta name="author" content="Dirección General de Tecnologías de la Información, Asociación gvSIG, DISID Corporation, S.L.">
<meta name="copyright" content="2010 (C) Dirección General de Tecnologías de la Información - Conselleria de Hacienda y Administración Pública - CC BY-NC-SA 3.0">
<title>gvNIX - Documentación de referencia</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>gvNIX - Documentación de referencia</h1>
<div class="details">
<span id="author" class="author">Dirección General de Tecnologías de la Información, Asociación gvSIG, DISID Corporation, S.L.</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Índice de contenidos</div>
<ul class="sectlevel1">
<li><a href="#prólogo">Prólogo</a>
<ul class="sectlevel2">
<li><a href="#1-información-general">1. Información General</a></li>
<li><a href="#2-requisitos">2. Requisitos</a></li>
<li><a href="#3-instalar-gvnix">3. Instalar gvNIX</a></li>
</ul>
</li>
<li><a href="#i-introducción">I. Introducción</a>
<ul class="sectlevel1">
<li><a href="#introducción">1. Introducción</a>
<ul class="sectlevel2">
<li><a href="#qué-es-gvnix">1.1. ¿Qué es gvNIX?</a></li>
<li><a href="#qué-es-spring-roo">1.2. ¿Qué es Spring Roo?</a></li>
<li><a href="#qué-es-un-roo-add-on-suite">1.3. ¿Qué es un "Roo Add-On Suite"?</a></li>
<li><a href="#qué-ofrece-gvnix">1.4. ¿Qué ofrece gvNIX?</a></li>
</ul>
</li>
<li><a href="#empezando-con-gvnix-tutorial-i">2. Empezando con gvNIX: Tutorial (I)</a>
<ul class="sectlevel2">
<li><a href="#qué-aprenderás">2.1. ¿Qué aprenderás?</a></li>
<li><a href="#detalles-de-la-aplicación">2.2. Detalles de la aplicación</a></li>
<li><a href="#paso-1-crear-un-proyecto">2.3. Paso 1: Crear un proyecto</a></li>
<li><a href="#paso-2-configurar-persistencia">2.4. Paso 2: Configurar persistencia</a></li>
<li><a href="#paso-3-generar-modelo-de-entidades">2.5. Paso 3: Generar modelo de entidades</a></li>
<li><a href="#paso-4-métodos-de-búsqueda">2.6. Paso 4: Métodos de búsqueda</a></li>
<li><a href="#paso-5-capa-web">2.7. Paso 5: Capa web</a></li>
<li><a href="#paso-6-instalar-jquery-datatables-y-bootstrap">2.8. Paso 6: Instalar JQuery, Datatables y Bootstrap</a></li>
<li><a href="#paso-7-edición-en-linea-y-selección-múltiple">2.9. Paso 7: Edición en linea y Selección Múltiple</a></li>
<li><a href="#paso-8-patrones-de-pantalla">2.10. Paso 8: Patrones de Pantalla</a>
<ul class="sectlevel3">
<li><a href="#creación-de-maestros">2.10.1. Creación de Maestros</a></li>
<li><a href="#creación-de-detalles">2.10.2. Creación de Detalles</a></li>
</ul>
</li>
<li><a href="#paso-9-primera-ejecución">2.11. Paso 9: Primera ejecución</a></li>
<li><a href="#paso-10-componente-lupa">2.12. Paso 10: Componente Lupa</a></li>
<li><a href="#paso-11-instalación-del-menú">2.13. Paso 11: Instalación del Menú</a></li>
<li><a href="#paso-12-aplicar-seguridad">2.14. Paso 12: Aplicar Seguridad</a></li>
<li><a href="#paso-13-gestión-de-informes">2.15. Paso 13: Gestión de Informes</a></li>
<li><a href="#paso-14-control-de-concurrencia">2.16. Paso 14: Control de concurrencia</a></li>
<li><a href="#paso-15-tests-funcionales-y-tests-de-integración">2.17. Paso 15: Tests funcionales y tests de integración</a></li>
<li><a href="#paso-16-servicios-web">2.18. Paso 16: Servicios web</a></li>
<li><a href="#resultado">2.19. Resultado</a></li>
</ul>
</li>
<li><a href="#gvnix-avanzado-componentes-geo-tutorial-ii">3. gvNIX avanzado: Componentes GEO (Tutorial II)</a>
<ul class="sectlevel2">
<li><a href="#qué-aprenderás-2">3.1. ¿Qué aprenderás?</a></li>
<li><a href="#paso-1-configurar-persistencia-geo">3.2. Paso 1: Configurar persistencia GEO</a></li>
<li><a href="#paso-2-añadir-soporte-geo-al-proyecto">3.3. Paso 2: Añadir soporte GEO al proyecto</a></li>
<li><a href="#paso-3-añadir-campos-geo-a-entidades">3.4. Paso 3: Añadir campos GEO a entidades</a></li>
<li><a href="#paso-4-generar-buscadores-geo">3.5. Paso 4: Generar buscadores GEO</a></li>
<li><a href="#paso-5-generar-mapas-en-cru">3.6. Paso 5: Generar mapas en CRU</a></li>
<li><a href="#paso-6-generar-geoportal">3.7. Paso 6: Generar Geoportal</a></li>
<li><a href="#paso-7-añadir-entidades-al-geoportal">3.8. Paso 7: Añadir entidades al Geoportal</a></li>
<li><a href="#paso-8-añadir-capas-base-al-geoportal">3.9. Paso 8: Añadir capas base al Geoportal</a></li>
<li><a href="#paso-9-añadir-herramientas-al-geoportal">3.10. Paso 9: Añadir herramientas al Geoportal</a>
<ul class="sectlevel3">
<li><a href="#herramienta-de-medición">3.10.1. Herramienta de medición</a></li>
<li><a href="#herramienta-personalizable">3.10.2. Herramienta personalizable</a></li>
</ul>
</li>
<li><a href="#paso-10-funcionalidades-avanzadas">3.11. Paso 10: Funcionalidades avanzadas</a>
<ul class="sectlevel3">
<li><a href="#filtrar-datos-utilizando-datatables">3.11.1. Filtrar Datos utilizando Datatables</a></li>
<li><a href="#selección-de-datos-utilizando-datatables">3.11.2. Selección de Datos utilizando Datatables</a></li>
<li><a href="#agrupación-de-elementos-en-geoportal">3.11.3. Agrupación de elementos en Geoportal</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#ii-gvnix-add-ons">II. gvNIX Add-Ons</a>
<ul class="sectlevel1">
<li><a href="#add-on-web-menu">1. Add-on Web Menu</a>
<ul class="sectlevel3">
<li><a href="#descripción">1.1. Descripción</a></li>
<li><a href="#definiciones">1.2. Definiciones</a></li>
<li><a href="#instalación-de-la-gestión-del-menú">1.3. Instalación de la gestión del menú</a></li>
<li><a href="#modificación-del-menú">1.4. Modificación del menú.</a></li>
<li><a href="#futuras-versiones">1.5. Futuras versiones</a></li>
</ul>
</li>
<li><a href="#add-on-jpa">2. Add-on JPA</a>
<ul class="sectlevel3">
<li><a href="#servicios-persistencia-en-bloque">2.1. Servicios persistencia en bloque</a></li>
<li><a href="#información-adicional-para-búsquedas-por-relaciones">2.2. Información adicional para búsquedas por relaciones</a></li>
<li><a href="#auditoría-y-resgistro-de-cambios-de-entidades">2.3. Auditoría y resgistro de cambios de entidades</a>
<ul class="sectlevel4">
<li><a href="#configurar-detalles-de-usuario">2.3.1. Configurar detalles de usuario</a></li>
<li><a href="#auditoría-básica-de-entidades">2.3.2. Auditoría básica de entidades</a></li>
<li><a href="#auditoría-y-registro-de-cambios-de-entidades">2.3.3. Auditoría y registro de cambios de entidades</a></li>
<li><a href="#proveedor-de-registro-de-cambios-hibernate-envers">2.3.4. Proveedor de registro de cambios Hibernate Envers</a></li>
</ul>
</li>
<li><a href="#persistencia-de-entidades-con-campos-de-tipo-geográfico">2.4. Persistencia de entidades con campos de tipo geográfico</a>
<ul class="sectlevel4">
<li><a href="#configuración-del-proyecto-para-soporte-geográfico">2.4.1. Configuración del proyecto para soporte geográfico</a></li>
<li><a href="#añadir-campos-de-tipo-geográfico-a-entidades">2.4.2. Añadir campos de tipo geográfico a entidades</a></li>
<li><a href="#implementación-de-buscadores-para-campos-geo">2.4.3. Implementación de buscadores para campos GEO</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#add-on-monitoring">3. Add-on Monitoring</a>
<ul class="sectlevel3">
<li><a href="#descripción-2">3.1. Descripción</a></li>
<li><a href="#instalación-de-la-monitorización">3.2. Instalación de la monitorización</a></li>
<li><a href="#monitorizando-a-través-de-spring">3.3. Monitorizando a través de Spring</a></li>
<li><a href="#accediendo-a-la-monitorización">3.4. Accediendo a la monitorización</a></li>
</ul>
</li>
<li><a href="#add-on-web-mvc">4. Add-on Web MVC</a>
<ul class="sectlevel3">
<li><a href="#interfaz-para-operaciones-de-persistencia-en-bloque">4.1. Interfaz para operaciones de persistencia en bloque</a>
<ul class="sectlevel4">
<li><a href="#métodos-de-creación-y-actualización">4.1.1. Métodos de creación y actualización</a></li>
<li><a href="#método-de-eliminación">4.1.2. Método de eliminación</a></li>
<li><a href="#carga-de-datos-en-formato-json">4.1.3. Carga de datos en formato JSON</a></li>
</ul>
</li>
<li><a href="#visualización-con-jquery">4.2. Visualización con jQuery</a>
<ul class="sectlevel4">
<li><a href="#conversión-de-las-vistas-a-jquery">4.2.1. Conversión de las vistas a jQuery</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#add-on-bootstrap">5. Add-on Bootstrap</a>
<ul class="sectlevel3">
<li><a href="#descripción-3">5.1. Descripción</a></li>
<li><a href="#instalación-de-bootstrap-3">5.2. Instalación de Bootstrap 3</a></li>
<li><a href="#actualización-de-componentes">5.3. Actualización de componentes</a></li>
<li><a href="#apendice-de-comandos">5.4. Apendice de comandos</a></li>
</ul>
</li>
<li><a href="#add-on-web-mvc-datatables">6. Add-on Web MVC Datatables</a>
<ul class="sectlevel3">
<li><a href="#descripción-4">6.1. Descripción</a></li>
<li><a href="#instalación-del-soporte-para-datatables">6.2. Instalación del soporte para Datatables</a></li>
<li><a href="#usar-datatables-en-la-vista-list-de-un-controlador">6.3. Usar datatables en la vista "list" de un controlador</a></li>
<li><a href="#ajustar-la-configuración-del-datatables-de-una-vista">6.4. Ajustar la configuración del datatables de una vista</a></li>
<li><a href="#cambiar-el-modo-de-datos-de-datatables">6.5. Cambiar el modo de datos de Datatables</a></li>
<li><a href="#el-control-de-búsqueda-y-filtros-por-columnas">6.6. El control de búsqueda y filtros por columnas</a></li>
<li><a href="#filtros-simples">6.7. Filtros Simples</a></li>
<li><a href="#modo-visualización-de-registro">6.8. Modo visualización de registro</a></li>
<li><a href="#visualización-de-detalles">6.9. Visualización de detalles</a></li>
<li><a href="#eliminación-múltiple">6.10. Eliminación múltiple</a></li>
<li><a href="#edición-en-línea">6.11. Edición en línea</a></li>
<li><a href="#registro-creado-en-primera-posición">6.12. Registro creado en primera posición</a></li>
<li><a href="#registro-editado-en-primera-posición">6.13. Registro editado en primera posición</a></li>
<li><a href="#registro-seleccionado-siempre-visible">6.14. Registro seleccionado siempre visible</a></li>
</ul>
</li>
<li><a href="#add-on-web-mvc-geo">7. Add-on Web MVC GEO</a>
<ul class="sectlevel3">
<li><a href="#descripción-5">7.1. Descripción</a></li>
<li><a href="#instalación-del-soporte-para-vista-de-mapa">7.2. Instalación del soporte para vista de Mapa</a></li>
<li><a href="#generar-vista-de-mapa">7.3. Generar vista de Mapa</a></li>
<li><a href="#generar-campos-de-mapa-en-vistas-cru">7.4. Generar campos de mapa en vistas CRU</a></li>
<li><a href="#añadir-entidades-a-la-vista-de-mapa">7.5. Añadir entidades a la vista de Mapa</a></li>
<li><a href="#añadir-capas-base-la-vista-de-mapa">7.6. Añadir Capas Base la vista de Mapa</a></li>
<li><a href="#generar-nuevas-herramientas-en-la-vista-del-mapa">7.7. Generar nuevas herramientas en la vista del Mapa</a></li>
</ul>
</li>
<li><a href="#add-on-campos-lupa">8. Add-on Campos Lupa</a>
<ul class="sectlevel3">
<li><a href="#descripción-6">8.1. Descripción</a></li>
<li><a href="#instalación-del-componente-lupa">8.2. Instalación del componente lupa</a></li>
<li><a href="#permitiendo-a-una-entidad-utilizar-el-campo-lupa">8.3. Permitiendo a una entidad utilizar el campo lupa</a></li>
<li><a href="#utilizando-componentes-lupa">8.4. Utilizando componentes lupa</a></li>
<li><a href="#actualizando-componentes-lupa">8.5. Actualizando componentes lupa</a></li>
<li><a href="#apendice-de-comandos-2">8.6. Apendice de comandos</a></li>
</ul>
</li>
<li><a href="#add-on-occ-optimistic-concurrency-control">9. Add-on OCC (Optimistic Concurrency Control)</a>
<ul class="sectlevel3">
<li><a href="#introducción-2">9.1. Introducción</a></li>
<li><a href="#añadir-el-control-en-las-entidades">9.2. Añadir el control en las entidades</a></li>
</ul>
</li>
<li><a href="#add-on-web-dialog">10. Add-on Web Dialog</a>
<ul class="sectlevel3">
<li><a href="#descripción-7">10.1. Descripción</a></li>
<li><a href="#instalación">10.2. Instalación</a></li>
<li><a href="#excepciones-controladas-por-gvnix">10.3. Excepciones controladas por gvNIX</a>
<ul class="sectlevel4">
<li><a href="#añadir-nuevas-excepciones-a-la-gestión">10.3.1. Añadir nuevas excepciones a la gestión</a></li>
</ul>
</li>
<li><a href="#nuevos-diálogos-modales">10.4. Nuevos diálogos modales</a>
<ul class="sectlevel4">
<li><a href="#ejemplos-de-dialogos-personalizados">10.4.1. Ejemplos de dialogos personalizados</a></li>
</ul>
</li>
<li><a href="#futuras-versiones-2">10.5. Futuras versiones</a></li>
</ul>
</li>
<li><a href="#add-on-web-report">11. Add-on Web Report</a>
<ul class="sectlevel3">
<li><a href="#descripción-8">11.1. Descripción</a></li>
<li><a href="#instalación-2">11.2. Instalación</a></li>
<li><a href="#generación-de-un-informe">11.3. Generación de un informe</a></li>
<li><a href="#futuras-versiones-3">11.4. Futuras versiones</a></li>
</ul>
</li>
<li><a href="#add-on-service">12. Add-on Service</a>
<ul class="sectlevel3">
<li><a href="#descripción-9">12.1. Descripción</a></li>
<li><a href="#creación-de-servicios-locales">12.2. Creación de servicios locales</a></li>
<li><a href="#creación-de-servidores-desde-java">12.3. Creación de servidores desde Java</a></li>
<li><a href="#creación-de-servidores-desde-wsdl">12.4. Creación de servidores desde WSDL</a></li>
<li><a href="#creación-de-clientes">12.5. Creación de clientes</a></li>
<li><a href="#acceso-a-un-wsdl-en-un-servidor-seguro">12.6. Acceso a un WSDL en un servidor seguro</a>
<ul class="sectlevel4">
<li><a href="#creación-de-clientes-con-firma">12.6.1. Creación de clientes con firma</a></li>
</ul>
</li>
<li><a href="#listar-los-servicios">12.7. Listar los servicios</a></li>
</ul>
</li>
<li><a href="#add-on-web-mvc-i18n">13. Add-on Web MVC i18n</a>
<ul class="sectlevel3">
<li><a href="#descripción-10">13.1. Descripción</a></li>
<li><a href="#instalación-de-un-idioma">13.2. Instalación de un idioma</a></li>
<li><a href="#futuras-versiones-4">13.3. Futuras versiones</a></li>
</ul>
</li>
<li><a href="#add-on-dynamic-configuration">14. Add-on Dynamic Configuration</a>
<ul class="sectlevel3">
<li><a href="#descripción-11">14.1. Descripción</a></li>
<li><a href="#funcionalidad">14.2. Funcionalidad</a></li>
<li><a href="#mejoras-de-rendimiento">14.3. Mejoras de rendimiento</a></li>
<li><a href="#futuras-versiones-5">14.4. Futuras versiones</a></li>
</ul>
</li>
<li><a href="#add-on-web-mvc-binding">15. Add-on Web MVC Binding</a>
<ul class="sectlevel3">
<li><a href="#descripción-12">15.1. Descripción</a></li>
<li><a href="#futuras-versiones-6">15.2. Futuras versiones</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#iii-apéndices">III. Apéndices</a>
<ul class="sectlevel1">
<li><a href="#apéndice-de-comandos">Appendix A: Apéndice de comandos</a>
<ul class="sectlevel3">
<li><a href="#comandos-del-add-on-occ">A.1. Comandos del add-on OCC</a>
<ul class="sectlevel4">
<li><a href="#occ-checksum-set">A.1.1. occ checksum set</a></li>
<li><a href="#occ-checksum-all">A.1.2. occ checksum all</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-jpa">A.2. Comandos del add-on JPA</a>
<ul class="sectlevel4">
<li><a href="#jpa-gvnix-setup">A.2.1. jpa gvnix setup</a></li>
<li><a href="#jpa-batch-add">A.2.2. jpa batch add</a></li>
<li><a href="#jpa-batch-all">A.2.3. jpa batch all</a></li>
<li><a href="#jpa-audit-setup">A.2.4. jpa audit setup</a></li>
<li><a href="#jpa-audit-add">A.2.5. jpa audit add</a></li>
<li><a href="#jpa-audit-all">A.2.6. jpa audit all</a></li>
<li><a href="#jpa-audit-revisionlog">A.2.7. jpa audit revisionLog</a></li>
<li><a href="#jpa-geo-setup">A.2.8. jpa geo setup</a></li>
<li><a href="#field-geo">A.2.9. field geo</a></li>
<li><a href="#finder-geo-all">A.2.10. finder geo all</a></li>
<li><a href="#finder-geo-add">A.2.11. finder geo add</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-dialog">A.3. Comandos del add-on Web Dialog</a>
<ul class="sectlevel4">
<li><a href="#web-mvc-dialog-setup">A.3.1. web mvc dialog setup</a></li>
<li><a href="#web-mvc-dialog-exception-list">A.3.2. web mvc dialog exception list</a></li>
<li><a href="#web-mvc-dialog-exception-add">A.3.3. web mvc dialog exception add</a></li>
<li><a href="#web-mvc-dialog-exception-set-language">A.3.4. web mvc dialog exception set language</a></li>
<li><a href="#web-mvc-dialog-exception-remove">A.3.5. web mvc dialog exception remove</a></li>
<li><a href="#web-mvc-dialog-add">A.3.6. web mvc dialog add</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-menu">A.4. Comandos del add-on Web Menu</a>
<ul class="sectlevel4">
<li><a href="#menu-setup">A.4.1. menu setup</a></li>
<li><a href="#menu-entry-add">A.4.2. menu entry add</a></li>
<li><a href="#menu-entry-visibility">A.4.3. menu entry visibility</a></li>
<li><a href="#menu-entry-roles">A.4.4. menu entry roles</a></li>
<li><a href="#menu-entry-move">A.4.5. menu entry move</a></li>
<li><a href="#menu-entry-update">A.4.6. menu entry update</a></li>
<li><a href="#menu-entry-info">A.4.7. menu entry info</a></li>
<li><a href="#menu-tree">A.4.8. menu tree</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-report">A.5. Comandos del add-on Web Report</a>
<ul class="sectlevel4">
<li><a href="#web-report-setup">A.5.1. web report setup</a></li>
<li><a href="#web-report-add">A.5.2. web report add</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-service">A.6. Comandos del add-on Service</a>
<ul class="sectlevel4">
<li><a href="#remote-service-class">A.6.1. remote service class</a></li>
<li><a href="#remote-service-operation">A.6.2. remote service operation</a></li>
<li><a href="#remote-service-define-ws">A.6.3. remote service define ws</a></li>
<li><a href="#remote-service-export-operation">A.6.4. remote service export operation</a></li>
<li><a href="#remote-service-list-operation">A.6.5. remote service list operation</a></li>
<li><a href="#remote-service-export-ws">A.6.6. remote service export ws</a></li>
<li><a href="#remote-service-import-ws">A.6.7. remote service import ws</a></li>
<li><a href="#remote-service-ws-list">A.6.8. remote service ws list</a></li>
<li><a href="#remote-service-security-ws">A.6.9. remote service security ws</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-mvc-i18n">A.7. Comandos del add-on Web MVC i18n</a>
<ul class="sectlevel4">
<li><a href="#web-mvc-install-language">A.7.1. web mvc install language</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-dynamic-configuration">A.8. Comandos del add-on Dynamic Configuration</a>
<ul class="sectlevel4">
<li><a href="#configuration-create">A.8.1. configuration create</a></li>
<li><a href="#configuration-property-add">A.8.2. configuration property add</a></li>
<li><a href="#configuration-property-value">A.8.3. configuration property value</a></li>
<li><a href="#configuration-property-undefined">A.8.4. configuration property undefined</a></li>
<li><a href="#configuration-list">A.8.5. configuration list</a></li>
<li><a href="#configuration-export">A.8.6. configuration export</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-mvc-binding">A.9. Comandos del add-on Web MVC Binding</a>
<ul class="sectlevel4">
<li><a href="#web-mvc-binding-stringtrimmer">A.9.1. web mvc binding stringTrimmer</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-mvc">A.10. Comandos del add-on Web MVC</a>
<ul class="sectlevel4">
<li><a href="#web-mvc-batch-setup">A.10.1. web mvc batch setup</a></li>
<li><a href="#web-mvc-batch-add">A.10.2. web mvc batch add</a></li>
<li><a href="#web-mvc-batch-all">A.10.3. web mvc batch all</a></li>
<li><a href="#web-mvc-jquery-setup">A.10.4. web mvc jquery setup</a></li>
<li><a href="#web-mvc-jquery-update-tags">A.10.5. web mvc jquery update tags</a></li>
<li><a href="#web-mvc-jquery-add">A.10.6. web mvc jquery add</a></li>
<li><a href="#web-mvc-jquery-all">A.10.7. web mvc jquery all</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-mvc-bootstrap">A.11. Comandos del add-on WEB MVC Bootstrap</a>
<ul class="sectlevel4">
<li><a href="#web-mvc-bootstrap-setup">A.11.1. web mvc bootstrap setup</a></li>
<li><a href="#web-mvc-bootstrap-update">A.11.2. web mvc bootstrap update</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-mvc-datatables">A.12. Comandos del add-on Web MVC Datatables</a>
<ul class="sectlevel4">
<li><a href="#web-mvc-datatables-setup">A.12.1. web mvc datatables setup</a></li>
<li><a href="#web-mvc-datatables-update-tags">A.12.2. web mvc datatables update tags</a></li>
<li><a href="#web-mvc-datatables-add">A.12.3. web mvc datatables add</a></li>
<li><a href="#web-mvc-datatables-all">A.12.4. web mvc datatables all</a></li>
<li><a href="#web-mvc-datatables-details-add">A.12.5. web mvc datatables details add</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-mvc-geo">A.13. Comandos del add-on Web MVC GEO</a>
<ul class="sectlevel4">
<li><a href="#web-mvc-geo-setup">A.13.1. web mvc geo setup</a></li>
<li><a href="#web-mvc-geo-controller">A.13.2. web mvc geo controller</a></li>
<li><a href="#web-mvc-geo-field">A.13.3. web mvc geo field</a></li>
<li><a href="#web-mvc-geo-entity-all">A.13.4. web mvc geo entity all</a></li>
<li><a href="#web-mvc-geo-entity-add">A.13.5. web mvc geo entity add</a></li>
<li><a href="#web-mvc-geo-tilelayer">A.13.6. web mvc geo tilelayer</a></li>
<li><a href="#web-mvc-geo-wmslayer">A.13.7. web mvc geo wmslayer</a></li>
<li><a href="#web-mvc-geo-tool-measure">A.13.8. web mvc geo tool measure</a></li>
<li><a href="#web-mvc-geo-tool-custom">A.13.9. web mvc geo tool custom</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-web-mvc-lupa">A.14. Comandos del add-on WEB MVC Lupa</a>
<ul class="sectlevel4">
<li><a href="#web-mvc-loupe-setup">A.14.1. web mvc loupe setup</a></li>
<li><a href="#web-mvc-loupe-set">A.14.2. web mvc loupe set</a></li>
<li><a href="#web-mvc-loupe-field">A.14.3. web mvc loupe field</a></li>
<li><a href="#web-mvc-loupe-update">A.14.4. web mvc loupe update</a></li>
</ul>
</li>
<li><a href="#comandos-del-add-on-monitoring">A.15. Comandos del add-on Monitoring</a>
<ul class="sectlevel4">
<li><a href="#monitoring-setup">A.15.1. monitoring setup</a></li>
<li><a href="#monitoring-all">A.15.2. monitoring all</a></li>
<li><a href="#monitoring-add-class">A.15.3. monitoring add class</a></li>
<li><a href="#monitoring-add-method">A.15.4. monitoring add method</a></li>
<li><a href="#monitoring-add-package">A.15.5. monitoring add package</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#desarrollo-con-eclipse">Appendix B: Desarrollo con eclipse</a>
<ul class="sectlevel3">
<li><a href="#instalación-3">B.1. Instalación</a>
<ul class="sectlevel4">
<li><a href="#sts-como-distribución">B.1.1. STS como distribución</a></li>
<li><a href="#sts-como-plugin">B.1.2. STS como plugin</a></li>
<li><a href="#integrar-soporte-roo-en-sts">B.1.3. Integrar soporte ROO en STS</a></li>
</ul>
</li>
<li><a href="#consola-gvnix-roo-integrada-en-eclipse">B.2. Consola gvNIX / Roo integrada en Eclipse</a></li>
<li><a href="#utilizar-eclipse-como-ide">B.3. Utilizar Eclipse como IDE</a>
<ul class="sectlevel4">
<li><a href="#crear-proyecto-gvnix-en-eclipse-ide">B.3.1. Crear proyecto gvNIX en Eclipse IDE</a></li>
<li><a href="#importar-proyecto-gvnix-en-eclipse">B.3.2. Importar proyecto gvNIX en Eclipse</a></li>
</ul>
</li>
<li><a href="#generación-de-pruebas-de-integración">B.4. Generación de pruebas de integración</a></li>
<li><a href="#arrancar-la-aplicación-con-eclipse">B.5. Arrancar la aplicación con Eclipse</a>
<ul class="sectlevel4">
<li><a href="#mostrar-la-vista-de-servidores-en-eclipse">B.5.1. Mostrar la Vista de Servidores en Eclipse</a></li>
<li><a href="#crear-un-nuevo-servidor">B.5.2. Crear un nuevo Servidor</a></li>
<li><a href="#ajustar-la-configuración-del-servidor">B.5.3. Ajustar la configuración del Servidor</a></li>
<li><a href="#ejecución-de-la-aplicación-en-el-servidor">B.5.4. Ejecución de la aplicación en el Servidor</a></li>
</ul>
</li>
<li><a href="#trabajando-con-el-código-de-la-aplicación-en-eclipse">B.6. Trabajando con el código de la aplicación en Eclipse</a>
<ul class="sectlevel4">
<li><a href="#modificación-del-código-generado">B.6.1. Modificación del código generado</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#recetas">Appendix C: Recetas</a>
<ul class="sectlevel3">
<li><a href="#repositorios-maven">C.1. Repositorios Maven</a></li>
<li><a href="#desarrollo-de-buscadores-con-gran-cantidad-de-campos">C.2. Desarrollo de buscadores con gran cantidad de campos</a></li>
<li><a href="#campos-opcionales-en-los-buscadores">C.3. Campos opcionales en los buscadores</a></li>
<li><a href="#instalar-fuentes-de-letra-para-los-informes">C.4. Instalar fuentes de letra para los informes</a></li>
<li><a href="#diseño-de-informes-con-sub-informes">C.5. Diseño de informes con sub informes</a></li>
<li><a href="#operaciones-durante-el-inicio-de-la-aplicación">C.6. Operaciones durante el inicio de la aplicación</a></li>
<li><a href="#obtener-el-bindstatus-de-un-atributo-dentro-de-un-formulario">C.7. Obtener el BindStatus de un atributo dentro de un formulario</a></li>
</ul>
</li>
<li><a href="#código-generado-por-gvnix-roo">Appendix D: Código generado por gvNIX/Roo</a>
<ul class="sectlevel3">
<li><a href="#clases-java-y-ficheros-aj">D.1. Clases Java y ficheros AJ</a>
<ul class="sectlevel4">
<li><a href="#archivos-java">D.1.1. Archivos Java</a></li>
<li><a href="#archivos-aj">D.1.2. Archivos AJ</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#mejoras-de-rendimiento-2">Appendix E: Mejoras de rendimiento</a>
<ul class="sectlevel3">
<li><a href="#descripción-13">E.1. Descripción</a></li>
<li><a href="#patrones-de-conversión-óptimos-en-el-log">E.2. Patrones de conversión óptimos en el log</a></li>
<li><a href="#evitar-la-carga-de-listas-de-valores-innecesarias">E.3. Evitar la carga de listas de valores innecesarias</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#iv-recursos">IV. Recursos</a>
<ul class="sectlevel2">
<li><a href="#recursos">1.1. Recursos</a>
<ul class="sectlevel3">
<li><a href="#proyecto-gvnix">1.1.1. Proyecto gvNIX</a></li>
<li><a href="#ejemplos-y-demo-online-gvnix">1.1.2. Ejemplos y Demo Online gvNIX</a></li>
<li><a href="#proyectos-relacionados-con-gvnix">1.1.3. Proyectos relacionados con gvNIX</a></li>
<li><a href="#recursos-de-spring-roo">1.1.4. Recursos de Spring Roo</a></li>
<li><a href="#recursos-de-librerías-relacionadas">1.1.5. Recursos de librerías relacionadas</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>2.0.0.M1</em></p>
</div>
<div class="paragraph">
<p><em>gvNIX, un Add-On Suite de Spring Roo</em> | <a href="www.gvnix.org">www.gvnix.org</a></p>
</div>
<div class="quoteblock abstract">
<blockquote>
<em>2010 &#169; Dirección General de Tecnologías de la Información - Conselleria de Hacienda y
Administración Pública - Generalitat Valenciana.</em> Esta obra está bajo la licencia
<a href="http://creativecommons.org/licenses/by-sa/3.0/es/">Reconocimiento-Compartir bajo la misma licencia 3.0 España</a>
de Creative Commons. Puede copiarla, distribuirla y comunicarla públicamente
siempre que especifique sus autores y comparta cualquier obra derivada bajo la
misma licencia.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prólogo"><a class="anchor" href="#prólogo"></a>Prólogo</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="1-información-general"><a class="anchor" href="#1-información-general"></a>1. Información General</h3>
<div class="paragraph">
<p>gvNIX es un entorno de trabajo Java de código abierto para el desarrollo
rápido de aplicaciones web altamente productivo, flexible y que no
compromete la calidad de los proyectos.</p>
</div>
<div class="paragraph">
<p>gvNIX trabaja sobre la herramienta de desarrollo <a href="http://projects.spring.io/spring-roo">Spring Roo</a>
ampliando sus funcionalidades básicas con componentes de alto nivel funcional.</p>
</div>
<div class="paragraph">
<p>gvNIX está patrocinado por la Dirección General de Tecnologías de la Información  y la Comunicación
(DGTIC) de la Conselleria de Hacienda y Modelo Económico de la Generalitat Valenciana
(Comunidad Valenciana, España), gestionado por la
Asociación gvSIG y dirigido por DISID. gvNIX se consolida como estándar para
desarrollo Java de la DGTIC de la Generalitat Valenciana.</p>
</div>
<div class="paragraph">
<p>gvNIX está disponible dentro del proyecto de Migración a Software de
fuentes abiertas <a href="http://www.gvpontis.gva.es">gvPONTIS</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="2-requisitos"><a class="anchor" href="#2-requisitos"></a>2. Requisitos</h3>
<div class="paragraph">
<p>Antes de empezar a trabajar con la herramienta de desarrollo gvNIX, es aconsejable conocer cómo
funciona Spring Roo. Para ello, se recomienda leer la
<a href="http://docs.spring.io/spring-roo/docs/2.0.0.M1/reference/html/">documentación de referencia</a>.</p>
</div>
<div class="paragraph">
<p>gvNIX crea aplicaciones web basadas en
<a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/">Spring Framework</a>
y en el conjunto de tecnologías de <a href="http://spring.io/">Spring</a>,
por lo que es necesario tener conocimientos del framework Spring y tecnologías relacionadas
como Spring MVC, Spring Data JPA, Spring Security, etc.</p>
</div>
<div class="paragraph">
<p>Para poder trabajar con la herramienta de desarrollo gvNIX en un entorno de desarrollo, es necesario disponer de
los siguientes componentes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://projects.spring.io/spring-roo/#running-from-shell">Spring Roo 2.0+</a> descargado y
descomprimido.</p>
</li>
<li>
<p>Versión más actual de Java JDK 6 instalado en el sistema. Se
recomienda utiliar <strong>Java 7</strong>, aunque se dispone de soporte para Java 8.
(<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Más
información</a>).</p>
</li>
<li>
<p>Maven 3.0.5 o superior (<a href="http://maven.apache.org/" class="bare">http://maven.apache.org/</a>).</p>
</li>
<li>
<p>Conexión a Internet para poder instalar de forma correcta gvNIX en
la distribución de Spring Roo y descargar las dependencias de los
proyectos generados.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Solo es posible utilizar gvNIX 2.0+ sobre las versiones 2.0
de Spring Roo en adelante. Esto es debido a que la instalación de
distribuciones es una característica de las últimas versiones
de Spring Roo.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="3-instalar-gvnix"><a class="anchor" href="#3-instalar-gvnix"></a>3. Instalar gvNIX</h3>
<div class="paragraph">
<p>Para instalar el gvNIX sobre una distribución de Spring Roo. es necesario que Roo conozca
donde están alojados todos los componentes que forman parte de gvNIX.
Por ello, es necesario instalar en nuestra distribución de Spring Roo el repositorio donde se
encuentran dichos componentes.</p>
</div>
<div class="paragraph">
<p>Sigue los siguientes pasos para instalar el repositorio de gvNIX en tu distribución de
Spring Roo 2.0+:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ejecuta la consola de Spring Roo 2.0+:</p>
<div class="listingblock">
<div class="content">
<pre>bash:~$ cd /tmp/new_project
bash:~$ ~/software/spring-roo-2.0/bin/roo.sh</pre>
</div>
</div>
</li>
<li>
<p>Accede al <a href="http://projects.spring.io/spring-roo/marketplace/">"Roo Market Place"</a> y
copia la URL del repositorio de gvNIX (<a href="http://repository.gvnix.org/index.xml" class="bare">http://repository.gvnix.org/index.xml</a>).</p>
</li>
<li>
<p>Ejecuta el siguiente comando en tu consola de Spring Roo 2.0+ para
instalar el repositorio anterior:</p>
<div class="listingblock">
<div class="content">
<pre>roo&gt; addon repository add --url http://repository.gvnix.org/index.xml</pre>
</div>
</div>
</li>
<li>
<p>Valida que se ha instalado el repositorio de forma correcta listando los componentes
que están disponibles en dicho repositorio. Para ello, ejecuta el siguiente comando:</p>
<div class="listingblock">
<div class="content">
<pre>roo&gt; addon repository introspect</pre>
</div>
</div>
</li>
<li>
<p>Si todo ha salido bien, aparecerá un listado mostrando todos los componente que forman
parte de la distribución gvNIX.</p>
<div class="listingblock">
<div class="content">
<pre>Not Installed        gvNIX - Addon - Bootstrap3 support (2.0.0.M1)
Not Installed        gvNIX - Addon - Co-official languages of Spain (2.0.0.M1)
Not Installed        gvNIX - Addon - Dynamic Configuration (2.0.0.M1)
Not Installed        gvNIX - Addon - GEO Support (2.0.0.M1)
Not Installed        gvNIX - Addon - JPA layer services (2.0.0.M1)
Not Installed        gvNIX - Addon - Loupe Fields (2.0.0.M1)
Not Installed        gvNIX - Addon - Monitoring Support (2.0.0.M1)
Not Installed        gvNIX - Addon - Optimistic Concurrency Control (2.0.0.M1)
Not Installed        gvNIX - Addon - Services Management (2.0.0.M1)
Not Installed        gvNIX - Addon - Typical Security (2.0.0.M1)
Not Installed        gvNIX - Addon - Web Datatables Addon (2.0.0.M1)
Not Installed        gvNIX - Addon - Web MVC (JSP) layer services (2.0.0.M1)
Not Installed        gvNIX - Addon - Web MVC Bindings (2.0.0.M1)
Not Installed        gvNIX - Addon - Web MVC Dialogs (2.0.0.M1)
Not Installed        gvNIX - Addon - Web MVC Menu (2.0.0.M1)
Not Installed        gvNIX - Addon - Web Report (2.0.0.M1)
Not Installed        gvNIX - Annotations - GEO Support (2.0.0.M1)
Not Installed        gvNIX - Annotations - JPA layer services (2.0.0.M1)
Not Installed        gvNIX - Annotations - Loupe Fields (2.0.0.M1)
Not Installed        gvNIX - Annotations - Optimistic Concurrency Control (2.0.0.M1)
Not Installed        gvNIX - Annotations - Services Management (2.0.0.M1)
Not Installed        gvNIX - Annotations - Web Datatables Addon (2.0.0.M1)
Not Installed        gvNIX - Annotations - Web MVC (JSP) layer services (2.0.0.M1)
Not Installed        gvNIX - Annotations - Web MVC Bindings (2.0.0.M1)
Not Installed        gvNIX - Annotations - Web MVC Dialogs (2.0.0.M1)
Not Installed        gvNIX - Annotations - Web Report (2.0.0.M1)
Not Installed        gvNIX - Roo Addon Suite (2.0.0.M1)
Not Installed        gvNIX - Support Module (2.0.0.M1)</pre>
</div>
</div>
</li>
<li>
<p>Ahora que ya tienes instalado el repositorio que contiene los componentes de gvNIX, continuamos con
la instalación de los mismos. Para ello ejecuta el siguiente comando:</p>
<div class="listingblock">
<div class="content">
<pre>roo&gt; addon suite install name --symbolicName org.gvnix.roo.addon.suite</pre>
</div>
</div>
</li>
<li>
<p>Valida que se ha instalado el Roo Add-On Suite de gvNIX ejecutando el siguiente comando:</p>
<div class="listingblock">
<div class="content">
<pre>roo&gt; addon suite list</pre>
</div>
</div>
</li>
<li>
<p>Si todo ha salido bien, aparecerá un listado mostrando todos los Roo Add-On Suites que tienes
instalados en tu distribución de Spring Roo:</p>
<div class="listingblock">
<div class="content">
<pre>Getting all 'Roo Addon Suites' installed on Spring Roo Shell...

   org.osgi.service.subsystem.root
   org.gvnix.roo.addon.suite

2 Roo Addon Suites were found at your Spring Roo installation</pre>
</div>
</div>
</li>
<li>
<p>Para finalizar, valida que todos los componentes de gvNIX se han instalado correctamente
en la distribución de Spring Roo ejecutando el siguiente comando:</p>
<div class="listingblock">
<div class="content">
<pre>roo&gt; addon list</pre>
</div>
</div>
</li>
<li>
<p>Si todo ha salido bien, al final del listado que aparecerá en la consola, podrás ver
todos los componentes de gvNIX instalados y activados del siguiente modo:</p>
<div class="listingblock">
<div class="content">
<pre>   86|Active     |    1|gvNIX - Annotations - GEO Support (2.0.0.M1)
   87|Active     |    1|gvNIX - Addon - Dynamic Configuration (2.0.0.M1)
   88|Active     |    1|gvNIX - Addon - Loupe Fields (2.0.0.M1)
   89|Active     |    1|gvNIX - Addon - Web MVC (JSP) layer services (2.0.0.M1)
   90|Active     |    1|gvNIX - Annotations - Web Datatables Addon (2.0.0.M1)
   91|Active     |    1|gvNIX - Addon - JPA layer services (2.0.0.M1)
   92|Active     |    1|gvNIX - Addon - Web Datatables Addon (2.0.0.M1)
   93|Active     |    1|gvNIX - Annotations - Web MVC (JSP) layer services (2.0.0.M1)
   94|Active     |    1|gvNIX - Addon - Services Management (2.0.0.M1)
   95|Active     |    1|gvNIX - Annotations - Web Report (2.0.0.M1)
   96|Active     |    1|gvNIX - Addon - Co-official languages of Spain (2.0.0.M1)
   97|Active     |    1|gvNIX - Annotations - Optimistic Concurrency Control (2.0.0.M1)
   98|Active     |    1|gvNIX - Addon - Web MVC Dialogs (2.0.0.M1)
   99|Active     |    1|gvNIX - Annotations - Services Management (2.0.0.M1)
  100|Active     |    1|gvNIX - Addon - Monitoring Support (2.0.0.M1)
  101|Active     |    1|gvNIX - Addon - Bootstrap3 support (2.0.0.M1)
  102|Active     |    1|gvNIX - Annotations - Web MVC Dialogs (2.0.0.M1)
  103|Active     |    1|gvNIX - Addon - GEO Support (2.0.0.M1)
  104|Active     |    1|gvNIX - Addon - Optimistic Concurrency Control (2.0.0.M1)
  105|Active     |    1|gvNIX - Support Module (2.0.0.M1)
  106|Active     |    1|gvNIX - Annotations - Loupe Fields (2.0.0.M1)
  107|Active     |    1|gvNIX - Annotations - JPA layer services (2.0.0.M1)
  108|Active     |    1|gvNIX - Addon - Web Report (2.0.0.M1)
  109|Active     |    1|gvNIX - Annotations - Web MVC Bindings (2.0.0.M1)
  110|Active     |    1|gvNIX - Addon - Typical Security (2.0.0.M1)
  111|Active     |    1|gvNIX - Addon - Web MVC Menu (2.0.0.M1)
  112|Active     |    1|gvNIX - Addon - Web MVC Bindings (2.0.0.M1)</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Una vez hecho esto, ya se puede trabajar con el entorno gvNIX desde la
línea de comandos. Sin embargo, se recomienda utilizar un IDE de
desarrollo que permita integrar el entorno gvNIX como, por ejemplo STS o
Eclipse.</p>
</div>
</div>
</div>
</div>
<h1 id="i-introducción" class="sect0"><a class="anchor" href="#i-introducción"></a>I. Introducción</h1>
<div class="sect1">
<h2 id="introducción"><a class="anchor" href="#introducción"></a>1. Introducción</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="qué-es-gvnix"><a class="anchor" href="#qué-es-gvnix"></a>1.1. ¿Qué es gvNIX?</h3>
<div class="paragraph">
<p>gvNIX es un entorno de trabajo Java de código abierto para el desarrollo
rápido de aplicaciones web sobre tecnología Spring. Sus funcionalidades hacen que sea
un entorno altamente productivo, flexible y que no compromete la calidad de los proyectos.</p>
</div>
<div class="paragraph">
<p>Está compuesto por una serie de herramientas de código abierto distribuídas
en forma de <a href="http://docs.spring.io/spring-roo/docs/2.0.0.M1/reference/html/#available-roo-addon-suites">"Spring Roo Add-On Suite"</a>
a través de un repositorio OSGi R5.
Esto le proporciona un amplio apoyo por parte de importantes
organizaciones como <a href="http://spring.io/">Spring</a> y <a href="http://pivotal.io/">Pivotal</a>.
Añade funcionalidades de alto nivel a las prestaciones que ya se obtienen con
<a href="http://projects.spring.io/spring-roo/">Spring Roo</a> para mejorar la
productividad.</p>
</div>
<div class="paragraph">
<p>gvNIX está patrocinado por la Dirección General de Tecnologías de la Información y la Comunicación
(DGTIC) de la Conselleria de Hacienda y Modelo Económico de la
Generalitat Valenciana (Comunidad Valenciana, España), gestionado por la
Asociación gvSIG y dirigido por DISID.</p>
</div>
<div class="paragraph">
<p>gvNIX está disponible dentro del proyecto de Migración a Software de
fuentes abiertas <a href="http://www.gvpontis.gva.es">gvPONTIS</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.gvnix.org">Página del proyecto gvNIX</a></p>
</li>
<li>
<p><a href="http://www.gvpontis.gva.es/cast/gvnix/">Página de gvNIX dentro del
proyecto gvPONTIS</a></p>
</li>
<li>
<p><a href="http://projects.spring.io/spring-roo/">Página oficial de Spring Roo</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="qué-es-spring-roo"><a class="anchor" href="#qué-es-spring-roo"></a>1.2. ¿Qué es Spring Roo?</h3>
<div class="paragraph">
<p>Spring Roo es un entorno de trabajo Java que permite el desarrollo de
aplicaciones web de forma rápida y cómoda para el desarrollador. Sus
principales características son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Generación de código en Java (lenguaje estático).</p>
</li>
<li>
<p>Eliminar el trabajo tedioso centrando el desarrollo en la lógica de
negocio.</p>
</li>
<li>
<p>Convención sobre configuración.</p>
</li>
<li>
<p>Desarrollo dirigido por el dominio (Domain-Driven Development):</p>
<div class="ulist">
<ul>
<li>
<p>Diseño dirigido por el modelo de entidades.</p>
</li>
<li>
<p>Lógica en las entidades (Real Object Oriented), eliminando capas
redundantes.</p>
</li>
<li>
<p>Otras capas opcionales (servicios, DAOs, &#8230;&#8203;).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Crea un proyecto en segundos.</p>
</li>
<li>
<p>Realimentación: añade valor durante todo el ciclo de vida.</p>
</li>
<li>
<p>No incorpora elementos adicionales al entorno de ejecución, por lo que
no penaliza la velocidad ni la memoria de la aplicación.</p>
</li>
<li>
<p>Recibe instrucciones a través de una consola interactiva con
autocompletado y ayuda en línea.</p>
</li>
<li>
<p>Extensible usando <em>bundles OSGi</em>.</p>
</li>
<li>
<p>Aprovecha el conocimiento: no necesita más conocimiento que el
necesario para el desarrollo de aplicaciones JEE.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="qué-es-un-roo-add-on-suite"><a class="anchor" href="#qué-es-un-roo-add-on-suite"></a>1.3. ¿Qué es un "Roo Add-On Suite"?</h3>
<div class="paragraph">
<p>Los "Roo Add-On Suites" son la mejor manera de empaquetar y distribuir conjuntos de Add-Ons para que
puedan ser instalados en distribuciones de Spring Roo de forma rápida y sencilla.</p>
</div>
<div class="paragraph">
<p>Están basados en subsistemas de OSGi R5, los cuales permiten instalar un conjunto de componentes sobre
la distribución de Spring Roo sin comprometer su modularidad.</p>
</div>
<div class="paragraph">
<p>Por todo lo anterior, decimos que <strong>gvNIX es un "Spring Roo Add-On Suite"</strong> que puede ser instalado en
distribuciones de Spring Roo para ampliar sus funcionalidades básicas.</p>
</div>
</div>
<div class="sect2">
<h3 id="qué-ofrece-gvnix"><a class="anchor" href="#qué-ofrece-gvnix"></a>1.4. ¿Qué ofrece gvNIX?</h3>
<div class="paragraph">
<p>gvNIX aprovecha las características de Spring Roo y aporta su propia
filosofía, ofrecer al desarrollador componentes de alto valor funcional
para aplicaciones corporativas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Control de concurrencia a nivel de aplicación sin campos en base de
datos.</p>
</li>
<li>
<p>Utilidades de generación de consultas.</p>
</li>
<li>
<p>Utilidades de modificaciones múltiples de entidades.</p>
</li>
<li>
<p>Gestión de temas visuales utilizando jQuery, Bootstrap, HTML5 y CSS3.</p>
</li>
<li>
<p>Gestión de la visualización de excepciones.</p>
</li>
<li>
<p>Gestión de mensajes de usuario en ventana modal.</p>
</li>
<li>
<p>Gestión de la estructura de páginas en el menú.</p>
</li>
<li>
<p>Gestión de patrones de visualización de entidades y sus relaciones utilizando
el componente Datatables.</p>
</li>
<li>
<p>Gestión de transformación de cadenas vacías a valores nulos.</p>
</li>
<li>
<p>Gestión de servicios locales y servicios web (importación y
exposición).</p>
</li>
<li>
<p>Control de acceso (autenticación y autorización).</p>
</li>
<li>
<p>Gestión de configuraciones por entorno.</p>
</li>
<li>
<p>Generación de documentos (reportes).</p>
</li>
<li>
<p>Gestión de relaciones utilizando componente Lupa.</p>
</li>
<li>
<p>Gestión de información geográfica.</p>
</li>
<li>
<p>Generación de GeoPortales interactivos.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="empezando-con-gvnix-tutorial-i"><a class="anchor" href="#empezando-con-gvnix-tutorial-i"></a>2. Empezando con gvNIX: Tutorial (I)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En este capítulo generaremos una aplicación sencilla paso a paso de forma rápida para que
puedas ver y entender cómo se trabaja con la herramienta de desarrollo gvNIX en un proyecto básico.</p>
</div>
<div class="paragraph">
<p>Los detalles sobre la generación del código y la explicación de cada uno de los comandos ejecutados, se
mostrarán en las siguientes secciones de este manual.</p>
</div>
<div class="sect2">
<h3 id="qué-aprenderás"><a class="anchor" href="#qué-aprenderás"></a>2.1. ¿Qué aprenderás?</h3>
<div class="paragraph">
<p>En este tutorial aprenderás como crear una aplicación desde cero utilizando la herramienta de
desarrollo gvNIX sobre el IDE STS.</p>
</div>
<div class="paragraph">
<p>Las principales características de gvNIX que veremos en este tutorial son las siguientes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creación de un proyecto</p>
</li>
<li>
<p>Configurarción de persistencia</p>
</li>
<li>
<p>Generación del modelo de entidades</p>
</li>
<li>
<p>Generación de métodos de búsqueda</p>
</li>
<li>
<p>Generación de capa web</p>
</li>
<li>
<p>Componente Datatables y Bootstrap</p>
</li>
<li>
<p>Patrones de Pantalla</p>
</li>
<li>
<p>Ejecución de una aplicación en un servidor Tomcat</p>
</li>
<li>
<p>Edición de datos en linea</p>
</li>
<li>
<p>Componente Lupa</p>
</li>
<li>
<p>Instalación y gestión de menú</p>
</li>
<li>
<p>Aplicar seguridad a nuestra aplicación</p>
</li>
<li>
<p>Generación de informes utilizando Jasper Reports</p>
</li>
<li>
<p>Tests funcionales y Tests de integración</p>
</li>
<li>
<p>Generación de servicios web.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="detalles-de-la-aplicación"><a class="anchor" href="#detalles-de-la-aplicación"></a>2.2. Detalles de la aplicación</h3>
<div class="paragraph">
<p>La aplicación que se va a generar está basada en la aplicación de ejemplo Petclinic de Spring. Los usuarios de esta aplicación son empleados
de una clínica veterinaria, que a lo largo de su jornada laboral, necesitan gestionar información sobre veterinarios, clientes y sus mascotas.</p>
</div>
<div class="paragraph">
<p>Después de esta pequeña introducción sobre la aplicación que se va a desarrollar, hemos generado un diagrama de clases simple
para el modelo de entidades de esta aplicación:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/petclinic-uml.png" alt="Petclinic UML">
</div>
</div>
<div class="paragraph">
<p>Para sacar el máximo partido a las funcionalidades de gvNIX y Spring Roo, es recomendable que las aplicaciones se generen
siguiendo la filosofía del <a href="https://es.wikipedia.org/wiki/Dise%C3%B1o_guiado_por_el_dominio">diseño guiado por el dominio</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Hay que tener en cuenta que la aplicación que se va a generar no será una aplicación real, ya que normalmente necesitaría
una serie de trabajos adicionales para personalizar la capa web, implementar lógica de negocio, etc..</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="paso-1-crear-un-proyecto"><a class="anchor" href="#paso-1-crear-un-proyecto"></a>2.3. Paso 1: Crear un proyecto</h3>
<div class="paragraph">
<p>A continuación, vamos a crear un nuevo proyecto desde STS. Para ello accede a <strong>"New &gt; Project&#8230;&#8203; &gt; Spring &gt; Spring Roo Project"</strong>
como se muestra en la imagen:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_new_roo_project.png" alt="Nuevo proyecto">
</div>
</div>
<div class="paragraph">
<p>Una vez seleccionado el tipo de proyecto que queremos generar, configura el proyecto:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_new_roo_project_2.png" alt="Configuración del Proyecto">
</div>
</div>
<div class="paragraph">
<p><strong>Nombre del Proyecto:</strong> petclinic</p>
</div>
<div class="paragraph">
<p><strong>Top level package:</strong> com.springsource.petclinic</p>
</div>
<div class="paragraph">
<p>Al clicar sobre Next y Finish se generará el nuevo proyecto y seguidamente se
iniciará la consola de Spring Roo.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_roo_shell.png" alt="Consola de gvNIX">
</div>
</div>
<div class="paragraph">
<p><strong>IMPORTANTE</strong> Antes de continuar con el tutorial es necesario que valides que ĺa distribución de
Spring Roo que estás utilizando tiene instalados los componentes de gvNIX.</p>
</div>
<div class="paragraph">
<p>Para ello, ejecuta el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt; addon suite list</pre>
</div>
</div>
<div class="paragraph">
<p>Debe mostrarse el siguiente contenido:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt; addon suite list
Getting all 'Roo Addon Suites' installed on Spring Roo Shell...

   org.osgi.service.subsystem.root
   org.gvnix.roo.addon.suite

2 Roo Addon Suites were found at your Spring Roo installation
roo&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>En caso de que solo aparezca el Roo Add-On Suite por defecto "org.osgi.service.subsystem.root", significará
que no has instalado de forma correcta gvNIX.</p>
</div>
<div class="paragraph">
<p>Sigue los pasos de la <a href="#instalar-gvnix">sección anterior</a> para instalar los componentes de gvNIX
sobre la distribución de Spring Roo antes de continuar con el tutorial.</p>
</div>
</div>
<div class="sect2">
<h3 id="paso-2-configurar-persistencia"><a class="anchor" href="#paso-2-configurar-persistencia"></a>2.4. Paso 2: Configurar persistencia</h3>
<div class="paragraph">
<p>¿Ya aparecen los componentes de gvNIX instalados en tu distribución de Roo? Si no es así, sigue los pasos de la
<a href="#instalar-gvnix">sección anterior</a> para instalar los componentes de gvNIX sobre la distribución de Spring Roo
antes de continuar con el tutorial.</p>
</div>
<div class="paragraph">
<p>Vamos a configurar la persistencia de nuestro proyecto. En este caso vamos a utilizar HIBERNATE como ORM y el tipo
 de base de datos HYPERSONIC_PERSISTENT.</p>
</div>
<div class="paragraph">
<p>Para ello, ejecutamos el siguiente comando sobre la consola de gvNIX en STS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt; jpa setup --provider HIBERNATE --database HYPERSONIC_PERSISTENT</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-3-generar-modelo-de-entidades"><a class="anchor" href="#paso-3-generar-modelo-de-entidades"></a>2.5. Paso 3: Generar modelo de entidades</h3>
<div class="paragraph">
<p>Siguiendo el modelo de entidades <a href="#detalles-de-la-aplicación">propuesto anteriormente</a>, ejecutaremos los siguientes comandos
para generar nuestro dominio:</p>
</div>
<div class="paragraph">
<p>Crea todas las entidades de nuestra aplicación ejecutando los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> entity jpa --class ~.domain.Pet --sequenceName PET_SEQ
 entity jpa --class ~.domain.Visit --sequenceName VISIT_SEQ
 entity jpa --class ~.domain.AbstractPerson --abstract
 entity jpa --class ~.domain.Vet --extends ~.domain.AbstractPerson
 entity jpa --class ~.domain.Owner --extends ~.domain.AbstractPerson</pre>
</div>
</div>
<div class="paragraph">
<p>Crea los enumerados <strong>PetType</strong> y <strong>Speciality</strong> ejecutando los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> enum type --class ~.reference.PetType
 enum constant --name Dog
 enum constant --name Cat
 enum constant --name Bird
 enum type --class ~.reference.Specialty
 enum constant --name Cardiology
 enum constant --name Dentistry
 enum constant --name Nutrition</pre>
</div>
</div>
<div class="paragraph">
<p>Añade todos los campos a las entidades ejecutando los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> field string --fieldName firstName --sizeMin 3 --sizeMax 30 --class ~.domain.AbstractPerson
 field string --fieldName lastName --notNull --sizeMin 3 --sizeMax 30
 field string --fieldName address --notNull --sizeMax 50 --sizeMin 1
 field string --fieldName city --notNull --sizeMax 30
 field string --fieldName telephone --notNull
 field string --fieldName homePage --sizeMax 30
 field string --fieldName email --sizeMax 30 --sizeMin 6
 field date --fieldName birthDay --type java.util.Date --notNull
 field string --fieldName description --sizeMax 255 --class ~.domain.Visit
 field date --fieldName visitDate --type java.util.Date --notNull --past
 field reference --fieldName pet --type ~.domain.Pet --notNull
 field reference --fieldName vet --type ~.domain.Vet
 field boolean --fieldName sendReminders --notNull --primitive --class ~.domain.Pet
 field string --fieldName name --notNull --sizeMin 1
 field number --fieldName weight --type java.lang.Float --notNull --min 0
 field reference --fieldName owner --type ~.domain.Owner
 field enum --fieldName type --type ~.reference.PetType --notNull
 field date --fieldName employedSince --type java.util.Calendar --notNull --past --class ~.domain.Vet
 field enum --fieldName specialty --type ~.reference.Specialty --notNull false
 field set --class ~.domain.Owner --fieldName pets --type ~.domain.Pet --mappedBy owner --notNull false --cardinality ONE_TO_MANY
 field set --class ~.domain.Vet --fieldName visits --type ~.domain.Visit --mappedBy vet --notNull false --cardinality ONE_TO_MANY
 field reference --fieldName owner --type ~.domain.Owner --class ~.domain.Vet
 field set --fieldName vets --type ~.domain.Vet --class ~.domain.Owner --cardinality ONE_TO_MANY --mappedBy owner
 field set --fieldName visits --type ~.domain.Visit --class ~.domain.Pet --cardinality ONE_TO_MANY --mappedBy pet</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-4-métodos-de-búsqueda"><a class="anchor" href="#paso-4-métodos-de-búsqueda"></a>2.6. Paso 4: Métodos de búsqueda</h3>
<div class="paragraph">
<p>Para ser capaces de filtrar los registros guardados en nuestra base de datos, es necesario que nuestras entidades dispongan
de unos métodos de búsqueda.</p>
</div>
<div class="paragraph">
<p>Para instalarlos, ejecutaremos los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>finder add --finderName findPetsByNameAndWeight --class ~.domain.Pet
finder add --finderName findPetsByOwner
finder add --finderName findPetsBySendRemindersAndWeightLessThan
finder add --finderName findPetsByTypeAndNameLike
finder add --finderName findVisitsByDescriptionAndVisitDate --class ~.domain.Visit
finder add --finderName findVisitsByVisitDateBetween
finder add --finderName findVisitsByDescriptionLike</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-5-capa-web"><a class="anchor" href="#paso-5-capa-web"></a>2.7. Paso 5: Capa web</h3>
<div class="paragraph">
<p>En este momento ya disponemos de nuestro modelo de entidades generado. Ahora, es necesario que generemos la capa web
de nuestra aplicación para que los usuarios puedan acceder a ella a través de un navegador.</p>
</div>
<div class="paragraph">
<p>En primer lugar instalamos todos los componentes web de nuestra aplicación como imágenes, estilos css, tagx, etc&#8230;&#8203; utilizando
el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc setup</pre>
</div>
</div>
<div class="paragraph">
<p>A continuación, generamos la capa web de todas las entidades de nuestro proyecto ejecutando el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc all --package ~.web</pre>
</div>
</div>
<div class="paragraph">
<p>Para generar las vistas de los métodos de búsqueda añadidos <a href="#paso-4-métodos-de-búsqueda">anteriormente</a> y que el usuario
pueda realizar búsquedas de forma visual, ejecutaremos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc finder all</pre>
</div>
</div>
<div class="paragraph">
<p>Si necesitas instalar varios idiomas en tu aplicación, puedes ejecutar los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc language --code es
web mvc language --code de</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-6-instalar-jquery-datatables-y-bootstrap"><a class="anchor" href="#paso-6-instalar-jquery-datatables-y-bootstrap"></a>2.8. Paso 6: Instalar JQuery, Datatables y Bootstrap</h3>
<div class="paragraph">
<p>A continuación, incluiremos la librería <a href="https://jquery.com/">JQuery</a> en nuestro proyecto generado.
Además, incluiremos el componente <a href="http://datatables.net/">Datatables</a> que utilizaremos en las vistas de listado y finalmente,
transformaremos la apariencia de nuestra aplicación para que se muestre con estilo <a href="http://getbootstrap.com/">Bootstrap</a>.</p>
</div>
<div class="paragraph">
<p>Para instalar jQuery en nuestro proyecto, ejecutamos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc jquery setup</pre>
</div>
</div>
<div class="paragraph">
<p>Para que todas nuestras vistas utilicen componentes jQuery, utilizaremos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc jquery all</pre>
</div>
</div>
<div class="paragraph">
<p>Seguimos con el tutorial instalando el componente Datatables en nuestro proyecto con el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc datatables setup</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>De momento solo instalamos los componentes Datatables, pero nuestras vistas de listado no lo están utilizando.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Para finalizar este punto, transformamos la apariencia de nuestra aplicación a Bootstrap con el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc bootstrap setup</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-7-edición-en-linea-y-selección-múltiple"><a class="anchor" href="#paso-7-edición-en-linea-y-selección-múltiple"></a>2.9. Paso 7: Edición en linea y Selección Múltiple</h3>
<div class="paragraph">
<p>Entre las múltiples funcionalidades que ofrece el componente Datatables, el cual hemos incluido en el
<a href="#paso-6-instalar-jquery-datatables-y-bootstrap">paso anterior</a>, encontramos la edición en linea y la selección múltiple.</p>
</div>
<div class="paragraph">
<p>La funcionalidad de edición en linea permite a los usuarios crear y editar registros directamente desde el componente Datatable
sin abandonar el listado.</p>
</div>
<div class="paragraph">
<p>La funcionalidad de selección múltiple permite seleccionar varios registros mostrados en el componente Datatables para así, aplicar
acciones sobre ellos, como puede ser editar o eliminar.</p>
</div>
<div class="paragraph">
<p>Para que los Datatables que utilicemos en nuestra aplicación sean capaces de incluir estas funcionalidades
, ejecutaremos los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>jpa gvnix setup
jpa batch all
web mvc batch setup
web mvc batch all</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-8-patrones-de-pantalla"><a class="anchor" href="#paso-8-patrones-de-pantalla"></a>2.10. Paso 8: Patrones de Pantalla</h3>
<div class="paragraph">
<p>En este punto, vamos a definir una serie de patrones de pantalla "maestro &gt; detalle" utilizando el componente Datatables añadido en el
<a href="#paso-6-instalar-jquery-datatables-y-bootstrap">paso anterior</a>.</p>
</div>
<div class="sect3">
<h4 id="creación-de-maestros"><a class="anchor" href="#creación-de-maestros"></a>2.10.1. Creación de Maestros</h4>
<div class="paragraph">
<p>A continuación creamos todas las vistas maestras de nuestra aplicación:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc datatables add --type ~.web.VetController --mode show
web mvc datatables add --type ~.web.PetController
web mvc datatables add --type ~.web.OwnerController
web mvc datatables add --type ~.web.VisitController --inline true --ajax true</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Utiliza el parámetro <strong>--mode</strong> con valor show para mostrar un único registro por página. Utiliza el parámetro <strong>--inlineEditing</strong> para habilitar
la edición en linea.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="creación-de-detalles"><a class="anchor" href="#creación-de-detalles"></a>2.10.2. Creación de Detalles</h4>
<div class="paragraph">
<p>Después de crear los maestros, continuamos generando los detalles.</p>
</div>
<div class="paragraph">
<p>Para generar el patrón de pantalla "Maestro Owners &gt; Detalle Pets" ejecutaremos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc datatables detail add --type ~.web.OwnerController --property pets</pre>
</div>
</div>
<div class="paragraph">
<p>Para generar el patrón de pantalla "Maestro Owners &gt; Detalle Vets" ejecutaremos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc datatables detail add --type ~.web.OwnerController --property vets</pre>
</div>
</div>
<div class="paragraph">
<p>Para generar el patrón de pantalla "Maestro Owners &gt; Detalle Pet &gt; Detalle Visit" ejecutaremos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc datatables detail add --type ~.web.PetController --property visits</pre>
</div>
</div>
<div class="paragraph">
<p>Para generar el patrón de pantalla "Maestro Owners &gt; Detalle Vet &gt; Detalle Visit" ejecutaremos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc datatables detail add --type ~.web.VetController --property visits</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>El ejemplo anterior muestra un patrón de pantalla de tres niveles. (Maestro, detalle y detalle de detalle)</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-9-primera-ejecución"><a class="anchor" href="#paso-9-primera-ejecución"></a>2.11. Paso 9: Primera ejecución</h3>
<div class="paragraph">
<p>En este momento vamos a ejecutar nuestra aplicación en un servidor Tomcat.</p>
</div>
<div class="paragraph">
<p>En primer lugar, es necesario añadir el servidor Tomcat a nuestro IDE STS. Para ello, seguiremos los siguientes pasos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>En la pestaña "Servers" añadiremos un nuevo servidor utilizando "New&#8230;&#8203; &gt; Server".</p>
</li>
<li>
<p>Aparecerá una ventana como la siguiente, donde seleccionaremos el servidor "Apache Tomcat v6.0":</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_servers_new.png" alt="Nuevo Servidor">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Seleccionamos el directorio donde tengamos descargado nuestro apache-tomcat. Si no lo tienes descargado, puedes hacer
click sobre el botón "Download and Install" y se descargará de forma automática:</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_servers_configure.png" alt="Configurar servidor">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>A continuación, añadimos nuestra aplicación generada al servidor Tomcat:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eclipse_servers-addremoveapp.png" alt="Nueva app" width="align:center">
</div>
</div>
<div class="paragraph">
<p>Ahora que ya tenemos un servidor Tomcat configurado y nuestra aplicación añadida, podemos arrancar el servidor Tomcat utilizando
el botón de "Play" con el servidor Tomcat seleccionado:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_servers-buttons.png" alt="Botones Servers">
</div>
</div>
<div class="paragraph">
<p>Otra forma de arrancar nuestro proyecto es hacer click derecho sobre el proyecto en
STS y seleccionando la opción "Run as&#8230;&#8203; &gt; Run On Server", seleccionamos el servidor sobre el cual
queremos ejecutar nuestro proyecto y presionamos "Finish" para iniciar la ejecución.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_run-on-server.png" alt="Ejecutar aplicación en servidor">
</div>
</div>
<div class="paragraph">
<p>Una vez haya arrancado, podemos acceder a la URL <a href="http://localhost:8080/petclinic/" class="bare">http://localhost:8080/petclinic/</a> desde nuestro navegador para
visualizar la aplicación generada.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/sample-application-0.png" alt="Estado de la aplicación">
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-10-componente-lupa"><a class="anchor" href="#paso-10-componente-lupa"></a>2.12. Paso 10: Componente Lupa</h3>
<div class="paragraph">
<p>El componente lupa provee funcionalidades para buscar datos relacionados de forma rápida y sencilla utilizando AJAX.</p>
</div>
<div class="paragraph">
<p>Para instalar el componente lupa en nuestra aplicación generada, es necesario ejecutar el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc loupe setup</pre>
</div>
</div>
<div class="paragraph">
<p>A continuación, añadimos una serie de funcionalidades necesarias para el correcto funcionamiento del componente
en la capa controladora:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc loupe set --controller ~.web.VisitController</pre>
</div>
</div>
<div class="paragraph">
<p>Finalmente, convertimos los elementos "combobox" a componentes lupa utilizando los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc loupe field --controller ~.web.VisitController --field pet --caption name --additionalFields name,weight --max 5
web mvc loupe field --controller ~.web.VisitController --field vet</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-11-instalación-del-menú"><a class="anchor" href="#paso-11-instalación-del-menú"></a>2.13. Paso 11: Instalación del Menú</h3>
<div class="paragraph">
<p>gvNIX provee un menú mucho más personalizable que el definido inicialmente por Spring Roo. Por ello, se aconseja
que todas las aplicaciones incorporen el menú de gvNIX utilizando este sencillo comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>menu setup</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-12-aplicar-seguridad"><a class="anchor" href="#paso-12-aplicar-seguridad"></a>2.14. Paso 12: Aplicar Seguridad</h3>
<div class="paragraph">
<p>Aplicar seguridad a un proyecto es muy sencillo con gvNIX. Utilizando el siguiente comando, se añade seguridad a nuestro proyecto
generado utilizando <a href="http://projects.spring.io/spring-security/">Spring Security</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>security setup</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-13-gestión-de-informes"><a class="anchor" href="#paso-13-gestión-de-informes"></a>2.15. Paso 13: Gestión de Informes</h3>
<div class="paragraph">
<p>A continuación, incluiremos las funcionalidades necesarias para generar un informe sobre los "Owners"
que tenemos registrados en nuestro sistema petclinic. Para ello, ejecutamos los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web report setup
web report add --controller ~.web.OwnerController --reportName report_owners</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-14-control-de-concurrencia"><a class="anchor" href="#paso-14-control-de-concurrencia"></a>2.16. Paso 14: Control de concurrencia</h3>
<div class="paragraph">
<p>Configuraremos el control de concurrencia sobre la entidad "Pet" de nuestro proyecto, para así evitar que se pierdan
los datos guardados cuando varios usuarios editan un mismo registro.</p>
</div>
<div class="paragraph">
<p>Para ello, basta con ejecutar el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>occ checksum set --entity ~.domain.Pet</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-15-tests-funcionales-y-tests-de-integración"><a class="anchor" href="#paso-15-tests-funcionales-y-tests-de-integración"></a>2.17. Paso 15: Tests funcionales y tests de integración</h3>
<div class="paragraph">
<p>En este momento, vamos a añadir una serie de tests funcionales y tests de integración a nuestra aplicación generada. Para los
tests funcionales utilizaremos <a href="http://www.seleniumhq.org/">Selenium</a> y para los tests de integración utilizaremos <a href="http://junit.org/">JUnit</a>.</p>
</div>
<div class="paragraph">
<p>Añadimos los tests funcionales a todas las vistas de nuestro proyecto utilizando los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>selenium test --controller ~.web.OwnerController
selenium test --controller ~.web.PetController
selenium test --controller ~.web.VetController
selenium test --controller ~.web.VisitController</pre>
</div>
</div>
<div class="paragraph">
<p>Añadimos los tests de integración a cada una de las entidades de nuestro proyecto utilizando los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>test integration --entity ~.domain.Vet
test integration --entity ~.domain.Owner
test integration --entity ~.domain.Pet
test integration --entity ~.domain.Visit</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-16-servicios-web"><a class="anchor" href="#paso-16-servicios-web"></a>2.18. Paso 16: Servicios web</h3>
<div class="paragraph">
<p>Para acabar con esta guía rápida sobre las funcionalidades disponibles en la herramienta de desarrollo gvNIX, serviremos
varios servicios web desde nuestra aplicación generada.</p>
</div>
<div class="paragraph">
<p>Para ello, ejecutamos los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>remote service define ws --class ~.services.PetsServices --serviceName ws_get_all_pets
remote service operation --name ws_list_pets --service ~.services.PetsServices</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Estos servicios estarán disponibles en <a href="http://localhost:8080/petclinic/services" class="bare">http://localhost:8080/petclinic/services</a> y podrán ser consumidos
por aplicaciones externas.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="resultado"><a class="anchor" href="#resultado"></a>2.19. Resultado</h3>
<div class="paragraph">
<p>Después de seguir este rápido tutorial donde se muestran algunas de las funcionalidades que ofrece la herramienta gvNIX,
tendremos una aplicación adaptativa (responsive UI) que podrá ser visualizada en cualquier dispositivo ya sea ordenadores,
tablets o incluso móviles. La aplicación adaptativa generada tendrá el siguiente aspecto:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/sample-application-login.png" alt="Login">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/sample-application-pet-creation.png" alt="Alta de una mascota">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/sample-application-pet-list.png" alt="Listado de mascotas">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/sample-application-visit-inline.png" alt="Edición en linea">
</div>
</div>
<div class="paragraph">
<p>Ahora que ya conoces las funcionalidades básicas de gvNIX, te recomendamos que continues leyendo este manual.
Algunas secciones que pueden interesarte son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gvnix-avanzado-componentes-geo-tutorial-ii">gvNIX Avanzado - Componentes GEO: Tutorial (II)</a></p>
</li>
<li>
<p><a href="#gvnix-addons">Listado de Add-Ons disponibles en gvNIX</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gvnix-avanzado-componentes-geo-tutorial-ii"><a class="anchor" href="#gvnix-avanzado-componentes-geo-tutorial-ii"></a>3. gvNIX avanzado: Componentes GEO (Tutorial II)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En este capítulo actualizaremos la aplicación generada en la <a href="#empezando-con-gvnix-tutorial-i">primera parte</a> de este tutorial
incluyendo componentes de tipo geográfico.</p>
</div>
<div class="paragraph">
<p>Los detalles sobre la generación del código y la explicación de cada uno de los comandos ejecutados, se
mostrarán en las siguientes secciones de este manual.</p>
</div>
<div class="sect2">
<h3 id="qué-aprenderás-2"><a class="anchor" href="#qué-aprenderás-2"></a>3.1. ¿Qué aprenderás?</h3>
<div class="paragraph">
<p>En esta segunda parte del tutorial, aprenderás a incluir componentes de tipo GEO en tus aplicaciones generadas
utilizando la herramienta de desarrollo de gvNIX.</p>
</div>
<div class="paragraph">
<p>Las principales características de gvNIX que veremos en este tutorial son las siguientes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configurar persistencia con BBDD que aceptan campos de tipo GEO.</p>
</li>
<li>
<p>Incluir soporte espacial utilizando <a href="http://www.hibernatespatial.org/">Hibernate Spatial</a>.</p>
</li>
<li>
<p>Añadir campos de tipo GEO en entidades generadas.</p>
</li>
<li>
<p>Generar buscadores sobre campos de tipo GEO.</p>
</li>
<li>
<p>Añadir mapas en las vistas de creación, actualización y visualización.</p>
</li>
<li>
<p>Generar geoportales para representar y gestionar los datos de la aplicación.</p>
</li>
<li>
<p>Añadir entidades al geoportal generado</p>
</li>
<li>
<p>Añadir capas base WMS y TileLayers al geoportal generado.</p>
</li>
<li>
<p>Añadir herramientas al geoportal generado.</p>
</li>
<li>
<p>Filtrar datos representados en el geoportal utilizando el componente Datatables</p>
</li>
<li>
<p>Seleccionar datos representados en el geoportal utilizando el componente Datatables</p>
</li>
<li>
<p>Agrupar elementos dependiendo del nivel de zoom.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="paso-1-configurar-persistencia-geo"><a class="anchor" href="#paso-1-configurar-persistencia-geo"></a>3.2. Paso 1: Configurar persistencia GEO</h3>
<div class="paragraph">
<p>Lo primero que debemos saber es que no todas las bases de datos tienen soporte para tipos de datos
geográficos, consultas geoespaciales, etc.</p>
</div>
<div class="paragraph">
<p>Por este motivo, antes de incluir componentes geográficos en nuestra aplicación, es necesario
configurar una base de datos válida.</p>
</div>
<div class="paragraph">
<p>gvNIX nos ayudará en esta tarea y nos propone sólo bases de datos compatibles con campos de tipo GEO.
Actualmente gvNIX soporta las siguientes bases de datos con soporte geo:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.postgresql.org/">PostgreSql</a></p>
</li>
<li>
<p><a href="https://www.oracle.com/database/index.html">Oracle 10g/11g</a></p>
</li>
<li>
<p><a href="http://www.mysql.com/">MySQL</a></p>
</li>
<li>
<p><a href="http://www.microsoft.com/es-es/server-cloud/products/sql-server/">SqlServer</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>En nuestro caso, utilizaremos una base de datos de tipo POSTGRES. Para ello, es necesario que configures una BBDD de tipo
<a href="http://www.postgresql.org/">POSTGRES</a> en tu equipo y añadas soporte geográfico incluyendo <a href="http://trac.osgeo.org/postgis/">POSTGIS</a>.</p>
</div>
<div class="paragraph">
<p>Para realizar la configuración anterior puedes seguir los siguientes pasos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Instala <a href="http://www.postgresql.org/">PostgreSql</a> y <a href="http://trac.osgeo.org/postgis/">Postgis</a>.</p>
</li>
<li>
<p>De manera opcional, puedes instalar <a href="http://www.pgadmin.org/">pgadmin</a> para gestionar tus bases de datos Postgres de forma visual.</p>
</li>
<li>
<p>Crea una nueva base de datos.</p>
</li>
<li>
<p>Añade la extensión <strong>postgis</strong> y <strong>postgis_topology</strong> en la base de datos generada, tal y como se muestra en la siguiente imágen:</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: true">
<div class="content">
<img src="images/postgis_db.png" alt="Extensiones Postgis">
</div>
</div>
<div class="paragraph">
<p>Para más información sobre como configurar Postgis consulta su guía de referencia <a href="http://postgis.net/documentation/">aquí</a>.</p>
</div>
<div class="paragraph">
<p>Ahora que disponemos de una base de datos válida configurada en nuestro equipo, actualizaremos nuestro proyecto generado
para utilizar una base de datos de tipo POSTGRES ejecutando el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>jpa setup --provider HIBERNATE --database POSTGRES --userName USERNAME --databaseName DATABASENAME --password PASSWORD --hostName HOSTNAME</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-2-añadir-soporte-geo-al-proyecto"><a class="anchor" href="#paso-2-añadir-soporte-geo-al-proyecto"></a>3.3. Paso 2: Añadir soporte GEO al proyecto</h3>
<div class="paragraph">
<p>En este momento, tu base de datos está configurada para <a href="#paso-1-configurar-persistencia-geo">soportar campos de tipo GEO</a>
y dispone de una serie de funcionalidades para gestionar información geográfica.  Sin embargo, tu proyecto no acepta estos componentes de momento.</p>
</div>
<div class="paragraph">
<p>Para añadir soporte espacial en el proyecto generado necesitamos actualizar el mismo para que utilice <a href="http://www.hibernatespatial.org/">Hibernate Spatial</a>.</p>
</div>
<div class="paragraph">
<p>Ejecutando el siguiente comando, nuestro proyecto dispondrá de soporte espacial:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>jpa geo setup --provider HIBERNATE_SPATIAL</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En caso de ejecutar el comando anterior sobre una base de datos no válida aparecerá el siguiente mensaje indicándonos qué
tipos de base de datos aceptan información geográfica:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>There's not any valid database to apply GEO persistence support. GEO is only supported for POSTGRES, ORACLE, MYSQL and MSSQL databases.
You must change it following the next instructions:

Replace your current dialect with the correct one:
org.hibernate.dialect.H2Dialect ==&gt; org.hibernate.spatial.dialect.h2geodb.GeoDBDialect
org.hibernate.dialect.PostgreSQLDialect ==&gt; org.hibernate.spatial.dialect.postgis.PostgisDialect
org.hibernate.dialect.MySQLDialect ==&gt; org.hibernate.spatial.dialect.mysql.MySQLSpatialDialect
org.hibernate.dialect.MySQL5Dialect ==&gt; org.hibernate.spatial.dialect.mysql.MySQLSpatialDialect
org.hibernate.dialect.MySQLInnoDBDialect ==&gt; org.hibernate.spatial.dialect.mysql.MySQLSpatialInnoDBDialect
org.hibernate.dialect.MySQL5InnoDBDialect ==&gt; org.hibernate.spatial.dialect.mysql.MySQLSpatialInnoDBDialect
org.hibernate.dialect.MySQL5DBDialect ==&gt; org.hibernate.spatial.dialect.mysql.MySQLSpatial56Dialect
org.hibernate.dialect.MySQLSpatial56Dialect ==&gt; org.hibernate.spatial.dialect.mysql.MySQLSpatial5InnoDBDialect
org.hibernate.dialect.Oracle10gDialect ==&gt; org.hibernate.spatial.dialect.oracle.OracleSpatial10gDialect
org.hibernate.dialect.OracleDialect ==&gt; org.hibernate.spatial.dialect.oracle.OracleSpatial10gDialect
org.hibernate.dialect.SQLServerDialect ==&gt; org.hibernate.spatial.dialect.SQLServer2008Dialect</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="paso-3-añadir-campos-geo-a-entidades"><a class="anchor" href="#paso-3-añadir-campos-geo-a-entidades"></a>3.4. Paso 3: Añadir campos GEO a entidades</h3>
<div class="paragraph">
<p>Ahora que ya disponemos de soporte espacial en nuestra aplicación, procedemos a añadir campos de tipo GEO en las entidades generadas
en la <a href="#paso-3-generar-modelo-de-entidades">primera parte de este tutorial</a>.</p>
</div>
<div class="paragraph">
<p>Es funcionalidad permite añadir varios tipos de campos GEO como los siguientes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>POLYGON</p>
</li>
<li>
<p>POINT</p>
</li>
<li>
<p>LINESTRING</p>
</li>
<li>
<p>MULTILINESTRING</p>
</li>
<li>
<p>GEOMETRY</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>En este caso añadiremos los campos <strong>localización</strong>, <strong>distancia</strong> y <strong>area</strong> sobre la entidad <strong>Owner</strong>. Para ello, ejecutamos los siguientes
comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>field geo --fieldName location --type POINT --class ~.domain.Owner
field geo --fieldName distance --type LINESTRING --class ~.domain.Owner
field geo --fieldName area --type POLYGON --class ~.domain.Owner</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Los comandos para añadir campos de tipo GEO solo estarán disponibles una vez añadido el soporte espacial en nuestra apliación.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="paso-4-generar-buscadores-geo"><a class="anchor" href="#paso-4-generar-buscadores-geo"></a>3.5. Paso 4: Generar buscadores GEO</h3>
<div class="paragraph">
<p>Para ser capaces de posicionar los distintos registros de las entidades sobre una vista de mapa, necesitamos generar una serie de
buscadores devuelvan la información geográfica de uno o varios registros.</p>
</div>
<div class="paragraph">
<p>Para añadir estos métodos de búsqueda a nuestra aplicación generada, utilizaremos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>finder geo all</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-5-generar-mapas-en-cru"><a class="anchor" href="#paso-5-generar-mapas-en-cru"></a>3.6. Paso 5: Generar mapas en CRU</h3>
<div class="paragraph">
<p>En este punto del tutorial, deberías disponer de una <a href="#paso-1-configurar-persistencia-geo">Base de datos con soporte GEO</a>,
<a href="#paso-2-añadir-soporte-geo-al-proyecto">soporte espacial</a> configurado en el proyecto,
varios <a href="#paso-3-añadir-campos-geo-a-entidades">campos de tipo GEO</a> añadidos en las entidades generadas
y varios <a href="#paso-4-generar-buscadores-geo">métodos de búsqueda</a> de tipo GEO.</p>
</div>
<div class="paragraph">
<p>En caso afirmativo, continuaremos con la generación de campos de tipo mapa en las vistas de creación, actualización y visualización
de nuestras entidades.</p>
</div>
<div class="paragraph">
<p>Gracias a estos campos visuales seremos capaces de gestionar de manera cómoda la información geográfica almacenada en la entidad.</p>
</div>
<div class="paragraph">
<p>Para añadir estos campos sobre una entidad, ejecutaremos los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc geo field --controller ~.web.OwnerController --field location
web mvc geo field --controller ~.web.OwnerController --field distance
web mvc geo field --controller ~.web.OwnerController --field area</pre>
</div>
</div>
<div class="paragraph">
<p>Después de ejecutar los comandos anteriores, las vistas de creación, actualización y visualización de tus entidades con campos
GEO tendrán el siguiente aspecto:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/CRU_map.png" alt="Mapa vista CRU">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Estos componentes visuales no son obligatorios para gestionar la información geográfica de una entidad. En caso de no añadirlos,
se podrá gestionar la información geográfica mediante entrada de texto en formato <a href="https://en.wikipedia.org/wiki/Well-known_text">WKT</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="paso-6-generar-geoportal"><a class="anchor" href="#paso-6-generar-geoportal"></a>3.7. Paso 6: Generar Geoportal</h3>
<div class="paragraph">
<p>En este momento puedes añadir todos los geoportales que quieras en tu proyecto. Para ello, ejecuta los siguientes comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc geo controller --class ~.web.MapViewerController --preferredMapping mapview --projection EPSG4326
web mvc geo controller --class ~.web.MapController --preferredMapping map</pre>
</div>
</div>
<div class="paragraph">
<p>Los comandos anteriores generan distintos geoportales en nuestra aplicación y una entrada de menú distinta para cada uno de ellos.
El primer Geoportal está configurado para utilizar la proyección <strong>EPSG4326</strong>. En el segundo caso no se ha especificado la proyección
a utilizar, por lo que se utilizará la proyección por defecto <strong>EPSG3857</strong>.</p>
</div>
<div class="imageblock" style="text-align: true">
<div class="content">
<img src="images/menu_geoportal.png" alt="Menu GEO">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/simple_map.png" alt="Geoportal">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Si necesitas configurar opciones como nivel de Zoom inicial, punto central inicial, capas base, etc.. tendrás que editar de forma
manual las opciones de la vista <strong>views/{mappath}/show.jspx</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="paso-7-añadir-entidades-al-geoportal"><a class="anchor" href="#paso-7-añadir-entidades-al-geoportal"></a>3.8. Paso 7: Añadir entidades al Geoportal</h3>
<div class="paragraph">
<p>En el <a href="#paso-6-generar-geoportal">punto anterior</a> hemos generado varios geoportales vacios, es decir, sin ninguna información representada
sobre los mismos.</p>
</div>
<div class="paragraph">
<p>En este punto, aprenderemos cómo añadir entidades a los geoportales generados para así representar la información geográfica almacenada
en las mismas.</p>
</div>
<div class="paragraph">
<p>Ejecutamos el siguiente comando para añadir todas las entidades que dispongan de campos de tipo GEO en todos los geoportales generados:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc geo entity all</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Si no quieres que la entidad se añada a todos los geoportales generados, utiliza el parámetro <strong>--map</strong> en el comando anterior indicando
en qué mapa quieres incluir la entidad.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Si has seguido los pasos anteriores, tu aplicación tendrá el siguiente aspecto:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/map_entities.png" alt="Entidades en mapa">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/map_entity_0.png" alt="Entidad representada en el mapa">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/map_entities_1.png" alt="Todos los campos representados">
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-8-añadir-capas-base-al-geoportal"><a class="anchor" href="#paso-8-añadir-capas-base-al-geoportal"></a>3.9. Paso 8: Añadir capas base al Geoportal</h3>
<div class="paragraph">
<p>La herramienta gvNIX también nos permite añadir una serie de capas base en nuestro geoportal generado.</p>
</div>
<div class="paragraph">
<p>Existe más de un tipo de capas base. En este momento, gvNIX permite añadir dos tipos de capas base:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.openstreetmap.org/wiki/Tiles">Tile Layers</a></p>
</li>
<li>
<p><a href="http://wiki.openstreetmap.org/wiki/WMS">WMS Layers</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A continuación añadiremos una capa de tipo Tile en nuestros geoportales generados, en concreto, añadiremos una capa base de satélite del
proveedor de mapas <a href="https://www.here.com/">OVI</a>. Para ello, ejecutamos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc geo tilelayer --name satellit --url "http://maptile.maps.svc.ovi.com/maptiler/maptile/newest/satellite.day/{z}/{x}/{y}/256/png8" --index 1 --opacity 0.5</pre>
</div>
</div>
<div class="paragraph">
<p>Además, también añadiremos una capa base de tipo WMS en nuestros geoportales generados, en concreto, añadiremos una capa base con información
geológica de la provincia de Valencia (España) servida por el <a href="http://www.igme.es/actividadesIGME/lineas/cartoGeo.htm">IGME</a>. Para ello,
ejecutamos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc geo wmslayer --name "geological map of valencia" --url "http://mapas.igme.es/gis/services/Cartografia_Geologica/IGME_GeologicoCValenciana_400/MapServer/WMSServer" --format "image/png" --transparent true --version "1.1.1" --crs EPSG4326 --layers "0,1,2,3"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Al añadir una capa de tipo WMS, es necesario tener en cuenta la proyección en la que se encuentra y en la que está configurada el mapa, ya que
en caso de no coincidir, podría verse desplazada en el mapa o representada de forma incorrecta.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Los comandos anteriores añaden las capas base sobre todos los geoportales generados. Para especificar sobre qué geoportal añadir las capas base
es necesario incluir el parámetro <strong>--map</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="paso-9-añadir-herramientas-al-geoportal"><a class="anchor" href="#paso-9-añadir-herramientas-al-geoportal"></a>3.10. Paso 9: Añadir herramientas al Geoportal</h3>
<div class="paragraph">
<p>Por defecto, al generar un geoportal utilizando la herramienta de desarrollo gvNIX, podrás ver que aparece una barra de herramientas
en la esquina inferior derecha. En esta barra de herramientas solo aparece una herramienta de tipo "desplazar", representada con el icono
de una mano.</p>
</div>
<div class="paragraph">
<p>Gracias a esta herramienta, podemos desplazarnos por el mapa generado. Sin embargo, existen varias herramientas más que gvNIX permite
añadir en los geoportales generados:</p>
</div>
<div class="sect3">
<h4 id="herramienta-de-medición"><a class="anchor" href="#herramienta-de-medición"></a>3.10.1. Herramienta de medición</h4>
<div class="paragraph">
<p>Esta herramienta permite medir distancias entre varios puntos dentro del mapa.</p>
</div>
<div class="paragraph">
<p>Para añadir esta herramienta en todas las vistas del mapa, ejecutaremos el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc geo tool measure --name measure</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="herramienta-personalizable"><a class="anchor" href="#herramienta-personalizable"></a>3.10.2. Herramienta personalizable</h4>
<div class="paragraph">
<p>Debido a la gran variedad de herramientas que podían existir en un componente mapa, gvNIX provee una herramienta
personalizable, en la que el desarrollador implementa su funcionalidad, así como el icono que mostrará.</p>
</div>
<div class="paragraph">
<p>Para incluir esta herramienta personalizable en el geoportal generado, ejecutaremos el siguiete comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web mvc geo tool custom --name latlng --icon fa-location-arrow --activateFunction activateLatLngTool --deactivateFunction deactivateLatLngTool --iconLibrary fa</pre>
</div>
</div>
<div class="paragraph">
<p>Al añadir esta herramienta utilizando el comando anterior, indicamos las funciones javascript que utilizará al
activar y desactivar la herramienta.</p>
</div>
<div class="paragraph">
<p>Así, el desarrollador deberá personalizar estas funciones javascript para añadir la funcionalidad deseada a la herramienta, tal y como
se muestra a continuación:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>function activateLatLngTool(element, instance, map){
 map.on("click", function(e){
 alert(e.latlng);
 });
}
function deactivateLatLngTool(element, instance, map){
 map.off("click");
}</pre>
</div>
</div>
<div class="paragraph">
<p>Al finalizar los pasos anteriores, aparecerán los siguientes elementos en nuestra barra de herramientas del geoportal:</p>
</div>
<div class="imageblock" style="text-align: true">
<div class="content">
<img src="images/toolbar_geo.png" alt="Toolbar">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Los comandos anteriores añaden las herramientas sobre todos los geoportales generados. Para especificar sobre qué geoportal añadir
las herramientas es necesario incluir el parámetro <strong>--map</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paso-10-funcionalidades-avanzadas"><a class="anchor" href="#paso-10-funcionalidades-avanzadas"></a>3.11. Paso 10: Funcionalidades avanzadas</h3>
<div class="paragraph">
<p>En este momento, ya dispones de una aplicación completa con componentes GEO generada utilizando la herramienta de desarrollo
gvNIX! Pero.. ¿Qué me ofrece esta aplicación GEO?</p>
</div>
<div class="paragraph">
<p>En este capitulo te dejamos una serie de funcionalidades avanzadas que pueden interesarte.</p>
</div>
<div class="sect3">
<h4 id="filtrar-datos-utilizando-datatables"><a class="anchor" href="#filtrar-datos-utilizando-datatables"></a>3.11.1. Filtrar Datos utilizando Datatables</h4>
<div class="paragraph">
<p>Por defecto, todas las entidades que añades a los geoportales generados pueden ser filtradas. Sabemos que una capa de entidad
se puede filtrar si aparece el siguiente icono en el panel de capas (<a href="https://en.wikipedia.org/wiki/Table_of_contents">TOC</a>)</p>
</div>
<div class="imageblock" style="text-align: true">
<div class="content">
<img src="images/filter_icon.png" alt="Icono de filtro">
</div>
</div>
<div class="paragraph">
<p>Para realizar el filtrado de datos se utiliza el componente Datatables, el cual actualiza la vista de mapa aplicando los mismos filtros
que al listado, tal y como se ve en el siguiente ejemplo:</p>
</div>
<div class="paragraph">
<p>En este geoportal, visualizamos todos los registros de la entidad Owner:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/filter_0.png" alt="Filtrado de capas">
</div>
</div>
<div class="paragraph">
<p>A continuación, filtramos el Datatable para que solo aparezca un propietario en el listado. Como vemos en la imágen, el filtro se aplica
al Datatable y el mapa se refresca de forma automática:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/filter_1.png" alt="Aplicado el filtro">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Para modificar el tipo de filtrado de una entidad representada en los geoportales, modifica el atributo <strong>filterType</strong> de la vista
<em>src/main/webapp/WEB-INF/views/{mappath}/show.jspx</em>. Si especificas el valor <em>auto</em> en dicha propiedad, al filtrar los datos utilizando
el componente Datatable, el mapa se actualizará de forma automática. Si por el contrario, estableces la propiedad a <em>manual</em> habrá que actualizar
los datos refrescando la página de forma manual. Si estableces la propiedad a <em>none</em>, desactivarás la funcionalidad de filtrado para dicha
capa de entidad.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="selección-de-datos-utilizando-datatables"><a class="anchor" href="#selección-de-datos-utilizando-datatables"></a>3.11.2. Selección de Datos utilizando Datatables</h4>
<div class="paragraph">
<p>Otra funcionalidad interesante es la selección de registros utilizando el componente Datatables. Al igual que en el filtrado, se seleccionarán
aquellos registros que estén seleccionados en el listado Datatables, tal y como se muestra en la siguiente imágen:</p>
</div>
<div class="imageblock" style="text-align: true">
<div class="content">
<img src="images/selection_map.png" alt="Seleccion en mapa">
</div>
</div>
<div class="paragraph">
<p>Esta funcionalidad es compatible con el filtrado, por lo que se puede filtrar el componente Datatables y seleccionar un registro al mismo tiempo.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Por defecto, el elemento seleccionado se mostrará en color azul. Puedes modificar el estilo de la selección editando el atributo
<em>selection</em> de la capa de entidad.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="agrupación-de-elementos-en-geoportal"><a class="anchor" href="#agrupación-de-elementos-en-geoportal"></a>3.11.3. Agrupación de elementos en Geoportal</h4>
<div class="paragraph">
<p>Otra funcionalidad que ofrecen los geoportales generados utilizando la herramienta de desarrollo gvNIX, es la agrupación de componentes
dependiendo del nivel de zoom.</p>
</div>
<div class="paragraph">
<p>Si se representan varios elementos en un espacio muy reducido, cuando el usuario haga zoom para alejar la vista, estos elementos se agruparán
evitando asi problemas de rendimiento tal y como se ve en la siguiente imágen:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grouped_markers.png" alt="Agrupación">
</div>
</div>
<div class="paragraph">
<p>Si hacemos click sobre uno de los grupos, el mapa se desplazará hasta el nivel mínimo de Zoom en el que se pueden representar los elementos.</p>
</div>
</div>
</div>
</div>
</div>
<h1 id="ii-gvnix-add-ons" class="sect0"><a class="anchor" href="#ii-gvnix-add-ons"></a>II. gvNIX Add-Ons</h1>
<div class="sect1">
<h2 id="add-on-web-menu"><a class="anchor" href="#add-on-web-menu"></a>1. Add-on Web Menu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sistema de gestión del menú web</p>
</div>
<div class="sect3">
<h4 id="descripción"><a class="anchor" href="#descripción"></a>1.1. Descripción</h4>
<div class="paragraph">
<p>Este Add-on instala un nuevo sistema de gestión del menú web de la
aplicación sobre la que se está trabajando para facilitar la
organización de su estructura de páginas y grupos.</p>
</div>
<div class="paragraph">
<p>Las principales características de este sistema son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Modelo de datos del menú separado de su formato de visualización.</dt>
<dd>
<p>El modelo de datos del menú no está ubicado en la misma página que lo
visualiza como ocurre en el modelo de menú que se proporciona por
defecto. El modelo del menú estará definido en un archivo XML
independiente.</p>
</dd>
<dt class="hdlist1">Múltiples niveles en el menú</dt>
<dd>
<p>Soporte para crear elementos jerarquizados con múltiples niveles.
Permite añadir, mover y anidar en varios niveles los elementos del
menú.</p>
</dd>
<dt class="hdlist1">Gestión de elementos desde consola</dt>
<dd>
<p>Permite añadir, quitar, mover, actualizar, definir permisos, ocultar,
definir enlaces, etc. para cada uno de los elementos del menú desde la
consola del framework.</p>
</dd>
<dt class="hdlist1">Integración con Spring Security</dt>
<dd>
<p>Si está instalado el sistema de seguridad, se puede establecer que
ciertos elementos del menú no sean visibles si el usuario no está
entre los roles permitidos para ello.</p>
</dd>
<dt class="hdlist1">Gestiona las peticiones de Roo</dt>
<dd>
<p>Aunque el sistema de gestión del menú es distinto al que se
proporciona por defecto, este nuevo sistema también gestiona las
peticiones de generación de elementos del menú realizadas por el resto
de comandos. Es decir, si se encuentra instalada la nueva gestión del
menú y cualquier otro comando solicita crear o actualizar un elemento
del menú, la solicitud se realizará correctamente utilizando el nuevo
sistema de gestión.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="definiciones"><a class="anchor" href="#definiciones"></a>1.2. Definiciones</h4>
<div class="paragraph">
<p>Antes de continuar explicando las funcionalidades del add-on es
interesante tener clara las siguientes definiciones de los elementos que
conforman un menú.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Página</dt>
<dd>
<p>Representación de una URL. El destino puede ser interno o externo. Los
destinos internos apuntan dentro de la propia aplicación mediante una
ruta relativa, por ejemplo <em>/entity1s/entity1?id=1</em>. Los enlaces
externos apuntan a cualquier dirección web mediante una ruta absoluta,
por ejemplo <em><a href="https://www.cit.gva.es" class="bare">https://www.cit.gva.es</a></em>.</p>
</dd>
<dt class="hdlist1">Grupo</dt>
<dd>
<p>Contenedor de páginas. El contenido de un grupo puede ser también
otros grupos. También puede tener asociado una URL pero con las mismas
restricciones que la página.</p>
</dd>
<dt class="hdlist1">Menú</dt>
<dd>
<p>Estructura en árbol de páginas y grupos.</p>
</dd>
<dt class="hdlist1">Ítem del menú</dt>
<dd>
<p>Un elemento del menú que puede ser una página o un grupo.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="instalación-de-la-gestión-del-menú"><a class="anchor" href="#instalación-de-la-gestión-del-menú"></a>1.3. Instalación de la gestión del menú</h4>
<div class="paragraph">
<p>El uso del sistema de gestión del menú aportado por esta herramienta es
opcional. Por ello, para instalarlo y activarlo es necesario ejecutar en
primer lugar el comando <a href="#_menu_setup"><code>menu setup</code></a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Component org.springframework.roo.addon.web.mvc.jsp.menu.MenuOperationsImpl disabled

Created SRC_MAIN_WEBAPP/WEB-INF/views/menu.xml
Updated SRC_MAIN_WEBAPP/WEB-INF/views/menu.xml
Created SRC_MAIN_JAVA/org/gvnix/test/web/menu
Created SRC_MAIN_JAVA/org/gvnix/test/web/menu/MenuItem.java
Created SRC_MAIN_JAVA/org/gvnix/test/web/menu/Menu.java
Created SRC_MAIN_JAVA/org/gvnix/test/web/menu/MenuLoader.java
Created SRC_MAIN_JAVA/org/gvnix/test/web/menu/ContextMenuStrategy.java
Created SRC_MAIN_JAVA/org/gvnix/test/web/menu/BaseURLContextMenuStrategy.java
Created SRC_MAIN_JAVA/org/gvnix/test/web/menu/URLBrothersContextMenuStrategy.java
Created SRC_MAIN_JAVA/org/gvnix/test/web/menu/URLChildrenContextMenuStrategy.java
Created SRC_MAIN_WEBAPP/WEB-INF/tags/menu/gvnixmenu.tagx
Created SRC_MAIN_WEBAPP/WEB-INF/tags/menu/gvnixitem.tagx
Updated SRC_MAIN_WEBAPP/WEB-INF/views/menu.jspx
Updated ROOT/pom.xml [added property 'gvnix.version' = 'X.Y.Z']</pre>
</div>
</div>
<div class="paragraph">
<p>Este comando añadirá los siguientes elementos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clases que representan el modelo de datos del menú. Cada una de
estas clases estarán anotadas con <strong>@GvNIXMenu</strong> para poder ser
identificadas. Estas clases se crearán en el subpaquete <code>web.menu</code>.</p>
</li>
<li>
<p>Una Clase para la carga del menú y hacerlo disponible para su
pintado en la vista. Esta clase se creará en el subpaquete <code>web.menu</code>.</p>
</li>
<li>
<p>Archivo XML para almacenar el modelo de datos del menú, rellenado
previamente con la información del menú de Roo que existiese en ese
momento. Por defecto se creará en <code>WEB-INF/views/menu.xml</code>.</p>
</li>
<li>
<p><em>Tagx</em> necesarios para el pintado del menú, almacenados en
<code>WEB-INF/tags/menu</code>.</p>
</li>
<li>
<p>Una nueva página jspx de la gestión del menú en la que se utilizan
los <em>tagx</em> de pintado del menú, creada en <code>WEB-INF/views/menu.jspx</code>.</p>
</li>
<li>
<p>Clases para el uso de los menús contextuales. Estas clases se
crearán en el subpaquete <code>web.menu</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Para más información sobre el comando ver <a href="#_menu_setup"><code>menu setup</code></a> en el
<a href="#_comandos_del_add_on_web_menu">apéndice de comandos de este
add-on</a>.</p>
</div>
<div class="paragraph">
<p>El nombre del fichero XML que contiene el modelo de datos del menú se
toma de la constante <code>MENU_CONFIG_FILE</code> de la clase anotada como
@GvNIXMenuLoader.</p>
</div>
</div>
<div class="sect3">
<h4 id="modificación-del-menú"><a class="anchor" href="#modificación-del-menú"></a>1.4. Modificación del menú.</h4>
<div class="paragraph">
<p>Para hacer cambios en el menú se deben utilizar los comandos disponibles
en la consola, que serán accesibles después de haber instalado la nueva
gestión del menú.</p>
</div>
<div class="paragraph">
<p>Para mas información sobre los comandos ver el
<a href="#_comandos_del_add_on_web_menu">apéndice de comandos de este
add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="futuras-versiones"><a class="anchor" href="#futuras-versiones"></a>1.5. Futuras versiones</h4>
<div class="paragraph">
<p>Mejoras a incluir en futuras versiones del add-on.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>El modelo de datos del menú actualmente se define en un archivo XML y
en un futuro podrá estar almacenada en la base de datos.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-jpa"><a class="anchor" href="#add-on-jpa"></a>2. Add-on JPA</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add-on de utilidades enfocadas a la persistencia y consulta de las
entidades.</p>
</div>
<div class="paragraph">
<p>Este add-on incluye las siguientes funcionalidades:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Servicios de persistencia de entidades en bloque.</p>
</li>
<li>
<p>Registro de información adicional para búsquedas por relaciones.</p>
</li>
<li>
<p>Auditoría y registro de histórico de cambios de las endidades.</p>
</li>
<li>
<p>Persistencia de entidades con campos de tipo geográfico.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para poder utilizar estas funcionalidades hay que ejecutar previamente
el comando <a href="#_jpa_gvnix_setup">'jpa gvnix setup'</a>.</p>
</div>
<div class="sect3">
<h4 id="servicios-persistencia-en-bloque"><a class="anchor" href="#servicios-persistencia-en-bloque"></a>2.1. Servicios persistencia en bloque</h4>
<div class="paragraph">
<p>Esta funcionalidad permite generar <em>servicios</em> que permiten realizar
operaciones de creación, actualización y eliminación de múltiples
instancias de una entidad en una sola petición y de forma transaccional.</p>
</div>
<div class="paragraph">
<p>Estos <em>servicios</em> se generan como un <em>bean</em> de Spring, de forma que,
para utilizarlos, solo es necesario declararlos como propiedad en la
clase que los requiera y serán inyectados en el momento de la
construcción de la instancia por Spring.</p>
</div>
<div class="paragraph">
<p>Un ejemplo de este servicio generado sería este:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>package com.springsource.petclinic.domain;
import org.gvnix.addon.jpa.batch.GvNIXJpaBatch;
import org.springframework.stereotype.Service;

@Service
@GvNIXJpaBatch(entity = Owner.class)
public class OwnerBatchService {
}</pre>
</div>
</div>
<div class="paragraph">
<p>En el correspondiente fichero <code>OwnerBatchService_Roo_GvNIXJpaBatch.aj</code>
se generarán los siguientes métodos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">deleteAll()</dt>
<dd>
<p>Elimina todos los registro de la entidad.</p>
</dd>
<dt class="hdlist1">deleteIn(List&lt;Long&gt; ids)</dt>
<dd>
<p>Elimina los registro de la entidad cuyos indentificadores se
encuentren en la lista <em>ids</em>.</p>
</dd>
<dt class="hdlist1">deleteNotIn(List&lt;Long&gt; ids)</dt>
<dd>
<p>Elimina los registro de la entidad cuyos indentificadores <em>no</em> se
encuentren en la lista <em>ids</em>.</p>
</dd>
<dt class="hdlist1">create(List&lt;Owner&gt; owners)</dt>
<dd>
<p>Persiste como nuevos todos los elementos de la lista <em>owners</em>.</p>
</dd>
<dt class="hdlist1">update(List&lt;Owner&gt; owners)</dt>
<dd>
<p>Persiste todos los elementos de la lista <em>owners</em>.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Si algún elemento de la lista no tiene establecido su
campo de clave primaria o su campo de control de concurrencia (este
último sólo si está definido) el registro <em>se guardará como registro
 nuevo</em>.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">findByValues(Map&lt;String,Object&gt; propertyValues)</dt>
<dd>
<p>Devuelve una lista de elemento cuyas propiedades coincidan (se usa el
operador <em>igual a</em>) con <em>todos</em> valores recibidos en <em>propertyValues</em>.</p>
</dd>
<dt class="hdlist1">deleteByValues(Map&lt;String,Object&gt; propertyValues)</dt>
<dd>
<p>Elimina todos elementos cuyas propiedades coincidan (se usa el
operador <em>igual a</em>) con <em>todos</em> valores recibidos en <em>propertyValues</em>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Para poder usar este servicio en cualquier clase solo es necesario
declarar una propiedad con la anotación <em>@Autowire</em>. Spring se
encarga de inyectar una instancia del servicio en la propiedad. Este
sería un ejemplo de la declaración para usarlo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class MyClass {

    @Autowire
    private OwnerBatchService ownerBatch;</pre>
</div>
</div>
<div class="paragraph">
<p>Todas las operaciones generadas (excepto <em>findByValues</em>) son
<em>transaccionales</em>. Por lo que, si se produce un error en cualquier
elemento afectado, <em>la operación entera</em> será abortada (no se guardarán
los cambios)</p>
</div>
<div class="paragraph">
<p>Esta funcionalidad es requerida por otros add-ons como
<a href="#_add_on_web_mvc_datatables">Web Mvc datatables</a> para poder realizar
operaciones sobre múltiples registros a la vez.</p>
</div>
<div class="paragraph">
<p>Para generar estos servicios se pueden utilizar los siguientes comandos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_jpa_batch_add">'jpa batch add'</a></dt>
<dd>
<p>Genera el servicio para una entidad.</p>
</dd>
<dt class="hdlist1"><a href="#_jpa_batch_all">'jpa batch all'</a></dt>
<dd>
<p>Genera el servicio para todas las entidades de la aplicación.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="información-adicional-para-búsquedas-por-relaciones"><a class="anchor" href="#información-adicional-para-búsquedas-por-relaciones"></a>2.2. Información adicional para búsquedas por relaciones</h4>
<div class="paragraph">
<p>Esta funcionalidad permite definir información adicional sobre las
propiedades de la entidad que declaran una relación que permiten
realizar búsquedas y ordenaciones sobre ella.</p>
</div>
<div class="paragraph">
<p>Esta información se utiliza actualmente para permitir realizar búsquedas
de texto dentro de entidades relacionadas y su ordenación cuando se usa
el <a href="#_comandos_del_add_on_web_mvc_datatables">add-on web mvc
datatables</a>.</p>
</div>
<div class="paragraph">
<p>No tiene implementado ningún comando. Funciona añadiendo la anotación
<em>GvNIXJpaQuery</em> a la propiedad. Por ejemplo, para permitir que, desde el
listado de <em>Pet</em>, sea posible buscar por el nombre y apellido de su
<em>Owner</em> y cuando se ordene por su columna se utilicen los mismos campos,
deberíamos añadir la siguiente anotación:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>....
public class Pet {
    ....
    ....

    @GvNIXJpaQuery(filterBy={"lastName","firstName"}, orderBy={"lastName","firstName"})
    @ManyToOne
    private Owner owner;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="auditoría-y-resgistro-de-cambios-de-entidades"><a class="anchor" href="#auditoría-y-resgistro-de-cambios-de-entidades"></a>2.3. Auditoría y resgistro de cambios de entidades</h4>
<div class="paragraph">
<p>Esta funcionalidad añade soporte para hacer auditoría (registrar quíen y
cuándo se crea o modifica un resigtro) de entidades y, opcionalmente,
registrar cada uno de los cambios de las modificaciones sufridas por los
registros de la entidad.</p>
</div>
<div class="sect4">
<h5 id="configurar-detalles-de-usuario"><a class="anchor" href="#configurar-detalles-de-usuario"></a>2.3.1. Configurar detalles de usuario</h5>
<div class="paragraph">
<p>Es posible configurar la clase que proveerá el nombre de usuario que
realiza un cambio. Para ello se ejecuta el siguiente comando:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_jpa_audit_setup">'jpa audit setup'</a></dt>
<dd>
<p>Configura la auditoría de historico creando la clase que proveerá del
nombre de usuario que realiza el cambio. Sólo se puede ejecutar una
vez.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="auditoría-básica-de-entidades"><a class="anchor" href="#auditoría-básica-de-entidades"></a>2.3.2. Auditoría básica de entidades</h5>
<div class="paragraph">
<p>Para añadir la auditoría a las entidades se pueden utilizar los
siguientes comandos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_jpa_audit_add">'jpa audit add'</a></dt>
<dd>
<p>Añade auditoría para una entidad.</p>
</dd>
<dt class="hdlist1"><a href="#_jpa_audit_all">'jpa audit all'</a></dt>
<dd>
<p>Añade auditoría para todas las entidades de la aplicación.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Al instalar la auditoría en un proyecto gvNIX se creará una clase (con
el nombre facilitado en el parámetro <em>--service</em>) anotada con
<em>@GvNIXJpaAuditUserService</em>, se incluirá el siguiente método (en su
correspondiente fichero <em>.aj</em>) para obtener los datos del Usuario:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">getUser()</dt>
<dd>
<p>Devolverá el tipo facilitado en el parámetro <em>--userType</em>. En caso de
no definir ninguno, devolverá un tipo <em>String</em></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Al activar al auditoría sobre una entidad, que serán marcadas con la
anotación <em>GvNIXJpaAudit</em>, se le incluirán las siguientes propiedades
(en su correspondiente fichero <em>.aj</em>) para almacenar los datos de
auditoría:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">auditCreation</dt>
<dd>
<p>Fecha de creación del elemento.</p>
</dd>
<dt class="hdlist1">auditCreatedBy</dt>
<dd>
<p>Usuario que creó el elemento.</p>
</dd>
<dt class="hdlist1">auditLastUpdate</dt>
<dd>
<p>Fecha de la última modificación del elemento.</p>
</dd>
<dt class="hdlist1">auditLastUpdatedBy</dt>
<dd>
<p>Último usuario que modificó el elemento.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Hay que tener en cuenta que este add-on no provee lógica de pintado,
pero estas propiedades serán añadidas de forma automática a las
correspondientes vistas si se han generado, o se generan, utilizando las
funcionalidades de generación automática.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En las vistas generadas de forma automática para la creación y
actualización de elementos puede ser interesante realizar cambios de
forma manual para que estos campos no sean rellenados o modificado por
el usuario.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Para evitar la pérdida de los datos de creación, en las vistas generadas
de forma automática para la actualización
incluir los datos de auditoría como campos ocultos en el formulario
. Si no se incluyen estos campos en las peticiones puede perderse sus
valores en el proceso de
binding
de los objetos recibidos</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Es muy importante no utilizar
actualizaciones/eliminaciones del estilo
em.createQuery("UPDATE Country SET population = 0, area = 0");
ya que los cambios aplicados no serán registrados por la auditoría.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Para mantener esta información acutalizada se genera un clase, anotada
con <em>GvNIXJpaAuditListener</em>, que será registrada como <em>EntityListener</em>
de la librería <em>JPA</em>. Una instancia de esta clase será llamada cada vez
que un elemento de la entidad sea creado/modificado.</p>
</div>
<div class="paragraph">
<p>Esta clase tendrá implementados los siguientes métodos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">onCreate</dt>
<dd>
<p>Método llamado antes de la creación de un registro. Rellena todos los
campos de auditoría de la entidad (creación y actualización).</p>
</dd>
<dt class="hdlist1">onUpdate</dt>
<dd>
<p>Método antes de la actualización de un registro. Rellena los campos de
auditoría correspondientes a la última actualización.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Este método sólo será llamado después de un merge si el registro
 a sufrido modificaciones en sus datos.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Las clases <em>EntityListener</em> requeridas por esta funcionalidad se
registran de forma automática en el fichero <code>src/main/resources/orm.xml</code>
del proyecto.</p>
</div>
</div>
<div class="sect4">
<h5 id="auditoría-y-registro-de-cambios-de-entidades"><a class="anchor" href="#auditoría-y-registro-de-cambios-de-entidades"></a>2.3.3. Auditoría y registro de cambios de entidades</h5>
<div class="paragraph">
<p>Esta funcionalidad almacena todos los cambios sufridos por las entidades
auditadas de forma que sea posible identificar qué, quién y cuándo se
produjeron. Esto incluye las eliminaciones de los registros. Esta
funcionalidad sólo se aplica a aquellas entidades marcadas con la
anotación <em>GvNIXJpaAudit</em> (ver <a href="#_auditoría_básica_de_entidades">Auditoría
básica de entidades</a>)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En caso de
actualizar
o
eliminar
registros mediante el uso de
executeQuery
no se almacenarán los cambios sufridos por las entidades auditadas. Esto
se debe a que no se dispararán los
listeners
necesarios para llevar a cabo este proceso.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ya que esta funcionalidad puede implementarse de distinta forma, incluso
dependiendo de la implementación de JPA que se esté utilizando en el
proyecto, para empezar a utilizarla es necesario seleccionar un
<em>proveedor</em>. Esto proveedores deben de estar instalados como add-on en
el framework.</p>
</div>
<div class="paragraph">
<p>Para seleccionar el proveedor de registro de cambios se debe utilizar el
siguiente comando:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_jpa_audit_revisionlog">'jpa audit revisionLog'</a></dt>
<dd>
<p>Selecciona el proveedor de registro de cambios a usar.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Al activar el proveedor, se instalarán las librerías requeridas y se
creará una clase que representará el registro índice de cambios en la
aplicación. Esta clase será anotada con <em>GvNIXJpaAuditRevisionEntity</em>
sus métodos y propiedades serán generados por el proveedor.</p>
</div>
<div class="paragraph">
<p>Para aquellas entidades anotadas con <em>GvNIXJpaAudit</em> y cuyo valor
<em>storeRevisionLog</em> sea el adecuado (<em>YES</em> o <em>PROVIDER_DEFAULT/null</em> y la
opción por defecto del proveedor sea activar el registro) se generarán
en el <em>.aj</em> los siguientes métodos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>findAll_Entidad</em></dt>
<dd>
<p>Devuelve la lista de todos elementos de la entidad, al estado en el
que estuviesen en una fecha en concreto o en un número revisión.</p>
</dd>
<dt class="hdlist1"><em>find_Entidad</em></dt>
<dd>
<p>Devuelve una entidad por código en el estado que estuviese en un fecha
en concreto o en un número de revisión</p>
</dd>
<dt class="hdlist1"><em>get_Entidad_Revisions</em></dt>
<dd>
<p>Devuelve una lista de <em>elementos de revisión</em> de la entidad entre
fechas o números de revisión para un elemento en concreto, pudiendo
especificar números de registros a devolver.</p>
</dd>
<dt class="hdlist1"><em>getRevisionNumberForDate</em></dt>
<dd>
<p>Devuelve el identificador de revisión activo a una fecha.</p>
</dd>
<dt class="hdlist1"><em>find_Entidad_RevisionsByDates</em></dt>
<dd>
<p>Devuelve una lista de <em>elementos de revisión</em> de la entidad entre
fechas, pudiendo especificar filtros, ordenación y números de
registros a devolver.</p>
</dd>
<dt class="hdlist1"><em>find_Entidad_Revisions</em></dt>
<dd>
<p>Devuelve una lista de <em>elementos de revisión</em> de la entidad entre
números de revisión, pudiendo especificar filtros, ordenación y
números de registros a devolver.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Varios de los métodos arriba descritos devuelven <em>elementos de
revisión</em>. Este elemento es una clase declarada para añadir información
adicional a la entidad sobre los cambios producidos en una revisión del
elemento de la entidad. Esta clase se generará en el fichero <em>.aj</em> de la
entidad y tendrá los siguientes métodos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">getItem</dt>
<dd>
<p>Devuelve el objeto en el estado (valores de sus datos) en una
revisión.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Para el registro de cambios de eliminación, el estado devuelto por
este método será el estado anterior a la eliminación (los valores
antes que tenía el elemento cuando fue eliminado).</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">getRevisionNumber</dt>
<dd>
<p>Devuelve el identificador de la revisión.</p>
</dd>
<dt class="hdlist1">getRevisionUserName</dt>
<dd>
<p>Devuelve el nombre del usuario que realizó los cambios registrados.</p>
</dd>
<dt class="hdlist1">getRevisionDate</dt>
<dd>
<p>Devuelve la fecha en el que se registraron los cambios.</p>
</dd>
<dt class="hdlist1">isCreate</dt>
<dd>
<p>Informa si tipo de cambio registrado en este elemento es una
<em>creación</em>.</p>
</dd>
<dt class="hdlist1">isUpdate</dt>
<dd>
<p>Informa si tipo de cambio registrado en este elemento es una
<em>actualización</em>.</p>
</dd>
<dt class="hdlist1">isDelete</dt>
<dd>
<p>Informa si tipo de cambio registrado en este elemento es una
<em>eliminación</em>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Para estos casos, el estado devuelto por el método
getItem() será el estado anterior a la eliminación (los valores antes que tenía
el elemento cuando fue eliminado).</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">getType</dt>
<dd>
<p>Devuelve una cadena que representa el tipo de cambio del registro:
<em>CREATE</em>, <em>UPDATE</em> o <em>DELETE</em>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Además de lo métodos aquí descritos, cada proveedor puede incluir
métodos necesario para dar soporte a su funcionalidad.</p>
</div>
</div>
<div class="sect4">
<h5 id="proveedor-de-registro-de-cambios-hibernate-envers"><a class="anchor" href="#proveedor-de-registro-de-cambios-hibernate-envers"></a>2.3.4. Proveedor de registro de cambios Hibernate Envers</h5>
<div class="paragraph">
<p>Esta implementación de provee la funcionalidad de gestión de revisiones
basada en el el módulo de la implementación de JPA
<a href="http://docs.jboss.org/hibernate/orm/4.2/devguide/en-US/html/index.html">Hibernate</a>
denominado
<a href="http://docs.jboss.org/hibernate/orm/4.2/devguide/en-US/html/ch15.html">Envers</a>.</p>
</div>
<div class="paragraph">
<p>Para seleccionar este proveedor hay que ejecutar el comando:
<code>jpa audit revisionLog --provider H-ENVERS</code></p>
</div>
<div class="paragraph">
<p>Lógicamente, al ser un módulo de <em>Hibernate</em>, este proveedor de gestión
de revisiones <em>sólo estará disponible en aquellos proyectos cuyo
proveedor de persistencia sea Hibernate</em>.</p>
</div>
<div class="paragraph">
<p>Las características de este proveedor son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mantiene el estado de relaciones (siempre que ambas entidades estén
gestionadas).</p>
</li>
<li>
<p>Los estados se mantienen en tablas adjuntas a las auditadas.</p>
</li>
<li>
<p>Soporta búsquedas en el histórico utilizando su propio API. Esto tiene
la limitación de únicamente poder filtrar sobre los datos de la entidad
principal de la búsqueda (en la implementación actual, aunque en la
documentación comentan que en un futuro habrá soporte para filtrar por
las relaciones).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>En los proyectos en los que <em>Spring Security</em> sea el proveedor de
seguridad, el proveedor ya genera el código necesario, en la clase
<em>RevisionEntity</em> para obtener el usuario que está realizando el cambio.
Para el resto, será necesario realizar un <em>push-in</em> de la clase
<em>RevisionLogEntityListener</em> y ajustar la implementación del método
<em>newRevision</em>.</p>
</div>
<div class="paragraph">
<p>Para acceder a la API de lectura de <em>Envers</em> se genera un método
estático en las entidad con el soporte establecido llamado
<em>auditReader</em>. Para ver mas información sobre el uso de
<em>AuditEntityReader</em> ver la documentación de el JavaDoc de la clase o la
documentación del módulo <em>Envers</em>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="persistencia-de-entidades-con-campos-de-tipo-geográfico"><a class="anchor" href="#persistencia-de-entidades-con-campos-de-tipo-geográfico"></a>2.4. Persistencia de entidades con campos de tipo geográfico</h4>
<div class="paragraph">
<p>Esta funcionalidad permite guardar entidades con campos de tipo
geográfico.</p>
</div>
<div class="sect4">
<h5 id="configuración-del-proyecto-para-soporte-geográfico"><a class="anchor" href="#configuración-del-proyecto-para-soporte-geográfico"></a>2.4.1. Configuración del proyecto para soporte geográfico</h5>
<div class="paragraph">
<p>Para poder guardar entidades con campos de tipo GEO es necesario
configurar el proyecto generado. Para ello se ejecuta el siguiente
comando:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_jpa_geo_setup">'jpa geo setup'</a></dt>
<dd>
<p>Configura el proyecto para poder guardar entidades con campos de tipo
geográfico. Este comando solo funcionará si se ha instalado
persistencia en el proyecto con proveedor <em>HIBERNATE</em> y se ha
seleccionado una de las siguientes bases de datos:</p>
<div class="ulist">
<ul>
<li>
<p>POSTGRES</p>
</li>
<li>
<p>MYSQL</p>
</li>
<li>
<p>ORACLE</p>
</li>
<li>
<p>MSSQL</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="añadir-campos-de-tipo-geográfico-a-entidades"><a class="anchor" href="#añadir-campos-de-tipo-geográfico-a-entidades"></a>2.4.2. Añadir campos de tipo geográfico a entidades</h5>
<div class="paragraph">
<p>Una vez configurado el proyecto para poder guardar entidades con campos
de tipo geográfico, ya es posible añadir campos de tipo geográfico a las
entidades. Para poder añadir estos nuevos tipos de campo, es necesario
ejecutar este comando:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_field_geo">'field geo'</a></dt>
<dd>
<p>Añade un nuevo campo de tipo GEO a la entidad seleccionada. Los nuevos
campos añadidos pueden ser de los siguientes tipos:</p>
<div class="ulist">
<ul>
<li>
<p>POINT (Se guarda un único punto en la base de datos)</p>
</li>
<li>
<p>LINESTRING (Se guardan una serie de puntos que forman una linea
continua)</p>
</li>
<li>
<p>MULTILINESTRING (Se guardan una serie de puntos que forman varias
lineas continuas)</p>
</li>
<li>
<p>POLYGON (Se guardan una serie de puntos que forman un polígono.
Siempre empieza y acaba en el mismo punto.)</p>
</li>
<li>
<p>GEOMETRY (Se guarda una serie de puntos que forman una geometría.
Acepta cualquiera de las geometrías anteriores.)</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="implementación-de-buscadores-para-campos-geo"><a class="anchor" href="#implementación-de-buscadores-para-campos-geo"></a>2.4.3. Implementación de buscadores para campos GEO</h5>
<div class="paragraph">
<p>Para poder realizar búsquedas sobre campos de tipo GEO es necesario
generar una serie de métodos. Para ello se ejecutan los siguientes
comandos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_finder_geo_all">'finder geo all'</a></dt>
<dd>
<p>Genera los buscadores de todos los campos de tipo GEO de <em>todas</em> las
entidades registradas en el proyecto.</p>
</dd>
<dt class="hdlist1"><a href="#_finder_geo_add">'finder geo add'</a></dt>
<dd>
<p>Genera los buscadores de todos los campos de tipo GEO para la entidad
seleccionada.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-monitoring"><a class="anchor" href="#add-on-monitoring"></a>3. Add-on Monitoring</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Uso del componente <a href="https://code.google.com/p/javamelody/">Java Melody</a>
como sistema de monitorización para aplicaciones web.</p>
</div>
<div class="sect3">
<h4 id="descripción-2"><a class="anchor" href="#descripción-2"></a>3.1. Descripción</h4>
<div class="paragraph">
<p>Este Add-on genera una nueva página desde donde podemos ver lo que
consume la generación y ejecución de vistas, consultas, scripts y demás
elementos que se generan y componen nuestra aplicación web.</p>
</div>
</div>
<div class="sect3">
<h4 id="instalación-de-la-monitorización"><a class="anchor" href="#instalación-de-la-monitorización"></a>3.2. Instalación de la monitorización</h4>
<div class="paragraph">
<p>Para instalarlo, hay que utilizar el comando
<a href="#_monitoring_setup">monitoring
setup</a>, el cual instalará todo lo necesario para el funcionamiento
básico de la monitorización de nuestra aplicación. Se encargará de las
dependencias y de modificar los ficheros de configuración necesarios
para el funcionamiento de la monitorizacion de JSP, SQL, consultas, etc.</p>
</div>
</div>
<div class="sect3">
<h4 id="monitorizando-a-través-de-spring"><a class="anchor" href="#monitorizando-a-través-de-spring"></a>3.3. Monitorizando a través de Spring</h4>
<div class="paragraph">
<p>Para monitorizar a través de las llamadas de Spring, tendremos que
configurar que métodos deseamos monitorizar, para ello utilizaremos
alguno de los siguientes comandos, siempre después de haber instalado el
add-on:
<a href="#_monitoring_all">monitoring all</a>,
<a href="#_monitoring_add_class">monitoring
add class</a>,
<a href="#_monitoring_add_method">monitoring
add method</a> o <a href="#_monitoring_add_package">monitoring
add package</a>. Al ejecutar estos comandos se añadiran anotaciones que nos
permitirán acceder a las llamadas que se ejecuten a los metodos
monitorizados y ver sus interacciones.</p>
</div>
</div>
<div class="sect3">
<h4 id="accediendo-a-la-monitorización"><a class="anchor" href="#accediendo-a-la-monitorización"></a>3.4. Accediendo a la monitorización</h4>
<div class="paragraph">
<p>Una vez todo configurado y con nuestra aplicación en marcha, bastará
pulsar en la entrada de menú que se ha generado para su acceso, en caso
de haberla desactivado, bastará con acceder a la dirección principal de
nuestra aplicación, seguida de "/monitoring".</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-web-mvc"><a class="anchor" href="#add-on-web-mvc"></a>4. Add-on Web MVC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add-on de utilidades para la capa Web de tipo Spring MVC.</p>
</div>
<div class="paragraph">
<p>Este add-on incluye dos funcionalidades:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Interfaz Web para operaciones de persistencia de entidades en bloque.</p>
</li>
<li>
<p>Visualización de vistas usando jQuery como librería de JavaScript.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="interfaz-para-operaciones-de-persistencia-en-bloque"><a class="anchor" href="#interfaz-para-operaciones-de-persistencia-en-bloque"></a>4.1. Interfaz para operaciones de persistencia en bloque</h4>
<div class="paragraph">
<p>Esta funcionalidad añade el interfaz web a un controlador para poder
recibir peticiones de creación, actualización y eliminación de registros
de una entidad en bloque.</p>
</div>
<div class="paragraph">
<p>Actualmente se utiliza para dar soporte a las operaciones de
modificación múltiple que el <a href="#_add_on_web_mvc_datatables">add-on web
mvc datatables</a>.</p>
</div>
<div class="paragraph">
<p>Los método añadidos por esta funcionalidad se apoyan en las operaciones
de persistencia en bloque generadas por el <a href="#_servicios_persistencia_en_bloque">'add-on jpa'</a>
proporciona. Por ello,
sólo se podrá añadir sobre controladores cuya entidad relacionada tenga
generado este servicio.</p>
</div>
<div class="paragraph">
<p>Para generar estos métodos se pueden utilizar los siguientes comandos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_web_mvc_batch_setup">'web mvc batch setup'</a></dt>
<dd>
<p>Instala las dependencias y ajusta la configuración.</p>
</dd>
<dt class="hdlist1"><a href="#_web_mvc_batch_add">'web mvc batch add'</a></dt>
<dd>
<p>Genera los métodos en un controlador.</p>
</dd>
<dt class="hdlist1"><a href="#_web_mvc_batch_all">'web mvc batch all'</a></dt>
<dd>
<p>Genera los métodos para todos los controladores.</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="métodos-de-creación-y-actualización"><a class="anchor" href="#métodos-de-creación-y-actualización"></a>4.1.1. Métodos de creación y actualización</h5>
<div class="paragraph">
<p>Los métodos de actualización y creación reciben una <em>Array</em> de elementos
en formato <a href="http://es.wikipedia.org/wiki/JSON">JSON</a>.</p>
</div>
<div class="paragraph">
<p>Como resultado generan un objeto <em>JsonResponse</em> (también en formato
JSON) con el resultado de la operación.</p>
</div>
<div class="paragraph">
<p>El <em>JsonResponse</em> se compone de las siguientes propiedades:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">status</dt>
<dd>
<p>Resultado de la operación: <em>SUCCESS</em> o <em>ERROR</em></p>
</dd>
<dt class="hdlist1">exceptionMessage</dt>
<dd>
<p>Mensaje de error (si lo hay) encontrado al ejecutar la operación.</p>
</dd>
<dt class="hdlist1">bindingResult</dt>
<dd>
<p>Errores encontrados en la carga y/o validación de los datos recibidos.</p>
<div class="paragraph">
<p>El formato de este objeto en JSON es como el siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> {
    OBJECT_INDEX : { FIELD1_NAME : FIELD_ERROR_MSG, FIELD2_NAME : FIELD_ERROR_MSG, ...},
    OBJECT_INDEX2 : { FIELD1_NAME : FIELD_ERROR_MSG,
      FIELD_OBJECT_NAME : { SUBOBJECT_FIELD: FIELD_ERROR_MSG, ... }
      FIELD_LIST_NAME: {
         OBJECT_FIELD_ITEM_INDEX : {ITEM_LIST_FIELD: FIELD_ERROR_MSG, ... },
         OBJECT_FIELD_ITEM_INDEX2 : {ITEM_LIST_FIELD: FIELD_ERROR_MSG, ... },
      },
      ...
    },
    ...
 }</pre>
</div>
</div>
</dd>
<dt class="hdlist1">value</dt>
<dd>
<p>Objetos persistidos o recibidos.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="método-de-eliminación"><a class="anchor" href="#método-de-eliminación"></a>4.1.2. Método de eliminación</h5>
<div class="paragraph">
<p>El método de eliminación recibe los siguientes parámetros:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">{entidad}</dt>
<dd>
<p>Valores de las propiedades usado como <em>filtro base</em> de la operación de
borrado completo.</p>
</dd>
<dt class="hdlist1">all</dt>
<dd>
<p>Si recibe un <em>true</em> elimina todos los elementos que cumplan el <em>filtro
base</em>. Si no se ha recibido <em>filtro base borrará todos los elementos.</em>
Los parámetros relativos a borrado por identificadores serán
ignorados.</p>
</dd>
<dt class="hdlist1">idList[]</dt>
<dd>
<p>Lista de identificadores de elementos a tener en cuenta para el
borrado.</p>
</dd>
<dt class="hdlist1">deleteIn</dt>
<dd>
<p>Si recibe un <em>true</em> cuyo identificador se encuentra en <em>idList[]</em>. De
lo contrario elimina los elementos cuyo identificado <em>no se encuentra
en idList[]</em>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Como resultado, el método devuelve: el número de elementos eliminados</p>
</div>
<div class="paragraph">
<p>Si se produce un error en la eliminación el método devuelve un estado
<em>INTERNAL_SERVER_ERROR(500)</em> y el mensaje de error.</p>
</div>
</div>
<div class="sect4">
<h5 id="carga-de-datos-en-formato-json"><a class="anchor" href="#carga-de-datos-en-formato-json"></a>4.1.3. Carga de datos en formato JSON</h5>
<div class="paragraph">
<p>Debido a que las operaciones de creación y actualización reciben los
datos en formato <a href="http://es.wikipedia.org/wiki/JSON">JSON</a> y Spring no
tiene soporte todavía para cargar objetos en este formato usando el
<em>conversionService</em> (ver
<a href="https://jira.springsource.org/browse/SPR-6731">tarea en el JIRA de
Spring</a>). Mientras tanto, esta funcionalidad incluye una librería propia
que añade un <em>MappingHandlerAdapter</em> que es capaz de hacerlo. Además,
este objeto realizar la validación y rellenar un <em>BindingResult</em> con los
resultados de la carga.</p>
</div>
<div class="paragraph">
<p>El <em>Jackson2RequestMappingHandlerAdapter</em> se configura en el fichero
<code>webmvc-config.xml</code> y se encarga de gestionar todas las peticiones cuyo
@RequestMapping esté configurado con</p>
</div>
<div class="listingblock">
<div class="content">
<pre>consumes = "application/json"</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="visualización-con-jquery"><a class="anchor" href="#visualización-con-jquery"></a>4.2. Visualización con jQuery</h4>
<div class="paragraph">
<p>Esta funcionalidad permite modificar la visualización de las vista para
que utilice la librería <em>jQuery</em> en vez de la estándar <em>jQuery</em>.</p>
</div>
<div class="paragraph">
<p>Las opciones de este add-on <em>no son compatibles</em> con el
<a href="#_add_on_web_screen_patterns">add-on Web Screen Patterns</a>.</p>
</div>
<div class="paragraph">
<p>Para poder utilizar el <em>list</em> generado por el
<a href="#_add_on_web_mvc_datatables">add-on web mvc datatables</a>
es necesario que la vista esté convertida a jQuery (ya que el componente
dataTables que se utiliza está creado en base a esta librería).</p>
</div>
<div class="paragraph">
<p>Los artefactos que se instalan son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ficheros <code>.js</code> de la librería <em>jQuery</em> y <em>jQueryUI</em> además de otros
plugins, como <em>jQuery.validate</em>, necesarios para reemplazar todas las
funcionalidades disponibles de base en las vistas.</p>
</li>
<li>
<p>Ficheros <code>.tagx</code> con la nueva implementación de pintado de los
componentes.</p>
</li>
<li>
<p>Ficheros de estilos e imágenes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para utilizar esta funcionalidad dispone de los siguientes comandos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_web_mvc_jquery_setup">'web mvc jquery setup'</a></dt>
<dd>
<p>Instala los artefactos necesarios.</p>
</dd>
<dt class="hdlist1"><a href="#_web_mvc_jquery_add">'web mvc jquery add'</a></dt>
<dd>
<p>Convierte las vista de un controlador a jQuery.</p>
</dd>
<dt class="hdlist1"><a href="#_web_mvc_jquery_all">'web mvc jquery all'</a></dt>
<dd>
<p>Convierte todas las vistas a jQuery.</p>
</dd>
<dt class="hdlist1"><a href="#_web_mvc_jquery_update_tags">'web mvc jquery update tags'</a></dt>
<dd>
<p>Actualiza los artefactos requeridos por jQuery. Util para actualizar
un proyecto a una nueva versión de gvNIX.</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="conversión-de-las-vistas-a-jquery"><a class="anchor" href="#conversión-de-las-vistas-a-jquery"></a>4.2.1. Conversión de las vistas a jQuery</h5>
<div class="paragraph">
<p>En el proceso de conversión consta de la correspondiente anotación en el
controlador @GvNIXWebJQuery y la actualización de las rutas a los
<code>.tagx</code> en sus ficheros <code>.jspx</code>.</p>
</div>
<div class="paragraph">
<p>Los <code>.tagx</code> se han creado para que sean compatibles con los originales,
por lo que, en principio, no será necesario modificar las páginas
<code>.jspx</code> generadas de forma estándar por los comandos de ROO.</p>
</div>
<div class="paragraph">
<p>Si se han añadido nuevos <code>.tagx</code> personalizados al proyecto basados en
<em>DOJO</em>, es posible que tengan que ser replicados usando la nueva
librería.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-bootstrap"><a class="anchor" href="#add-on-bootstrap"></a>5. Add-on Bootstrap</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Implementación de <a href="http://getbootstrap.com/">Bootstrap 3</a> en el proyecto
gvNIX.</p>
</div>
<div class="sect3">
<h4 id="descripción-3"><a class="anchor" href="#descripción-3"></a>5.1. Descripción</h4>
<div class="paragraph">
<p>Este add-on permite configurar el proyecto gvNIX con la estructura HTML
necesaria para implementar Bootstrap 3. Además, incluye todos los
recursos necesarios para modificar la apariencia de la aplicación por
una por defecto basada en Bootstrap 3.</p>
</div>
</div>
<div class="sect3">
<h4 id="instalación-de-bootstrap-3"><a class="anchor" href="#instalación-de-bootstrap-3"></a>5.2. Instalación de Bootstrap 3</h4>
<div class="paragraph">
<p>Para instalarlo, hay que utilizar el comando
<a href="#_web_mvc_bootstrap_setup">web mvc bootstrap
setup</a>, el cual solo estará disponible después de instalar el
<a href="#_web_mvc_jquery_setup">add-on JQuery</a> en nuestro proyecto.
Este comando detectará de
forma automática, aquellos addons que ya hayan sido instalados y
modificará sus componentes para una correcta visualización utilizando
Bootstrap. Además, los addons que se instalen después de instalar
Bootstrap tendrán apariencia Bootstrap por defecto.</p>
</div>
</div>
<div class="sect3">
<h4 id="actualización-de-componentes"><a class="anchor" href="#actualización-de-componentes"></a>5.3. Actualización de componentes</h4>
<div class="paragraph">
<p>Para actualizar los componentes instalados de Bootstrap basta con
ejecutar <a href="#_web_mvc_bootstrap_update">web mvc
bootstrap update</a>, el cual solo estará disponible después de haber
instalado Bootstrap.</p>
</div>
</div>
<div class="sect3">
<h4 id="apendice-de-comandos"><a class="anchor" href="#apendice-de-comandos"></a>5.4. Apendice de comandos</h4>
<div class="paragraph">
<p>Para ver con mas detalle el comando que proporciona el add-on consultar
la sección de <a href="#_comandos_del_add_on_web_mvc_bootstrap">comandos
del add-on Bootstrap</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-web-mvc-datatables"><a class="anchor" href="#add-on-web-mvc-datatables"></a>6. Add-on Web MVC Datatables</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Uso del componente <a href="http://datatables.net/">dataTables</a> en las vistas
<em>list</em> de los controladores.</p>
</div>
<div class="sect3">
<h4 id="descripción-4"><a class="anchor" href="#descripción-4"></a>6.1. Descripción</h4>
<div class="paragraph">
<p>Este Add-on reemplaza el widget de lista de las vistas de las entidades
para usar el plugin de <a href="http://jquery.com/">jQuery</a>
<a href="http://datatables.net/">dataTables</a>. Para ello, se usa una adaptación de
la librería de tag JSP
<a href="http://dandelion.github.io/datatables">Dandelion-DataTables</a> que se
integra y adapta a la generación de vistas de Spring Roo.</p>
</div>
<div class="paragraph">
<p>Las opciones de este add-on <em>no son compatibles con el
<a href="#_add_on_web_screen_patterns">add-on Web Screen Patterns</a></em>.</p>
</div>
<div class="paragraph">
<p>Las principales características de este widget son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ordenación de datos por uno o más campos.</dt>
<dd>
<p>La tabla permite al usuario final ordenar los datos, por una o más
columnas, y en el sentido que el desee. Las columnas disponibles para
la ordenación y su sentido son configurables en la página.</p>
</dd>
<dt class="hdlist1">Filtrados por columnas y búsquedas globales</dt>
<dd>
<p>Soporta filtrar los datos mostrados por columna, además de hacer
búsquedas de texto sobre los resultados de los filtros. La
configuración de que filtros están disponibles para el usuario se
pueden configurar en la página. Además, estos filtros por columna
disponen de un asistente para realizar búsquedas dependiendo del tipo
de dato representado en cada una de ellas.</p>
</dd>
<dt class="hdlist1">Paginación de datos ajustable</dt>
<dd>
<p>Los datos, filtrados o sin filtrar, se paginan sin necesidad de
refrescar la página. El tamaño de la página puede ser seleccionado por
el usuario final.</p>
</dd>
<dt class="hdlist1">Acceso a los datos en la misma página o por petición por AJAX</dt>
<dd>
<p>Los datos que alimentan la tabla pueden estar integrados en la página
o usar peticiones AJAX para ir solicitándolos a medida que el usuario
los requiera.</p>
</dd>
<dt class="hdlist1">Soporta múltiples plugins y es extensible</dt>
<dd>
<p>Soporta múltiples plugins como <em>ColReorder</em> (permite al usuario
reordenar las columnas), <em>FixedHeader</em> (que mantiene las cabeceras de
las columnas visibles cuando se desciende por páginas largas), etc.</p>
</dd>
<dt class="hdlist1">Registro de Callbacks en distintos eventos</dt>
<dd>
<p>Soporta registrar funciones JavaScript a ejecutar por el widget
cuando: termina la inicialización, al crear una línea, al pintar el
píe de tabla, etc&#8230;&#8203;</p>
</dd>
<dt class="hdlist1">Visualización en modo Registro</dt>
<dd>
<p>Permite realizar la visualización en modo Registro, es decir,
mostrando un registro por página con sus valores completos.</p>
</dd>
<dt class="hdlist1">Visualización de Detalles</dt>
<dd>
<p>Se puede añadir la visualización de un o varios detalles (listado de
entidades relacionadas), con varios niveles, al marcar o visualizar
(dependiendo del modo de visualización) un elemento de la tabla.</p>
</dd>
<dt class="hdlist1">Actualización en línea</dt>
<dd>
<p>Modo que permite actualizar los elementos de la tabla desde la misma
línea que los está visualizando. Es posible modificar multiples
registro a la vez.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="instalación-del-soporte-para-datatables"><a class="anchor" href="#instalación-del-soporte-para-datatables"></a>6.2. Instalación del soporte para Datatables</h4>
<div class="paragraph">
<p>Esta funcionalidad depende de las librerías de <em>jQuery</em> por lo que, el
primer paso, será instalar las librerías usando el comando
<a href="#_web_mvc_jquery_setup">'web mvc jquery setup'</a>
 si no estuviese ya instalado.</p>
</div>
<div class="paragraph">
<p>Para instalar esta funcionalidad hay que ejecutar el comando
<a href="#_web_mvc_datatables_setup">'web mvc datatables setup'</a>.</p>
</div>
<div class="paragraph">
<p>Este comando añadirá los siguientes elementos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Imágenes y hojas de estilo utilizadas por el widget. Estos ficheros
se instalan en <code>webapp/images/datatables</code> y <code>webapp/styles/datatables</code>
respectivamente.</p>
</li>
<li>
<p>Los archivos javaScript de jQuery.datatables ( tanto en su versión
optimizada como estándar) y algunos plugins para dataTables, creados por
el equipo de gvNIX, para utilizados en las funcionalidades disponibles
(como selección, edición, etc&#8230;&#8203;), en el directorio
<code>webapp/scripts/datatables</code>. Para obtener información de las versiones
de estos ficheros, consultar el fichero <code>README.txt</code> que se instala en
el directorio.</p>
</li>
<li>
<p><code>Tagx</code> necesarios utilizados en las páginas para el pintado del
widget, almacenados en <code>WEB-INF/tags/datatables</code>.</p>
</li>
<li>
<p>Unos fichero de propiedades para diversos aspectos de configuración
en <code>src/main/resources/datatables*.properties</code> y las cadenas de
internacionalización.</p>
</li>
<li>
<p>Actualiza el fichero <code>WEB-INF/tags/util/load-scripts.tagx</code> para que
las páginas puedan localizar los recursos de hojas de estilo y
javaScript requeridos.</p>
</li>
<li>
<p>Algunos ajustes en el fichero <code>WEB-INF/web.xml</code> y
<code>WEB-INF/spring/webmvc-config.xml</code> requeridos para el correcto
funcionamiento de widget.</p>
</li>
<li>
<p>La dependencia a este add-on, librerías de utilidades utilizadas
para la gestión de peticiones de datos y a la librería de tag adaptada.
Esta última tiene como dependencias las dependencias a las librerías de
<a href="http://dandelion.github.io/datatables">Dandelion-DataTables</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Para más información sobre el comando ver
<a href="#_web_mvc_datatables_setup">'web mvc datatables setup'</a>
en el <a href="#_comandos_del_add_on_web_mvc_datatables">apéndice de comandos de
este add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="usar-datatables-en-la-vista-list-de-un-controlador"><a class="anchor" href="#usar-datatables-en-la-vista-list-de-un-controlador"></a>6.3. Usar datatables en la vista "list" de un controlador</h4>
<div class="paragraph">
<p>Para poder utilizar el widget de datatables en el listado es necesario
que esté usando los componentes <em>jQuery</em>. Para ello usar el comando
<a href="#_web_mvc_jquery_add">'web mvc jquery add'</a>
o
<a href="#_web_mvc_jquery_all">'web mvc jquery all'</a>
antes de utilizar este add-on con un controlador.</p>
</div>
<div class="paragraph">
<p>Para utilizar el widget de datatables en el listado de un controlador de
entidad es necesario ejecutar el comando
<a href="#_web_mvc_datatables_add">'web mvc datatables add'</a>.</p>
</div>
<div class="paragraph">
<p>Este comando añade la anotación @GvNIXDatatables al controller para
generar los métodos necesario para gestionar las peticiones que realiza
el widget.</p>
</div>
<div class="paragraph">
<p>Además, actualiza la página <code>list.jspx</code> para cambiar las rutas a los
tagx utilizados para pintar la tabla a los instalados por el add-on en
el directorio <code>WEB-INF/tags/datatables</code>.</p>
</div>
<div class="paragraph">
<p>Este add-on incluye, además, el comando
<a href="#_web_mvc_datatables_all">'web mvc datatables all'</a>
que aplica los cambios a todos los controllers de la aplicación.</p>
</div>
<div class="paragraph">
<p>Para mas información sobre los comandos ver el
<a href="#_comandos_del_add_on_web_mvc_datatables">apéndice de comandos de
este add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="ajustar-la-configuración-del-datatables-de-una-vista"><a class="anchor" href="#ajustar-la-configuración-del-datatables-de-una-vista"></a>6.4. Ajustar la configuración del datatables de una vista</h4>
<div class="paragraph">
<p>Los tags creados para este add-on, que se pueden encontrar en
<code>WEB-INF/tags/datatables</code>, son compatibles con los tags estándar que se
incluyen por defecto, incorporando además las opciones que ofrece la
librería de <a href="http://dandelion.github.io/datatables">Dandelion-DataTables</a>.</p>
</div>
<div class="paragraph">
<p>Las opciones disponibles para los tags se pueden consultar en la
declaración de los propios ficheros de tags, o en
<a href="http://dandelion.github.io/datatables/docs/ref/jsp/">la página de
referencia de Dandelion-DataTables</a>. Algunos de los atributos no están
disponibles debido a la integración con Spring Roo o los algunas
opciones necesarias para la integración de los distintos modos de
visualización preparados.</p>
</div>
<div class="paragraph">
<p>Para personalizar los ajustes de alguna vista, modificar el fichero
<code>list.jspx</code> correspondiente tal y como se realiza con los tags estándar.</p>
</div>
</div>
<div class="sect3">
<h4 id="cambiar-el-modo-de-datos-de-datatables"><a class="anchor" href="#cambiar-el-modo-de-datos-de-datatables"></a>6.5. Cambiar el modo de datos de Datatables</h4>
<div class="paragraph">
<p>Para proveer de datos al widget, se dispone de dos métodos.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>DOM</em> o la carga de datos incrustados en la misma página. Una vez
cargados los datos, el widget se encarga de paginarlos, ordenarlos y
filtrarlos a través de javaScript en la propia página.</p>
</li>
<li>
<p><em>AJAX</em> el widget hace peticiones
<a href="http://es.wikipedia.org/wiki/AJAX">AJAX</a> al servidor para obtener los
datos en base a la paginación, orden y filtro. Luego los muestra
repintando la tabla a través de javaScript en la propia página.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La opción por defecto que instala el add-on es la de AJAX, ya que es más
escalable para volúmenes de datos grandes.</p>
</div>
<div class="paragraph">
<p>El modo de datos del controlador se establece con la opción <code>--ajax</code> al
ejecutar el comando
<a href="#_web_mvc_datatables_add">'web mvc datatables add'</a>
o modificar el atributo 'ajax' de la anotación
GvNIXDatatables. gvNIX actualizará el controlador para que el modo sea
accesible tanto en el mismo (para los métodos de peticiones) como en la
página.</p>
</div>
</div>
<div class="sect3">
<h4 id="el-control-de-búsqueda-y-filtros-por-columnas"><a class="anchor" href="#el-control-de-búsqueda-y-filtros-por-columnas"></a>6.6. El control de búsqueda y filtros por columnas</h4>
<div class="paragraph">
<p>Por defecto, la tabla muestra un control de búsqueda que permite filtrar
el contenido visualizado en la tabla. Esta búsqueda se realiza <em>en
formato texto</em>. Es decir, <em>compara el texto de cada valor</em> sea cual sea
su tipo.</p>
</div>
<div class="paragraph">
<p><em>Dependiendo del modo de acceso a datos y del tipo de dato el resultado
de la búsqueda puede ser distinto</em>: Para tablas en modo DOM, la búsqueda
ser realiza sobre el texto que se visualiza en cada celda, mientras que,
en modo AJAX se ejecuta una consulta contra la base de datos.</p>
</div>
<div class="paragraph">
<p>Para las búsquedas en las tablas en modo AJAX hay que tener en cuenta lo
siguiente:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Para los campos de tipo entidad hay que anotar la propiedad de la
relación con la anotación @GvNIXJpaQuery del
<a href="#_información_adicional_para_búsquedas_por_relaciones">add-on jpa</a> para que se pueda construir la
consulta con dichos campos.</p>
</li>
<li>
<p>Es posible buscar por los campos de tipo fecha, pero hay que tener en
cuenta que, <em>la transformación a texto la realiza la base de datos con
su formato predeterminado</em> no por el formato en el que se visualiza.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Los filtros por columna funcionan de la misma forma que la búsqueda,
aplicando las misma reglas explicadas anteriormente, pero sólo con los
datos de dicha columna. Ambas opciones se acumulan para mostrar el
resultado en la tabla.</p>
</div>
<div class="paragraph">
<p>Para activar el filtrado en una columna hay que añadir el parámetro
<code>filterable="true"</code> en la etiqueta table:column correspondiente a la
columna en el fichero <code>list.jspx</code>. Al añadir este filtrado por columna
se añadirán de forma automática un asistente de búsqueda al lado de cada
filtro que permitirá realizar búsquedas avanzadas dependiendo del tipo
de dato representado en cada columna.</p>
</div>
</div>
<div class="sect3">
<h4 id="filtros-simples"><a class="anchor" href="#filtros-simples"></a>6.7. Filtros Simples</h4>
<div class="paragraph">
<p>Los filtros por columna llevan predefinidas unas operaciones dependiendo
del tipo de campo de la columna. Los nombres de estas operaciones son
multidioma y pueden ser configuradas por el desarrollador. Estas
operaciones pueden ser introducidas manualmente o utilizando el
asistente de búsqueda comentado anteriormente. Por defecto se pueden
utilizar las siguientes operaciones:</p>
</div>
<div class="paragraph">
<p><em>Campos de Tipo Texto</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>cadena</em>: Buscará la cadena de texto introducida</p>
</li>
<li>
<p><em>=cadena</em>: Buscará la cadena de texto introducida después del simbolo
igual</p>
</li>
<li>
<p><em>CONTIENE(cadena)</em>: Buscará todos los registros que para esa columna
contengan la cadena de texto introducida</p>
</li>
<li>
<p><em>EMPIEZA(cadena)</em>: Buscará todos los registros que para esa columna
empiecen por la cadena de texto introducida</p>
</li>
<li>
<p><em>TERMINA(cadena)</em>: Buscará todos los registros que para esa columna
terminen por la cadena de texto introducida</p>
</li>
<li>
<p><em>ESVACIO</em>: Buscará todos los registros que para esa columna estén
vacios o sean nulos</p>
</li>
<li>
<p><em>NOESVACIO</em>: Buscará todos los registros que para esa columna no estén
vacios y no sean nulos</p>
</li>
<li>
<p><em>ESNULO</em>: Buscará todos los registros que para esa columna sean nulos</p>
</li>
<li>
<p><em>NONULO</em>: Buscará todos los registros que para esa columna no sean
nulos</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Campos de Tipo Numérico</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>número</em>: Buscará el valor numérico exacto en la columna actual</p>
</li>
<li>
<p><em>=número</em>: Buscará el valor numérico exacto en la columna actual</p>
</li>
<li>
<p><em>&gt;número</em>: Buscará todos los registros cuyo valor sea mayor que el
indicado</p>
</li>
<li>
<p><em>&gt;=número</em>: Buscará todos los registros cuyo valor sea mayor o igual
que el indicado</p>
</li>
<li>
<p><em>&lt;número</em>: Buscará todos los registros cuyo valor sea menor que el
indicado</p>
</li>
<li>
<p><em>&#8656;número</em>: Buscará todos los registros cuyo valor sea menor o igual
que el indicado</p>
</li>
<li>
<p><em>&lt;&gt;número</em>: Buscará todos los registros cuyo valor sea distinto que el
indicado</p>
</li>
<li>
<p><em>!=número</em>: Buscará todos los registros cuyo valor sea distinto que el
indicado</p>
</li>
<li>
<p><em>ENTRENUMERO(n1;n2)</em>: Buscará todos los registros cuyo valor se
encuentre entre el primer número indicado y el segundo</p>
</li>
<li>
<p><em>ESNULO</em>: Buscará todos los registros que para esa columna sean nulos</p>
</li>
<li>
<p><em>NONULO</em>: Buscará todos los registros que para esa columna no sean
nulos</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Campos de Tipo Fecha</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>FECHA(fecha)</em>: Buscará todos los registros con la fecha introducida
para la columna del filtro</p>
</li>
<li>
<p><em>ESANYO(año)</em>: Buscará todos los registros que contengan el año en la
fecha de la columna del filtro</p>
</li>
<li>
<p><em>ESMES(mes)</em>: Buscará todos los registros que contengan el mes en la
fecha de la columna del filtro</p>
</li>
<li>
<p><em>ESDIA(dia)</em>: Buscará todos los registros que contengan el día en la
fecha de la columna del filtro</p>
</li>
<li>
<p><em>ENTREFECHA(fecha1;fecha2)</em>: Buscará todos los registros cuyas fechas
se encuentren entre la primera fecha y la segunda</p>
</li>
<li>
<p><em>ESNULO</em>: Buscará todos los registros que para esa columna sean nulos</p>
</li>
<li>
<p><em>NONULO</em>: Buscará todos los registros que para esa columna no sean
nulos</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Campos de Tipo Boolean</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>VERDADERO</em>: Buscará todos los registros cuyo valor para la columna
sea true</p>
</li>
<li>
<p><em>FALSO</em>: Buscará todos los registros cuyo valor para la columna sea
false</p>
</li>
<li>
<p><em>ESNULO</em>: Buscará todos los registros que para esa columna sean nulos</p>
</li>
<li>
<p><em>NONULO</em>: Buscará todos los registros que para esa columna no sean
nulos</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="modo-visualización-de-registro"><a class="anchor" href="#modo-visualización-de-registro"></a>6.8. Modo visualización de registro</h4>
<div class="paragraph">
<p>Este modo de visualización muestra un registro por cada página para
mostrar mas información sobre cada uno.</p>
</div>
<div class="paragraph">
<p>Para ello, se pinta la vista <em>show</em> del propio registro y se incrusta
dentro de la celda de la tabla.</p>
</div>
<div class="paragraph">
<p>Este modo de visualización sólo permite el
<a href="#_cambiar_el_modo_de_datos_de_datatables">modo de acceso a datos 'AJAX'</a>
y no están soportadas la herramientas de búsqueda, ordenación, filtros y
edición.</p>
</div>
<div class="paragraph">
<p>Para establece este modo de visualización hay que usar el parámetro
<code>--mode show</code> al ejecutar el comando
<a href="#_web_mvc_datatables_add">'web mvc datatables add'</a>.</p>
</div>
<div class="paragraph">
<p>Para vistas que ya transformadas, se pude establecer este modo
modificando los valores de la anotación @GvNIXDatatables y añadirle el
atributo <code>mode = "show"</code>. Comprobar que también esta establecido el
valor <code>ajax = true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="visualización-de-detalles"><a class="anchor" href="#visualización-de-detalles"></a>6.9. Visualización de detalles</h4>
<div class="paragraph">
<p>Este opción permite la visualización de datos relacionados con un
registro al pie de la página. Los datos mostrados se obtendrán a parir
de una propiedad de relación 1:N de la entidad actual. La propiedad debe
tener configurada el valor <code>mappedBy</code> en la anotación @OneToMany</p>
</div>
<div class="paragraph">
<p>Para mostrar los datos del detalle se utilizará la vista <em>list</em> de la
entidad hija, la cual <em>debe de utilizar también una vista dataTable</em>,
usando exactamente la misma configuración de visualización y modo de
datos (pero con sus datos filtrados para mostrar los datos relacionados
con el padre). En la vista de detalle estarán disponibles todas las
opciones disponibles originalmente, incluido si tiene activado la
visualización de detalles.</p>
</div>
<div class="paragraph">
<p>Los registros mostrados en el detalle dependerá del registro actual.
Este dependiendo del modo de visualización se selecciona:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">modo tabular (estándar)</dt>
<dd>
<p>Haciendo <em>doble click</em> sobre la linea deseada. La linea actual se
marcará de un color distinto (por defecto verde) y en caso de disponer
detalles asociados, se desplazará hasta la posición de los mismos para
facilitar su localización.</p>
</dd>
<dt class="hdlist1">modo registro</dt>
<dd>
<p>El detalle muestra los datos para el registro actual (sólo se ve un
registro por página)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Para añadir las visualización del detalle en una vista hay que usar
comando
<a href="#_web_mvc_datatables_details_add">'web mvc datatables details add'</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="eliminación-múltiple"><a class="anchor" href="#eliminación-múltiple"></a>6.10. Eliminación múltiple</h4>
<div class="paragraph">
<p>Las listas soportan eliminación múltiple de líneas. Esta operación se
activa de forma automática cuando el controlador tiene activado las
<a href="#_interfaz_para_operaciones_de_persistencia_en_bloque">operaciones de actualización en bloque</a>.</p>
</div>
<div class="paragraph">
<p>Cuando esta opción está disponible, en la tabla aparecerá una columna de
controles de marcado para permitir la selección de los elemento sobre
los que se quiere actuar. En la cabecera de esta columna se mostrará un
icono que permite la selección de todos los elementos o limpiar la
selección.</p>
</div>
<div class="paragraph">
<p>La opción de <em>seleccionar todo</em> selecciona todos los registros del
listado <em>incluidos los que no se están visualizando en la página
actual</em>. La selección se mantiene con las operaciones de búsqueda,
filtrado y paginación.</p>
</div>
<div class="paragraph">
<p>En la linea de estado se informa del total de registros seleccionados y
cuantos de ellos están en la página actual.</p>
</div>
<div class="paragraph">
<p>Al pulsar sobre el botón elimina de la cabecera de la tabla, se pedirá
confirmación, mostrando el total de registros a eliminar. El botón de
eliminación de la línea sigue funcionando de la forma habitual.</p>
</div>
</div>
<div class="sect3">
<h4 id="edición-en-línea"><a class="anchor" href="#edición-en-línea"></a>6.11. Edición en línea</h4>
<div class="paragraph">
<p>Las listas soportan la edición sobre la misma de líneas de los datos de
la entidad sin necesidad de cambiar de página o recargarla.</p>
</div>
<div class="paragraph">
<p>Esta opción <em>requiere que el controlador tenga activado las
operaciones de actualización en bloque y no está soportado
para el modo de visualización registro</em>.</p>
</div>
<div class="paragraph">
<p>Entrar en modo edición hay que pulsar sobre el botón de editar de dicho
registro o seleccionar los registros deseados en el control de marcado y
pulsar el botón de edición de la cabecera de la tabla.</p>
</div>
<div class="paragraph">
<p>Al activar la edición de un registro, el control solicita al servidor el
contenido de la vista <em>update</em> de la entidad y cambia el contenido de
las columnas de dicha fila por los controles de entrada del formulario
original. Por tanto los ajuste de los controles de actualización se
realizan en un único lugar.</p>
</div>
<div class="paragraph">
<p>Después de entrar en modo edición aparecerán dos botones en la cabecera
de la tabla para guardar los cambios o cancelar la edición. Estas
acciones <em>afectan a todos los registros en edición, se estén
visualizando o no</em>.</p>
</div>
<div class="paragraph">
<p>Durante la edición, las funciones de paginación, filtrado, búsqueda y
ordenación estarán disponibles de la forma habitual, <em>manteniendo los
cambios realizados</em> en los campos de las filas en edición.</p>
</div>
<div class="paragraph">
<p>Para que la actualización funcione correctamente <em>la tabla debe contener
todas las columnas requeridas para la edición del elemento</em>. De no ser
así la actualización de los registros fallará.</p>
</div>
<div class="paragraph">
<p>Al pulsar sobre el botón de guardar, el control recogerá los datos de
las filas en edición y realizará una petición de actualización <em>en
bloque</em>, de forma que <strong>si hay algún problema con algún registro ningún
cambio se persistirá</strong>.</p>
</div>
<div class="paragraph">
<p>Si se encuentra algún problema de validación en algún registro, el
control mantendrá el estado de edición de las lineas, marcando las
lineas afectadas por errores de un color rojizo. Además, mostrará el
mensaje de error generado en el servidor debajo de cada campo afectado.</p>
</div>
<div class="paragraph">
<p>Para activar esta opción hay que usar el parámetro <code>--inline true</code> al
ejecutar el comando
<a href="#_web_mvc_datatables_add">'web mvc datatables add'</a>.</p>
</div>
<div class="paragraph">
<p>Para vistas que ya transformadas, se pude activar la opción modificando
los valores de la anotación @GvNIXDatatables y añadirle el atributo
<code>inlineEditing = true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="registro-creado-en-primera-posición"><a class="anchor" href="#registro-creado-en-primera-posición"></a>6.12. Registro creado en primera posición</h4>
<div class="paragraph">
<p>Al crear un nuevo registro, se colocará automáticamente en la primera
posición del listado sin tener en cuenta los filtros u ordenación del
Datatable.</p>
</div>
<div class="paragraph">
<p>Gracias a esto tendremos siempre visible el registro que se ha editado.</p>
</div>
<div class="paragraph">
<p>Al recargar la página, se ordenará el registro de forma correcta
siguiendo la ordenación y los filtros establecidos en el Datatable.</p>
</div>
<div class="paragraph">
<p>Esta funcionalidad se aplica tanto a Datatables maestros como para
detalles asociados</p>
</div>
</div>
<div class="sect3">
<h4 id="registro-editado-en-primera-posición"><a class="anchor" href="#registro-editado-en-primera-posición"></a>6.13. Registro editado en primera posición</h4>
<div class="paragraph">
<p>Al actualizar un registro, se colocará automáticamente en la primera
posición sin tener en cuenta los filtros u ordenación del Datatable.</p>
</div>
<div class="paragraph">
<p>Gracias a esto tendremos siempre visible el registro que se ha editado.</p>
</div>
<div class="paragraph">
<p>Al recargar la página, se ordenará el registro de forma correcta
siguiendo la ordenación y los filtros establecidos en el Datatable.</p>
</div>
<div class="paragraph">
<p>Esta funcionalidad se aplica tanto a Datatables maestros como para
detalles asociados.</p>
</div>
</div>
<div class="sect3">
<h4 id="registro-seleccionado-siempre-visible"><a class="anchor" href="#registro-seleccionado-siempre-visible"></a>6.14. Registro seleccionado siempre visible</h4>
<div class="paragraph">
<p>Al acceder a una página del listado Datatable que contenga un registro
seleccionado por el usuario, se navegará de forma automática hasta este
registro.</p>
</div>
<div class="paragraph">
<p>Gracias a esto tendremos siempre posicionado en pantalla el registro que
se ha seleccionado.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-web-mvc-geo"><a class="anchor" href="#add-on-web-mvc-geo"></a>7. Add-on Web MVC GEO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Uso del componente <a href="http://leafletjs.com/">Mapa</a> para representar y
posicionar entidades que dispongan de campos de tipo GEO.</p>
</div>
<div class="sect3">
<h4 id="descripción-5"><a class="anchor" href="#descripción-5"></a>7.1. Descripción</h4>
<div class="paragraph">
<p>Este Add-on permite representar en vistas de tipo
<a href="http://leafletjs.com/">Mapa</a>, aquellas entidades que dispongan de
<a href="#_persistencia_de_entidades_con_campos_de_tipo_geográfico">campos de tipo GEO.</a></p>
</div>
<div class="paragraph">
<p>Las principales características de este widget son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Representar entidades en Mapa</dt>
<dd>
<p>Permite representar aquellas entidades que dispongan de campos de tipo
GEO en vistas de tipo Mapa. Se podrán mostrar/ocultar aquellos campos
GEO que se deseen.</p>
</dd>
<dt class="hdlist1">Filtrado de entidades</dt>
<dd>
<p>Soporta filtrar los registros de una entidad representados en el mapa
utilizando el componente 'Datatable'.</p>
</dd>
<dt class="hdlist1">Selección de entidades</dt>
<dd>
<p>Permite seleccionar uno o varios datos representados en la vista de
Mapa utilizando el componente 'Datatable'.</p>
</dd>
<dt class="hdlist1">Representar Capas Base en Mapa</dt>
<dd>
<p>Además de representar entidades en la vista de Mapa, también es
posible representar capas obtenidas desde un servidor de mapas. Es
posible representar capas de tipo "tile" y capas de tipo "WMS".</p>
</dd>
<dt class="hdlist1">Barra de Herramientas</dt>
<dd>
<p>Este componente dispone de una serie de herramientas que pueden ser
añadidas a la vista de mapa. También se pueden añadir herramientas
estándar que el desarrollador puede personalizar para que realicen las
acciones que él desee.</p>
</dd>
<dt class="hdlist1">Personalización de componentes (Markers, Colores, etc&#8230;&#8203;)</dt>
<dd>
<p>Por defecto, la apariencia de las entidades que se representan en el
mapa se generan de forma aleatoria. El desarrollador puede
personalizar el icono, el color del icono, el color del marker o
linea, etc&#8230;&#8203; Si la entidad tiene la opción de ser seleccionada desde
el componente 'Datatable' podrá configurar también, la
apariencia con la que se representará esta entidad al ser
seleccionada. De este mismo modo, se podrá configurar la apariencia de
las herramientas genéricas.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="instalación-del-soporte-para-vista-de-mapa"><a class="anchor" href="#instalación-del-soporte-para-vista-de-mapa"></a>7.2. Instalación del soporte para vista de Mapa</h4>
<div class="paragraph">
<p>Esta funcionalidad depende de las librerías de <em>jQuery</em> por lo que, el
primer paso, será instalar las librerías usando el comando
<a href="#_web_mvc_jquery_setup">'web mvc jquery setup'</a>
si no estuviese ya instalado.</p>
</div>
<div class="paragraph">
<p>Para instalar esta funcionalidad hay que ejecutar el comando
<a href="#_web_mvc_geo_setup">'web mvc geo setup'</a>.</p>
</div>
<div class="paragraph">
<p>Este comando añadirá los siguientes elementos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Imágenes y hojas de estilo utilizadas por el widget. Estos ficheros
se instalan en <code>webapp/images</code> y <code>webapp/styles/leaflet</code>
respectivamente.</p>
</li>
<li>
<p>Los archivos javaScript de leaflet ( tanto en su versión optimizada
como estándar) y algunos plugins para leaflet, creados por el equipo de
gvNIX, para utilizados en las funcionalidades disponibles (como
selección, edición, etc&#8230;&#8203;), en el directorio <em>webapp/scripts/leaflet</em>.</p>
</li>
<li>
<p><code>Tagx</code> necesarios utilizados en las páginas para el pintado del
widged, almacenados en <code>WEB-INF/tags/geo</code>.</p>
</li>
<li>
<p>Actualiza el fichero <code>WEB-INF/tags/util/load-scripts.tagx</code> para que
las páginas puedan localizar los recursos de hojas de estilo y
javaScript requeridos.</p>
</li>
<li>
<p>La dependencia a este add-on y librerías de utilidades utilizadas
para la gestión de peticiones de datos.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Para más información sobre el comando ver
<a href="#_web_mvc_geo_setup">'web mvc geo setup'</a>
en el
<a href="#_comandos_del_add_on_web_mvc_geo">apéndice de comandos de este
add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="generar-vista-de-mapa"><a class="anchor" href="#generar-vista-de-mapa"></a>7.3. Generar vista de Mapa</h4>
<div class="paragraph">
<p>Para poder visualizar una vista de Mapa en nuestro proyecto, es
necesario ejecutar el comando
<a href="#_web_mvc_geo_controller">'web mvc geo controller'</a>.</p>
</div>
<div class="paragraph">
<p>Este comando genera un controlador anotado con @GvNIXMapViewer que será
el encargado de mostrar la vista del mapa que acabamos de crear. Además
se podrá configurar la proyección en la que trabaja el mapa generado.</p>
</div>
<div class="paragraph">
<p>Además, genera la página <code>show.jspx</code> que será la encargada de
representar el mapa y todos sus componentes.</p>
</div>
<div class="paragraph">
<p>Para mas información sobre los comandos ver el
<a href="#_comandos_del_add_on_web_mvc_geo">apéndice de comandos de este
add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="generar-campos-de-mapa-en-vistas-cru"><a class="anchor" href="#generar-campos-de-mapa-en-vistas-cru"></a>7.4. Generar campos de mapa en vistas CRU</h4>
<div class="paragraph">
<p>Por defecto, a la hora de guardar campos de tipo geográfico se utilizará
formato <a href="http://es.wikipedia.org/wiki/Well_Known_Text">WKT</a> que tendrá
que ser introducido de forma manual por el usuario.</p>
</div>
<div class="paragraph">
<p>Sin embargo, este add-on permite transformar estos campos de texto a
componentes de tipo Mapa, gracias a los cuales se facilita la
introducción de datos de tipo GEO en una entidad. Para utilizar estos
tipos de campo, se ejecutará el siguiente comando
<a href="#_web_mvc_geo_field">'web mvc geo field'</a>.</p>
</div>
<div class="paragraph">
<p>Este comando modifica las vistas de <code>create.jspx</code>, <code>update.jspx</code> y
<code>show.jspx</code> de la entidad sobre la que se aplica cambiando los inputs de
los campos seleccionados por componentes de tipo mapa.</p>
</div>
<div class="paragraph">
<p>Para mas información sobre los comandos ver el
<a href="#_comandos_del_add_on_web_mvc_geo">apéndice de comandos de este
add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="añadir-entidades-a-la-vista-de-mapa"><a class="anchor" href="#añadir-entidades-a-la-vista-de-mapa"></a>7.5. Añadir entidades a la vista de Mapa</h4>
<div class="paragraph">
<p>Al generar la vista de mapa se generará una vista vacía con una capa
base por defecto.</p>
</div>
<div class="paragraph">
<p>Para añadir nuevas entidades a la vista de mapa y que sean representadas
sus campos de tipo geográfico, es posible ejecutar los siguientes
comandos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_web_mvc_geo_entity_all">'web mvc geo entity all'</a></dt>
<dd>
<p>Añade todas las entidades con campos de tipo GEO a la vista de mapa</p>
</dd>
<dt class="hdlist1"><a href="#_web_mvc_geo_entity_add">'web mvc geo entity add'</a></dt>
<dd>
<p>Añade la entidad seleccionada a la vista de mapa.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Este comando modifica los controladores de las entidades sobre los que
se aplica el comando añadiendo la anotación @GvNIXWebEntityMapLayer.</p>
</div>
<div class="paragraph">
<p>Al añadirse esta anotación, se añade en la vista <code>show.jspx</code> del mapa la
nueva entidad a representar.</p>
</div>
<div class="paragraph">
<p>Para mas información sobre los comandos ver el
<a href="#_comandos_del_add_on_web_mvc_geo">apéndice de comandos de este
add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="añadir-capas-base-la-vista-de-mapa"><a class="anchor" href="#añadir-capas-base-la-vista-de-mapa"></a>7.6. Añadir Capas Base la vista de Mapa</h4>
<div class="paragraph">
<p>Al generar la vista de mapa se generará una vista vacía con una capa
base por defecto.</p>
</div>
<div class="paragraph">
<p>Para añadir nuevas capas base, es posible ejecutar los siguientes
comandos dependiendo del tipo de Capa Base que queramos crear:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_web_mvc_geo_tilelayer">'web mvc geo tilelayer'</a></dt>
<dd>
<p>Añade una capa base de tipo Tile a la vista del mapa</p>
</dd>
<dt class="hdlist1"><a href="#_web_mvc_geo_wmslayer">'web mvc geo wmslayer'</a></dt>
<dd>
<p>Añade una capa base de tipo WMS a la vista del mapa</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Estos comandos añaden en la vista <code>show.jspx</code> del mapa la nueva capa
base.</p>
</div>
<div class="paragraph">
<p>Para mas información sobre los comandos ver el
<a href="#_comandos_del_add_on_web_mvc_geo">apéndice de comandos de este
add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="generar-nuevas-herramientas-en-la-vista-del-mapa"><a class="anchor" href="#generar-nuevas-herramientas-en-la-vista-del-mapa"></a>7.7. Generar nuevas herramientas en la vista del Mapa</h4>
<div class="paragraph">
<p>Por defecto, la vista de Mapa se genera con una única herramienta que
permite desplazarnos por el mapa.</p>
</div>
<div class="paragraph">
<p>Sin embargo, este add-on permite añadir nuevas herramientas a la vista
de mapa ejecutando los siguientes comandos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_web_mvc_geo_tool_measure">'web mvc geo tool measure'</a></dt>
<dd>
<p>Añade una herramienta de medición a la vista del mapa</p>
</dd>
<dt class="hdlist1"><a href="#_web_mvc_geo_tool_custom">'web mvc geo tool custom'</a></dt>
<dd>
<p>Añade una herramienta personalizada a la vista del mapa</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Este comando añade en la vista <code>show.jspx</code> del mapa la nueva herramienta
a utilizar.</p>
</div>
<div class="paragraph">
<p>Para mas información sobre los comandos ver el
<a href="#_comandos_del_add_on_web_mvc_geo">apéndice de comandos de este
add-on</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-campos-lupa"><a class="anchor" href="#add-on-campos-lupa"></a>8. Add-on Campos Lupa</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Implementación de campos lupa en el proyecto gvNIX.</p>
</div>
<div class="sect3">
<h4 id="descripción-6"><a class="anchor" href="#descripción-6"></a>8.1. Descripción</h4>
<div class="paragraph">
<p>Este add-on permite utilizar componentes de tipo lupa en aplicaciones
gvNIX. Gracias a estos componentes, podemos buscar registros de forma
sencilla de campos relacionados sin tener que visualizar todos los datos
en un desplegable.</p>
</div>
</div>
<div class="sect3">
<h4 id="instalación-del-componente-lupa"><a class="anchor" href="#instalación-del-componente-lupa"></a>8.2. Instalación del componente lupa</h4>
<div class="paragraph">
<p>Para instalarlo, hay que utilizar el comando
<a href="#_web_mvc_loupe_setup">web mvc loupe setup</a>,
el cual solo estará disponible después de instalar el
<a href="#_comandos_del_add_on_web_mvc">add-on
JQuery</a> en nuestro proyecto.</p>
</div>
</div>
<div class="sect3">
<h4 id="permitiendo-a-una-entidad-utilizar-el-campo-lupa"><a class="anchor" href="#permitiendo-a-una-entidad-utilizar-el-campo-lupa"></a>8.3. Permitiendo a una entidad utilizar el campo lupa</h4>
<div class="paragraph">
<p>Una vez instalados todos los componentes, es necesario generar una serie
de métodos para realizar las búsquedas y la visualización de los
resultados. Para que el controlador disponga de estos métodos,
utilizaremos el comando
<a href="#_web_mvc_loupe_set">web mvc loupe set</a> sobre
el controlador seleccionado.</p>
</div>
</div>
<div class="sect3">
<h4 id="utilizando-componentes-lupa"><a class="anchor" href="#utilizando-componentes-lupa"></a>8.4. Utilizando componentes lupa</h4>
<div class="paragraph">
<p>Ahora que el Controlador ya dispone de los métodos necesarios,
ejecutaremos el comando
<a href="#_web_mvc_loupe_field">web mvc loupe field</a>
sobre el field de la entidad a la que pertenece el controlador con los
métodos generados. Una vez ejecutado este comando, transformaremos el
campo indicado a un campo de tipo lupa en la capa web de nuestra
aplicación.</p>
</div>
</div>
<div class="sect3">
<h4 id="actualizando-componentes-lupa"><a class="anchor" href="#actualizando-componentes-lupa"></a>8.5. Actualizando componentes lupa</h4>
<div class="paragraph">
<p>Para mantener actualizados los componentes importados mediante el
comando de instalación, podemos ejecutar el comando
<a href="#_web_mvc_loupe_update">web mvc loupe
update</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="apendice-de-comandos-2"><a class="anchor" href="#apendice-de-comandos-2"></a>8.6. Apendice de comandos</h4>
<div class="paragraph">
<p>Para ver con mas detalle el comando que proporciona el add-on consultar
la sección de <a href="#_comandos_del_add_on_web_mvc_lupa">comandos del
add-on Lupa</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-occ-optimistic-concurrency-control"><a class="anchor" href="#add-on-occ-optimistic-concurrency-control"></a>9. Add-on OCC (Optimistic Concurrency Control)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add-on de utilidades enfocadas a la persistencia de las entidades.</p>
</div>
<div class="paragraph">
<p>Este add-on proporciona un sistema que facilita la detección de
modificaciones concurrentes en la persistencia de entidades del modelo
de datos.</p>
</div>
<div class="paragraph">
<p>El sistema consiste en un control de <em>concurrencia optimista</em> basada en
un <em>checkSum o suma de control</em> de los valores de una entidad dada.</p>
</div>
<div class="sect3">
<h4 id="introducción-2"><a class="anchor" href="#introducción-2"></a>9.1. Introducción</h4>
<div class="paragraph">
<p>Esta utilidad añade a las entidades un sistema de <em>control de
concurrencia</em> basado en una operación de <em>checksum o suma de control</em>
sobre todos los campos persistentes que contiene la entidad.</p>
</div>
<div class="paragraph">
<p>El <em>control de concurrencia optimista</em> ya es ofrecido por defecto por el
núcleo de Spring Roo. Sin embargo, el sistema que proporciona se basa en
la existencia de un campo en cada una de las tabla de base de datos que
se desea controlar. Este campo se suele definir como <em>version</em> (numérico
que identifica la versión del objeto) o <em>lastupdate</em> (fecha de la última
actualización). Esto es un problema para aquellas bases de datos ya
existentes y en las que no se puede o no se quiere alterar su
estructura.</p>
</div>
<div class="paragraph">
<p>Esta funcionalidad nace de la necesidad de controlar la concurrencia
sobre modelos de datos heredados en los que no es posible alterar el
modelo relacional de base de datos para añadir los campos de control en
los que se basa el mecanismo de <em>control de concurrencia</em> del núcleo de
Spring Roo que sigue la especificación
<a href="http://jcp.org/aboutJava/communityprocess/final/jsr220/index.html">JPA</a>.</p>
</div>
<div class="paragraph">
<p>El checksum consiste en una operación matemática de los distintos
valores que contiene un registro (instancia) de una entidad. El cálculo
tiene en cuenta todas las propiedad de tipo simple de la entidad, es
decir, no se incluye en el cálculo propiedad que represente una relación
con otro u otros objetos. El cálculo se realiza en el momento de la
carga del registro de la entidad desde la base de datos y es almacenado
en una propiedad no persistente de la misma entidad.</p>
</div>
<div class="paragraph">
<p>En el momento de <em>actualizar o eliminar</em> un registro de dicha entidad se
carga el elemento que está persistido en la base de datos y <em>se compara
el valor de checksum</em> actual con el que se calculó en el momento de la
carga del elemento a actualizar o eliminar. <em>Si no coincide se lanza una
Excepción</em>(<a href="http://docs.oracle.com/javaee/6/docs/api/javax/persistence/OptimisticLockException.html">javax.persistence.OptimisticLockException</a>)
y la operación no se realizará.</p>
</div>
<div class="paragraph">
<p>Esta operación supone un coste adicional en las tareas de persistencia,
pero no es apreciable en condiciones del uso cuotidiano de la aplicación
excepto en procesos de actualizaciones masivas de registros.</p>
</div>
<div class="paragraph">
<p>Para mostrar un mensaje amigable al usuario se puede utilizar el
<a href="#_add_on_web_dialog">Add-on Web Dialog</a> que, en
el <a href="#_excepciones_controladas_por_gvnix">conjunto de
excepciones gestionadas por defecto</a> se incluye esta. Una vez
inicializada la gestión de excepciones es posible personalizar el
mensaje usando el comando
<a href="#_web_mvc_dialog_exception_set_language">web
mvc dialog exception set language</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="añadir-el-control-en-las-entidades"><a class="anchor" href="#añadir-el-control-en-las-entidades"></a>9.2. Añadir el control en las entidades</h4>
<div class="paragraph">
<p>Para activar esta característica sobre una entidad se pueden utilizar
los siguientes comandos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_occ_checksum_set">'occ checksum set'</a></dt>
<dd>
<p>Aplica el control de concurrencia a una entidad.</p>
</dd>
<dt class="hdlist1"><a href="#_occ_checksum_all">'occ checksum all'</a></dt>
<dd>
<p>Aplica el control de concurrencia a todas las entidades de la
aplicación.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Estos comandos añaden a uno o a todos los ficheros <code>.java</code> de las
entidades una anotación @GvNIXEntityOCCChecksum y un campo no
persistente para almacenar el checksum. En base a esta anotación se
generará un <em>aspecto java</em> (fichero <code>*_gvNIX_occChecksum.aj</code>) con toda
la lógica necesaria para calcular el checksum en base a las propiedades
de un registro de la entidad y para controlar antes de una actualización
o borrado si el registro ha cambiado desde que se cargo inicialmente.
Toda esta lógica sera manejada automáticamente por el add-on.</p>
</div>
<div class="paragraph">
<p>Si se aplica el control de concurrencia sobre una entidad que extiende
de otra y en la clase padre existe un campo anotado como campo de
control de persistencia con @javax.persistence.Version, el add-on
detectará esta circunstancia y aplicará el control de concurrencia sobre
la clase padre.</p>
</div>
<div class="paragraph">
<p>Para ver todos los comandos y sus opciones ver el
<a href="#_comandos_del_add_on_occ">apéndice de comandos</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Se ha detectado que al aplicar este control de concurrencia sobre
entidades que tienen generados, o sobre los que se van a generar, tests
de integración (mediante el comando <em>test integration</em> o mediante la
opción <em>--testAutomatically</em> del comando <em>entity jpa</em>) los tests de
integración presentarán un error de compilación. Se debe a que el add-on
que genera los tests de integración no considera el caso en el que el
campo que hace de control de concurrencia sea del tipo cadena. Hay
varias opciones para evitar estos errores de compilación:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No es recomendable, pero se pueden desactivar los tests de los
métodos <em>flush()</em> y <em>merge()</em> (métodos <em>testFlush()</em> y <em>testMerge()</em>).
Para ello hay que editar los archivos
<em>src/test/java/**/*IntegrationTest.java</em> y añadir a la anotación
<em>@RooIntegrationTest</em> los atributos <em>flush = false</em> y <em>merge = false</em>,
de esta manera estos dos tests no se generan en sus aspecto Java
correspondiente quedando la batería de pruebas incompleta pero
compilando correctamente:</p>
<div class="listingblock">
<div class="content">
<pre>@RooIntegrationTest(entity = MiClase.class, )</pre>
</div>
</div>
</li>
<li>
<p>La más recomendable es corregir los dos test mencionados en el punto
anterior. Para ello se debe realizar un <em>pushin</em> de estos dos métodos
que se encuentran declarados en
<em>src/test/java/**/*IntegrationTest_Roo_IntegrationTest.aj</em> y también el
campo &lt;nombre_entidad&gt;DataOnDemand dod, anotado con @Autowired,
llevandolos a la clase Java del test de integración. Una vez los test
están en la clase Java, se pueden corregir los errores de compilación
reemplazando el operador <em>"&gt;"</em> por el método <em>equals</em>. A continuación se
muestra un ejemplo extraido del proyecto de ejemplo petclinic que se
distribuye junto a gvNIX/Roo en el que se han corregido las líneas
marcadas en negrita para los métodos <em>testFlush()</em> y <em>testMerge()</em>.</p>
<div class="listingblock">
<div class="content">
<pre>package com.springsource.petclinic.domain;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.roo.addon.test.RooIntegrationTest;

@RooIntegrationTest(entity = Owner.class)
public class OwnerIntegrationTest {
    @Autowired
    private OwnerDataOnDemand dod;

    @Test
    public void testMarkerMethod() {

    }

    @Test
    public void testFlush() {
        com.springsource.petclinic.domain.Owner obj = dod.getRandomOwner();
        org.junit.Assert.assertNotNull(
                "Data on demand for 'Owner' failed to initialize correctly", obj);
        java.lang.Long id = obj.getId();
        org.junit.Assert.assertNotNull(
                "Data on demand for 'Owner' failed to provide an identifier", id);
        obj = com.springsource.petclinic.domain.Owner.findOwner(id);
        org.junit.Assert.assertNotNull(
                "Find method for 'Owner' illegally returned null for id '"
                + id + "'", obj);
        boolean modified =  dod.modifyOwner(obj);
        java.lang.String currentVersion = obj.getOccChekcsum();
        obj.flush();
        org.junit.Assert.assertTrue(
                "OccCheckSum for 'Owner' failed to modify on flush directive",
                (currentVersion != null &amp;&amp;
                ) ||
                !modified);
    }

    @Test
    public void testMerge() {
        com.springsource.petclinic.domain.Owner obj = dod.getRandomOwner();
        org.junit.Assert.assertNotNull(
                "Data on demand for 'Owner' failed to initialize correctly", obj);
        java.lang.Long id = obj.getId();
        org.junit.Assert.assertNotNull(
                "Data on demand for 'Owner' failed to provide an identifier", id);
        obj = com.springsource.petclinic.domain.Owner.findOwner(id);
        boolean modified =  dod.modifyOwner(obj);
        java.lang.String currentVersion = obj.getOccChekcsum();
        com.springsource.petclinic.domain.Owner merged = (
                com.springsource.petclinic.domain.Owner) obj.merge();
        obj.flush();
        org.junit.Assert.assertEquals(
                "Identifier of merged object not the same as identifier of " +
                        "original object",
                merged.getId(), id);
        org.junit.Assert.assertTrue(
                "OccCheckSum for 'Owner' failed to modify on merge and flush " +
                        "directive",
                (currentVersion != null &amp;&amp;
                )
                || !modified);
    }
}</pre>
</div>
</div>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-web-dialog"><a class="anchor" href="#add-on-web-dialog"></a>10. Add-on Web Dialog</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add-on para la gestión de excepciones no controladas y de mensajes de
usuario.</p>
</div>
<div class="sect3">
<h4 id="descripción-7"><a class="anchor" href="#descripción-7"></a>10.1. Descripción</h4>
<div class="paragraph">
<p>Este add-on permite gestionar las excepciones no controladas en el
código de la aplicación y así mostrar mensajes inteligibles al usuario
en una ventana modal (pop-up) y en el idioma actual de la aplicación sin
necesidad de realizar ningún desarrollo en la capa web.</p>
</div>
<div class="paragraph">
<p>El add-on, al aplicarse sobre un proyecto, por defecto configura ciertas
excepciones que serán visualizadas de forma amigable al usuario en el
caso de no ser gestionadas directamente desde la aplicación. Así mismo,
se pueden incluir nuevas excepciones y modificar los textos amigables
que se mostrarán en lugar de la excepción para cada idioma disponible en
la aplicación.</p>
</div>
<div class="paragraph">
<p>Durante su aplicación se instalan algunas cadenas, tanto en ingles como
en castellano, para mostrar mensajes para los errores de conversión de
datos numéricos y fechas.</p>
</div>
<div class="paragraph">
<p>El add-on también permite mostrar mensajes de usuario sin realizar
ninguna implementación en la capa web mediante la invocación de métodos
desde el controlador que son los encargados de mostrar dichos mensajes
en la pantalla del usuario.</p>
</div>
<div class="paragraph">
<p>Los mensajes de excepción y de usuario se muestran en un diálogo o
ventana modal. Se permite además la modificación de las ventanas modales
de excepción y de mensaje de usuario para que puedan ser personalizadas
de acuerdo a los requerimientos que sean necesarios.</p>
</div>
</div>
<div class="sect3">
<h4 id="instalación"><a class="anchor" href="#instalación"></a>10.2. Instalación</h4>
<div class="paragraph">
<p>Para aplicar esta funcionalidad sobre un proyecto se debe ejecutar en
primer lugar el comando <a href="#_web_mvc_dialog_setup">web mvc
dialog setup</a>. Al hacerlo se incluye el soporte para diálogos modales en
la aplicación.</p>
</div>
<div class="paragraph">
<p>El componente visual <em>message-box.tagx</em> que instala el add-on es el
encargado de mostrar en pantalla un diálogo modal al usuario.</p>
</div>
<div class="paragraph">
<p>Al mismo tiempo, la ejecución de este comando configura una serie de
excepciones que serán mapeadas con sus respectivos diálogos modales y
mensajes amigables en múltiples idiomas. En las siguiente secciones se
verá más detalladamente las excepciones controladas y el uso de los
diálogos modales.</p>
</div>
</div>
<div class="sect3">
<h4 id="excepciones-controladas-por-gvnix"><a class="anchor" href="#excepciones-controladas-por-gvnix"></a>10.3. Excepciones controladas por gvNIX</h4>
<div class="paragraph">
<p>Conjunto de excepciones inicialmente definidas y controladas por gvNIX
al ejecutar el comando <em>web mvc dialog setup</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>java.sql.SQLException.</p>
<div class="paragraph">
<p>Se ha producido un error en el acceso a la base de datos.</p>
</div>
</li>
<li>
<p>java.io.IOException.</p>
<div class="paragraph">
<p>Existen problemas para enviar o recibir datos.</p>
</div>
</li>
<li>
<p>org.springframework.transaction.TransactionException.</p>
<div class="paragraph">
<p>Se ha producido un error en la transacción. No se han guardado los datos
correctamente.</p>
</div>
</li>
<li>
<p>java.lang.UnsupportedOperationException.</p>
<div class="paragraph">
<p>Se ha producido un error no controlado.</p>
</div>
</li>
<li>
<p>javax.persistence.OptimisticLockException.</p>
<div class="paragraph">
<p>No se puede actualizar el registro debido a que ha sido actualizado
previamente.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Las excepciones se muestran mediante un dialogo modal. Para ello, se
modifica la definición, en el archivo webmvc-config.xml, del bean
<em>SimpleMappingExceptionResolver</em> reemplazando la clase que se define por
una propia. La clase propia se encontrará instalada en el proyecto en la
clase <em>MessageMappingExceptionResolver.java</em> del subpaquete
<em>web.servlet.handler</em>. En el subpaquete <em>web.dialog</em> se instala también
la clase <em>Dialog.java</em>, la cual es un bean que representa la información
necesaria para visualizar una excepción en la ventana modal renderizada
por el componente <em>message-box.tagx</em>.</p>
</div>
<div class="sect4">
<h5 id="añadir-nuevas-excepciones-a-la-gestión"><a class="anchor" href="#añadir-nuevas-excepciones-a-la-gestión"></a>10.3.1. Añadir nuevas excepciones a la gestión</h5>
<div class="paragraph">
<p>Pasos a seguir para incluir en la gestión automática de excepciones de
la aplicación una nueva excepción.</p>
</div>
<div class="paragraph">
<p>El Add-on proporciona ciertos comandos que permiten realizar de forma
automática las siguientes operaciones para la gestión de excepciones:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Añadir el control de una excepción a la aplicación:</p>
<div class="ulist">
<ul>
<li>
<p>Define la excepción a capturar en el bean
<em>messageMappingExceptionResolverBean</em> del archivo <em>webmvc-config.xml</em>.</p>
</li>
<li>
<p>Asocia una dirección a la excepcion en un nuevo bean
<em>&lt;mvc:view-controller&gt;</em> en el archivo <em>webmvc-config.xml</em>.</p>
</li>
<li>
<p>Crea la nueva jspx asociada a la excepción.</p>
</li>
<li>
<p>Instancia la jspx creada en el archivo <em>views.xml</em> en el directorio
<em>WEB-INF</em> la aplicación.</p>
</li>
<li>
<p>Crear las etiquetas multi idioma en los ficheros de propiedades de
todos los idiomas que estén instalados en la aplicación.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Mostrar las excepciones gestionadas por la aplicación:</p>
<div class="ulist">
<ul>
<li>
<p>Muestra la lista de excepciones definidas en el bean
<em>messageMappingExceptionResolver</em> del archivo <em>webmvc-config.xml</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Eliminar excepciones controladas por la aplicación:</p>
<div class="ulist">
<ul>
<li>
<p>Elimina del fichero <em>webmvc-config.xml</em> las referencias a la excepción
y por lo tanto la quita de las excepciones gestionadas por la
aplicación.</p>
</li>
<li>
<p>Elimina la página jspx asociada.</p>
</li>
<li>
<p>Elimina las referencias a la excepción en el archivo views.xml.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Para obtener más información sobre estos comandos de gestión de
excepciones consultar el apendice
<a href="#_comandos_del_add_on_web_dialog">Comandos del Add-on Web
Dialog</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="nuevos-diálogos-modales"><a class="anchor" href="#nuevos-diálogos-modales"></a>10.4. Nuevos diálogos modales</h4>
<div class="paragraph">
<p>Estos diálogos son útiles para mostrar mensajes al usuario informando de
cualquier circunstancía tras una operación determinada.</p>
</div>
<div class="paragraph">
<p>Para aplicar esta funcionalidad sobre el proyecto primero se debe haber
ejecutado el comando
<a href="#_web_mvc_dialog_setup">web mvc
dialog setup</a>.</p>
</div>
<div class="paragraph">
<p>El comando
<a href="#_web_mvc_dialog_add">web mvc
dialog add</a> añade la anotación 'GvNIXModalDialogs' en la clase
controladora que se le indica.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>La anotación generará dos métodos asociados con el controlador. Un
método con el nombre <em>modalDialog</em> y otro que tomará como nombre el
valor del parámetro <em>name</em> del comando y una página jspx en
<em>WEB-INF/dialogs</em> con también el mismo nombre.</p>
</div>
<div class="paragraph">
<p>El método <em>modalDialog</em> permite al desarrollador mostrar diálogos
modales genéricos en la parte visual directamente desde el código Java
del controlador. Para ello, el desarrollador proporcionará un título,
una descripción y un tipo de mensaje que será mostrado en la página al
usuario. La signatura del método es:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>modalDialog(DialogType dialogType, String title, String description,
            HttpServletRequest httpServletRequest)</pre>
</div>
</div>
<div class="paragraph">
<p>El segundo método servirá para mostrar un mensaje específico. La
diferencia principal es que este nuevo método tiene su propia página
jspx asociada y además permite proporcionar parámetros adicionales a
dicha página, cosa que no permite el método <em>modalDialog</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>petsdialog(DialogType dialogType, String title, String description,
            HashMap&lt;String, Object&gt; params, HttpServletRequest httpServletRequest)</pre>
</div>
</div>
<div class="paragraph">
<p>Asociado a este método también se habrá creado en <em>WEB-INF/dialogs</em> una
página jspx con el nombre <em>petsdialog.jspx</em> que podrá personalizarse
según las necesidades. El Map <em>params</em> será proporcionado a la página y
por lo tanto el desarrollador puede insertar valores desde el
controlador para utilizarlos en el diálogo.</p>
</div>
<div class="paragraph">
<p>Los parámetros de cada uno de los dos métodos anteriores definen la
siguiente información:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">dialogType</dt>
<dd>
<p>es un tipo enumerado que puede tomar como valores: Error, Info, Alert,
Suggest. Cada uno define un nivel de severidad en el diálogo y
producirá en el aspecto visual del diálogo que aparezca con distinto
color e icono.</p>
</dd>
<dt class="hdlist1">title</dt>
<dd>
<p>es el código del recurso i18n que se usará como título del diálogo
modal.</p>
</dd>
<dt class="hdlist1">description</dt>
<dd>
<p>es el código del recurso i18n que se usará como descripción del
diálogo modal.</p>
</dd>
<dt class="hdlist1">params</dt>
<dd>
<p>es un Map que se puede utilizar para proporcionar tantos parámetros
como sea necesario al componente visual del diálogo modal para
confeccionarlo y mostrar en él cualquier información necesaria.</p>
</dd>
<dt class="hdlist1">httpServletRequest</dt>
<dd>
<p>este parámetro se usa internamente en el método para obtener la sesión
del usuario y establecer un atributo que será leido por el componente
message-box.tagx para mostrar el diálogo. Si al invocar el método no
se dispone de este parámetro, se puede obtener añadiendo el parámetro
<em>HttpServletRequest httpServletRequest</em> a los parámetros del método
que contiene la invocación (esta es una característica especial de los
métodos que gestionan las URLs en Spring MVC y que permite declarar
distintos parámetros de entre algunos dados).</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="ejemplos-de-dialogos-personalizados"><a class="anchor" href="#ejemplos-de-dialogos-personalizados"></a>10.4.1. Ejemplos de dialogos personalizados</h5>
<div class="paragraph">
<p>Con este nuevo soporte para crear diálogos modales gvNIX ofrece una gran
libertad para maquetar multitud de mensajes de usuario o diálogos de la
aplicación (avisos, errores, mensajes de confirmación, formularios,
etc.).</p>
</div>
<div class="paragraph">
<p>A continuación se muestra una pequeña demostración de implementación de
algunos de estos mensajes personalizados.</p>
</div>
<div class="paragraph">
<div class="title">Mensaje de aviso de aplicación</div>
<p>En ocasiones puede ser necesario que tras una acción (una petición al
servidor) se muestre en la respuesta algún mensaje acerca del resultado
de la operación solicitada o, en el caso de pantallas de búsqueda,
indicar que no se han encontrado resultados.</p>
</div>
<div class="paragraph">
<p>Con el soporte de este add-on se puede incluir la siguiente línea de
código en cualquier punto de un método de un controlador para definir un
mensaje informativo.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>modalDialog(DialogType.Info, "message_info_title", "message_description_key",
                httpServletRequest);</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Mensaje de confirmación</div>
<p>Puede ser necesario que tras una acción, la aplicación deba preguntar si
se desea ir a una página en concreto. A continuación se verán los pasos
y cambios en el código de un controlador para definir este mensaje de
confirmación.</p>
</div>
<div class="paragraph">
<p>En el ejemplo, se va a añadir a la aplicación de ejemplo petclinic un
mensaje de confirmación que consultará al usuario si quiere ir al
formulario de mascotas (Pets) tras actualizar la información de un
propietario (Owner).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Añadir un diálogo modal a la aplicación mediante "<em>web mvc dialog
message add</em>"</p>
<div class="listingblock">
<div class="content">
<pre>web mvc dialog add --class ~.web.OwnerController --name confirmgopets</pre>
</div>
</div>
<div class="paragraph">
<p>Esto generará un método <em>confirmgopets</em> disponible en <em>OwnerController</em>
y una jspx base llamada <em>confirmgopets</em> en <em>WEB-INF/dialogs</em> que será
personalizada.</p>
</div>
</li>
<li>
<p>Modificar el método <em>update</em> de <em>OwnerController</em> para añadir la
llamada al método <em>confirmgopets</em> justo antes de la línea de <em>return</em>.
Para ello se debe llevar el método <em>update</em> desde
<em>OwnerController_Roo_Controller.aj</em> hasta <em>OwnerController.java</em>,
podemos usar la opción push-in que ofrece Eclipse. Una vez movido el
método, será modificado quedando como sigue:</p>
<div class="listingblock">
<div class="content">
<pre>@RequestMapping(method = RequestMethod.PUT, produces = "text/html")
public String update(@Valid Owner owner, BindingResult bindingResult, Model uiModel,
        HttpServletRequest httpServletRequest) {
    if (bindingResult.hasErrors()) {
        populateEditForm(uiModel, owner);
        return "owners/update";
    }
    uiModel.asMap().clear();
    owner.merge();



    return "redirect:/owners/" + encodeUrlPathSegment(owner.getId().toString(),
            httpServletRequest);
}</pre>
</div>
</div>
<div class="paragraph">
<p>Se ha resaltado en negrita la parte específica que ha de modificarse
para mostrar el diálogo modal.</p>
</div>
<div class="paragraph">
<p>El HashMap <em>dialogParams</em> permite proporcionar al componente
message-box.tagx información adicional para mostrarla o utilizarla como
sea necesario. En este caso, es necesario indicar a qué página dirigir
al usuario en caso de que responda afirmativamente a la pregunta de
confirmación, pero se podría definir cualquier tipo de parámetro, desde
un String hasta objetos del Modelo de la aplicación o listas de objetos.</p>
</div>
</li>
<li>
<p>Modificar la jspx que ha creado el add-on (confirmgopets.jspx) para
adecuarla a las necesidades del proyecto:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;div xmlns:c="http://java.sun.com/jsp/jstl/core"
                    xmlns:util="urn:jsptagdir:/WEB-INF/tags/util"
                    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                    xmlns:spring="http://www.springframework.org/tags"
                    xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0"&gt;
  &lt;jsp:directive.page contentType="text/html;charset=UTF-8" /&gt;
  &lt;jsp:output omit-xml-declaration="yes" /&gt;
  &lt;spring:message var="title" code="${titleCode}" text="Message title"
        htmlEscape="false" /&gt;
  &lt;util:panel id="title" title="${title}"&gt;
    &lt;h2&gt;${fn:escapeXml(title)}&lt;/h2&gt;
    &lt;p&gt;
     &lt;spring:message code="${descriptionCode}"
            text="This is the dialog description ..." htmlEscape="false"/&gt;
    &lt;/p&gt;
    &lt;div class="closeMessage"&gt;
     &lt;spring:message var="closeButtonValue" code="button_close"/&gt;
     &lt;button class="boton" dojoType="dijit.form.Button" type="button"
       onClick="dijit.byId('${dialogId}').hide();"&gt;${closeButtonValue}&lt;/button&gt;
      &lt;spring:url value="" var="locationUrl"/&gt;
      &lt;spring:message var="confirmButtonValue" code="confirmButtonValue"/&gt;
      &lt;button class="boton" dojoType="dijit.form.Button" type="button"
        onClick="location.href = '${locationUrl}';"&gt;${confirmButtonValue}&lt;/button&gt;
    &lt;/div&gt;
  &lt;/util:panel&gt;
&lt;/div&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>En este caso se ha resaltado el accesso al HashMap de parámetros del
diálogo (dialogParams) para demostrar el modo en que se debe extraer los
datos que le llegan al diálogo desde el controlador.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Diálogo modal con formulario</div>
<p>En alguna ocasión puede ser necesario mostrar un formulario en un
diálogo modal para solicitar información al usuario, siguiendo el
ejemplo anterior, se debería modificar la jspx que crea el add-on para
incluir un formulario. En este ejemplo, tras crear un nuevo Owner en la
aplicación, se mostrará un formulario para que cree su primera mascota.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Añadir un diálogo modal a la apliacaión mediante "<em>web mvc dialog
message add</em>"</p>
<div class="listingblock">
<div class="content">
<pre>web mvc dialog add --class ~.web.OwnerController --name createPetInModal</pre>
</div>
</div>
<div class="paragraph">
<p>Esto genera un método <em>createPetInModal</em> disponible en <em>OwnerController</em>
y una jspx base llamada <em>createPetInModal</em> en <em>WEB-INF/dialogs</em> que será
personalizada.</p>
</div>
</li>
<li>
<p>Modifica el método create de OwnerController. Al igual que en el
ejemplo anterior debemos hacer el Push-in del método. Lo modificamos
para que quede como se muestra:</p>
<div class="listingblock">
<div class="content">
<pre>@RequestMapping(method = RequestMethod.POST, produces = "text/html")
public String create(@Valid Owner owner, BindingResult bindingResult, Model uiModel,
        HttpServletRequest httpServletRequest) {
    if (bindingResult.hasErrors()) {
        uiModel.addAttribute("owner", owner);
        addDateTimeFormatPatterns(uiModel);
        return "owners/create";
    }
    uiModel.asMap().clear();
    owner.persist();



    return "redirect:/owners/" + encodeUrlPathSegment(owner.getId().toString(),
            httpServletRequest);
}</pre>
</div>
</div>
</li>
<li>
<p>Modificar la jspx incluyendo el formulario de creación de mascotas
(Pets):</p>
<div class="listingblock">
<div class="content">
<pre>&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;div xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:field="urn:jsptagdir:/WEB-INF/tags/form/fields"
        xmlns:form="urn:jsptagdir:/WEB-INF/tags/form"
        xmlns:jsp="http://java.sun.com/JSP/Page"
        xmlns:spring="http://www.springframework.org/tags"
        version="2.0"&gt;
    &lt;jsp:directive.page contentType="text/html;charset=UTF-8"/&gt;
    &lt;jsp:output omit-xml-declaration="yes"/&gt;


    &lt;form:create id="fc_com_springsource_petclinic_domain_Pet" modelAttribute="pet"
            path="/pets" render="${empty dependencies}" z="lgvEyAlAYOudDmaPjwU0ABseTIk="&gt;
        &lt;field:checkbox field="sendReminders"
                id="c_com_springsource_petclinic_domain_Pet_sendReminders"
                z="uPpMX+IWb0KONpvd11fpG8x4/4Q="/&gt;
        &lt;field:input field="name" id="c_com_springsource_petclinic_domain_Pet_name"
                min="1" required="true" z="ZY+k75JeSo9RmejYZRFNIvs2aBg="/&gt;
        &lt;field:input field="weight" id="c_com_springsource_petclinic_domain_Pet_weight"
                min="0" required="true" validationMessageCode="field_invalid_number"
                z="cOD5zE/z7gy+RZu5kVSPuxCa+/I="/&gt;
        &lt;input type="hidden" id="c_com_springsource_petclinic_domain_Pet_owner"
                name="owner" value="${owner.id}" /&gt;
        &lt;field:select field="owner" id="c_com_springsource_petclinic_domain_Pet_owner"
                itemValue="id" items="${owners}" path="/owners" render="false"
                z="fGzswAP4XXvhPhowJKsRVve929c="/&gt;
        &lt;field:select field="type" id="c_com_springsource_petclinic_domain_Pet_type"
                items="${pettypes}" path="pettypes" required="true"
                z="+hDCnUp+Y+A1RlT+AjH07sgipOo="/&gt;
    &lt;/form:create&gt;
    &lt;form:dependency dependencies="${dependencies}"
            id="d_com_springsource_petclinic_domain_Pet" render="${not empty dependencies}"
            z="kThDNIW+69h9nI/69ynY1WyUieo="/&gt;
&lt;/div&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="futuras-versiones-2"><a class="anchor" href="#futuras-versiones-2"></a>10.5. Futuras versiones</h4>
<div class="paragraph">
<p>Mejoras a incluir en futuras versiones del add-on.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Obtención de las excepciones y los mensajes multi idioma de las
excepciones no controladas que deben visualizarse de forma amigable
desde una base de datos en la que se encuentra almacenada dicha
información. Así podría definirse un repositorio central de excepciones
para múltiples aplicaciones y sus mensajes amigables.</p>
</li>
<li>
<p>Envío de un informe por email al responsable de la aplicación con
información detallada cuando se ha producido una excepción.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-web-report"><a class="anchor" href="#add-on-web-report"></a>11. Add-on Web Report</h2>
<div class="sectionbody">
<div class="paragraph">
<p>El add-on añade soporte para la generación de informes con <em>Jasper
Reports</em> y genera informes totalmente funcionales para una entidad que
posteriormente pueden ser personalizados. Los informes son accesibles
desde la interfaz web mediante un formulario que se crea para tal
efecto.</p>
</div>
<div class="paragraph">
<p>En la sección de recetas se puede encontrar información adicional para
realizar el <a href="#_diseño_de_informes_con_sub_informes">diseño de informes con sub
informes</a>.</p>
</div>
<div class="sect3">
<h4 id="descripción-8"><a class="anchor" href="#descripción-8"></a>11.1. Descripción</h4>
<div class="paragraph">
<p>El add-on añade por un lado el soporte necesario para trabajar con
Jasper Reports y por otro es capaz de generar informes asociados con una
entidad cualquiera de la aplicación.</p>
</div>
<div class="paragraph">
<p>Un informe de <em>Jasper Reports</em> se se define principalmente mediante un
archivo de diseño de informe (jrxml). El diseño de informe al procesarse
junto con una fuente de datos, genera un fichero de salida en un formato
determinado incluyendo en él la información existente en la fuente de
datos. La fuente de datos puede provenir de distintos orígenes, aunque
en este caso siempre será una lista de entidades proporcionada
directamente desde la aplicación.</p>
</div>
<div class="paragraph">
<p>El archivo de diseño es un documento XML con un formato determinado que
se puede editar de manera sencilla y gráfica mediante una herramienta
como <a href="http://jasperforge.org/projects/ireport">iReport</a>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/ireport.png" alt="Editor de informes iReport">
</div>
</div>
</div>
<div class="sect3">
<h4 id="instalación-2"><a class="anchor" href="#instalación-2"></a>11.2. Instalación</h4>
<div class="paragraph">
<p>Jasper Reports requiere varias librerías y configuraciones para
funcionar, el add-on incluye en el proyecto las dependencias de la
librería modificando el pom.xml del mismo e incluye varios ficheros de
configuración que se verán a continuación con mas detalle.</p>
</div>
<div class="paragraph">
<p>El comando sólo estará disponible si el proyecto utiliza Spring MVC en
la capa web. Esto es, el archivo de configuración <em>webmvc-config.xml</em>
debe existir en <em>/WEB-INF/spring</em>.</p>
</div>
<div class="paragraph">
<p>Estas operaciones de configuración las realiza el comando del add-on
<a href="#_web_report_setup">web report setup</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    roo&gt;
    Updated SRC_MAIN_WEBAPP/WEB-INF/spring/webmvc-config.xml
    Created SRC_MAIN_WEBAPP/WEB-INF/spring/jasper-views.xml
    Created SRC_MAIN_WEBAPP/WEB-INF/classes/jasperfonts
    Created SRC_MAIN_WEBAPP/WEB-INF/classes/jasperfonts/FreeSans.ttf
    Created SRC_MAIN_WEBAPP/WEB-INF/classes/jasperfonts/FreeSansBold.ttf
    Created SRC_MAIN_WEBAPP/WEB-INF/classes/jasperfonts/FreeSansBoldOblique.ttf
    Created SRC_MAIN_WEBAPP/WEB-INF/classes/jasperfonts/FreeSansOblique.ttf
    Created SRC_MAIN_WEBAPP/WEB-INF/classes/jasperfonts/gvnix_reportfonts.xml
    Updated ROOT/pom.xml [added dependency org.gvnix:org.gvnix.web.report.roo.addon:X.Y.Z;
            added property 'jasperreports.version' = '4.0.1';
            added property 'jasperreportsfonts.version' = '4.0.0';
            added property 'apachepoi.version' = '3.7';
            added dependencies net.sf.jasperreports:jasperreports:${jasperreports.version},
            org.apache.poi:poi:${apachepoi.version},
            net.sf.jasperreports:jasperreports-fonts:${jasperreportsfonts.version}]
    Created SRC_MAIN_WEBAPP/WEB-INF/classes/jasperreports_extension.properties</pre>
</div>
</div>
<div class="paragraph">
<p>El comando configura los siguientes archivos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>pom.xml</em>: añade la dependencia JasperReports, la dependencia Apache
POI para informes en formato Excel y una dependencia con el propio
add-on para así reconocer la anotación <em>@GvNIXReports</em> que se utilizará
en el proyecto.</p>
</li>
<li>
<p><em>webmvc-config.xml</em>: añade un bean para configurar el sitema de vistas
de informes.</p>
</li>
<li>
<p><em>jasper-views.xml</em>: añade una definición de vistas por informe.</p>
</li>
<li>
<p><em>jasperfonts</em>: directorio que contiene fuentes True Type que usará
JasperReports para confeccionar el informe.</p>
</li>
<li>
<p><em>jasperreports_extension.properties</em>: define el lugar donde se
encuentran las fuentes a utilizar.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cada uno de los informes se comporta como una vista más de la aplicación
y por tanto el add-on habrá incluido en el fichero de configuración de
la capa web <em>webmvc-config.xml</em> un componente que para cada petición de
este tipo devolverá el nuevo tipo de salida (un informe). Esto se logra
añadiendo un nuevo <em>bean</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;bean id="jasperReportsXmlViewResolver"
            class="org.springframework.web.servlet.view.XmlViewResolver"
            p:location="/WEB-INF/spring/" p:order="0" /&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Este <em>bean</em> referencia al fichero <em>jasper-views.xml</em> como fichero de
configuración de las nuevas vistas, por tanto el add-on habrá creado
este archivo en <em>src/main/webapp/WEB-INF/spring</em>.</p>
</div>
<div class="paragraph">
<p>Los informes generados pueden contener textos que se deban visualizar
con características especiales tales como negrita y cursiva. Para ello,
Jasper Reports requiere que las fuentes utilizadas para generar el
informe se encuentren en el classpath de la aplicación. Así pues, el
add-on se ocupa de copiar en
<em>src/main/webapp/WEB-INF/classes/jasperfonts</em> varios archivos de fuentes
True Type y su definición para poder hacer uso de ellas en el archivo
<em>gvnix_reportfonts.xml</em>. En el archivo
<em>src/main/webapp/WEB-INF/classes/jasperreports_extension.properties</em> se
indica a Jasper Reports que utilice estas fuentes a la hora de generar
el informe.</p>
</div>
<div class="paragraph">
<p>Si se desean utilizar fuentes de letra adicionales a parte de las
incluidas por defecto por el add-on, deberán ser instaladas de forma
manual en el proyecto. Para ello se puede consultar la sección
<a href="#_instalar_fuentes_de_letra_para_los_informes">Instalar fuentes de letra para los
informes</a> de la sección de recetas.</p>
</div>
</div>
<div class="sect3">
<h4 id="generación-de-un-informe"><a class="anchor" href="#generación-de-un-informe"></a>11.3. Generación de un informe</h4>
<div class="paragraph">
<p>El add-on realiza la generación automática de informes sobre cualquier
entidad de la applicación en la que se está utilizando. Posteriormente,
los informes podrán ser personalizados por parte del desarrollador de la
aplicación para adecuarlos a los requerimientos modificando o bien lo
lógica de negocio o bien el estilo visual como se desee.</p>
</div>
<div class="paragraph">
<p>La petición de un informe, al tratarse de una vista más de la
aplicación, ha de ser atendida por un controlador. No obstante, los
informes muestran información referente a una entidad del modelo de
datos de la aplicación, por tanto el controlador debe atender peticiones
referentes a una determinada entidad. Esto, como se comentó en
<a href="#_controlador_crud">CRUDS
automático</a>, se configura mediante la anotación '@RooWebScaffold' y su
atributo 'formBackingObject'. Así pues, no se puede definir un informe
sobre un controlador que no disponga de la anotación '@RooWebScaffold'.</p>
</div>
<div class="paragraph">
<p>La generación de un informe se realiza mediante el comando
<a href="#_web_report_add">web report add</a> o
incluyendo la anotación @GvNIXReports en la clase del controlador. Los
formatos de fichero en los que se puede generar el informe son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PDF</p>
<div class="paragraph">
<p>Portable Document Format.</p>
</div>
</li>
<li>
<p>XLS</p>
<div class="paragraph">
<p>Excel.</p>
</div>
</li>
<li>
<p>CSV</p>
<div class="paragraph">
<p>Comma Separated Values.</p>
</div>
</li>
<li>
<p>HTML</p>
<div class="paragraph">
<p>Hyper Text Markup Language.</p>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
    Updated SRC_MAIN_JAVA/org/gvnix/test/web/EntityController.java
    Created SRC_MAIN_WEBAPP/WEB-INF/reports
    Created SRC_MAIN_WEBAPP/WEB-INF/reports/entity_informe.jrxml
    Created SRC_MAIN_JAVA/org/gvnix/test/web/servlet/view/jasperreports
    Created SRC_MAIN_JAVA/org/gvnix/test/web/servlet/view/jasperreports/
            CustomJasperReportsMultiFormatView.java
    Updated SRC_MAIN_WEBAPP/WEB-INF/spring/jasper-views.xml
    Updated SRC_MAIN_WEBAPP/WEB-INF/i18n/application.properties
    Created SRC_MAIN_WEBAPP/WEB-INF/views/pets/informe.jspx
    Updated SRC_MAIN_WEBAPP/WEB-INF/views/pets/views.xml
    Updated SRC_MAIN_WEBAPP/WEB-INF/i18n/application.properties
    Created SRC_MAIN_JAVA/org/gvnix/test/web/EntityController_Roo_GvNIXReport.aj
    Updated SRC_MAIN_WEBAPP/WEB-INF/views/menu.jspx</pre>
</div>
</div>
<div class="paragraph">
<p>El comando incluirá la anotación <em>@GvNIXReports</em> en la clase
controladora e incluira como atributo un array de cadenas en la que cada
elemento define un informe y los formatos en los que se podrá generar
dicho informe. Así pues, la anotación:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@GvNIXReports({ "informe|pdf,xls,csv" })</pre>
</div>
</div>
<div class="paragraph">
<p>Define un informe cuyo nombre es <em>informe</em> y estará disponible en los
formatos pdf, xls y csv.</p>
</div>
<div class="paragraph">
<p>Al lanzar el comando <em>web report add</em> o anotar la clase del controlador
con <em>@GvNIXReports</em> se realizan una serie de modificaciones en el
proyecto que darán como resultado la posibilidad de generar un informe
desde un formulario de la aplicación. Las modificaciones que realiza el
comando sobre el proyecto son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Crea la clase Java <strong>CustomJasperReportsMultiFormatView</strong>. La nueva
clase se creará en el subpaquete <em>servlet.view.jasperreports</em> dentro del
paquete donde se encuentre el controlador. Esta clase se instala solo
una vez y en sucesivas ejecuciones se comprueba si existe. Esta clase
tiene como principal cometido establecer, de manera dinámica, el nombre
del archivo del informe que se genera para su descarga.</p>
</li>
<li>
<p>En el archivo <code>jasper-views.xml</code> añade la definición de una nueva
vista que será el nuevo informe añadido a la aplicación. Se define para
ello un bean cuyo id es <em>&lt;fromBackingObject&gt;&lt;reportname&gt;</em> y
<em>CustomJasperReportsMultiFormatView</em> como clase del bean. Si
<em>formBackingObject</em> de <em>@RooWebScaffold</em> tiene como valor <em>Entity</em> y el
nombre definido para el informe es <em>informe</em>:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;bean id="entity_informe"
class="org.gvnix.test.web.servlet.view.jasperreports.CustomJasperReportsMultiFormatView"
p:url="/WEB-INF/reports/entity_informe.jrxml"
p:subReportUrls-ref="subReportUrls"
p:subReportDataKeys-ref="subReportDataKeys" /&gt;</pre>
</div>
</div>
</li>
<li>
<p>Crea un archivo de diseño de informe (jrxml) con carios campos de la
clase Entity (siguiendo el ejemplo anterior). El archivo se creará en
<code>src/main/webapp/WEB-INF/reports</code> con el nombre <code>entity_informe.jrxml</code>.
Este archivo se referenciará en el <em>bean</em> del fichero <code>jasper-views.xml</code>
desde el atributo <em>p:url</em>.</p>
</li>
<li>
<p>Crea un formulario web bajo <code>src/main/webapp/WEB-INF/views/&lt;entity&gt;</code>
con nombre <em>informe.jspx</em> siguiendo con el ejemplo anterior. Y
define esta nueva vista en el fichero <code>views.xml</code> situado en el mismo
directorio. Esta página permitirá solicitar la generación del informe y
por defecto lo hará incluyendo los 10 primeros registros de la entidad.</p>
</li>
<li>
<p>Incluye las etiquetas multidioma que necesita visualizar la generación
de informes en <em>src/main/webapp/WEB-INF/i18n/application.properties</em> y
un nuevo enlace del menú en <em>src/main/webapp/WEB-INF/views/menu.jspx</em>
para poder acceder a la página de generación del informe.</p>
</li>
<li>
<p>Crea el aspecto Java <em>&lt;controller&gt;_Roo_GvNIXReport.aj</em> con los métodos
que atenderán las peticiones relacionadas con el informe añadido. Se
añaden dos métodos por informe:</p>
<div class="ulist">
<ul>
<li>
<p><em>generate&lt;Reportname&gt;Form(..)</em>: devuelve la vista del formulario web
que permite al usuario seleccionar el formato de salida del informe y
solicitar su generación mediante un botón.</p>
</li>
<li>
<p><em>generate&lt;Reportname&gt;(..)</em>: atiende la petición de generación del
informe recopilando los datos necesarios que se deben incluir en él.
Para ello, por defecto invoca el método
<em>&lt;formBackingObject&gt;.find&lt;formBackingObject&gt;Entries(0, 10)</em> por lo que
se tomarán los 10 primeros registros de la entidad para rellenar el
informe.</p>
<div class="listingblock">
<div class="content">
<pre>@RequestMapping(value = "/reports/informe", params = "form",
        method = RequestMethod.GET)
public String EntityController.generateInformeForm(Model uiModel) {
    String[] reportFormats =  {"pdf"};
    Collection&lt;String&gt; reportFormatsList = Arrays.asList(reportFormats);
    uiModel.addAttribute("report_formats", reportFormatsList);
    return "users/informe";
}

@RequestMapping(value = "/reports/informe", method = RequestMethod.GET)
public String EntityController.generateInforme(
        @RequestParam(value = "format", required = true) String format, Model uiModel) {
    if ( null == format || format.length() &lt;= 0 ) {
            uiModel.addAttribute("error", "message_format_required");
            return "users/informe";
    }
    final String REGEX = "(pdf)";
    Pattern pattern = Pattern.compile(REGEX, Pattern.CASE_INSENSITIVE);
    Matcher matcher = pattern.matcher(format);
    if ( !matcher.matches() ) {
            uiModel.addAttribute("error", "message_format_invalid");
            return "users/informe";
    }
    Collection&lt;Entity&gt; dataSource = Entity.findEntityEntries(0, 10);
    if (dataSource.isEmpty()) {
            uiModel.addAttribute("error", "message_emptyresults_noreportgeneration");
            return "users/informe";
    }
    uiModel.addAttribute("format", format);
    uiModel.addAttribute("title", "INFORME");
    uiModel.addAttribute("informeList", dataSource);
    return "entity_informe";
}</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>El comando web report add puede ejecutarse tantas veces como se desee
sobre el mismo controlador. Si el nombre del informe a añadir ya existe
previamente, se añadirán los formatos especificados a los ya definidos.
Si el nombre dado al nuevo informe definido no existía, se añadirá su
definición en la anotación <em>@GvNIXReports</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@GvNIXReports({ "informe|pdf,xls,csv", "otroinforme|pdf" })</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Los valores de la anotación <em>@GvNIXReports</em> <strong>no son sensibles</strong> a
mayúsculas por tanto si manualmente se establecen los valores de la
anotación como:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@GvNIXReports({ "informe|pdf", "INFORME|xls,csv" })</pre>
</div>
</div>
<div class="paragraph">
<p>es equivalente a:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@GvNIXReports({ "informe|pdf,xls,csv" })</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="futuras-versiones-3"><a class="anchor" href="#futuras-versiones-3"></a>11.4. Futuras versiones</h4>
<div class="ulist">
<ul>
<li>
<p>Incrementar la funcionalidad del informe generado, incluyendo la
visualización de las relaciones que pueda tener la entidad sobre la que
se declara el informe. En la sección de recetas se muestra una forma de
mostrar las relaciones de una entidad en el informe mediante el
<a href="#_diseño_de_informes_con_sub_informes">uso de subinformes</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-service"><a class="anchor" href="#add-on-service"></a>12. Add-on Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permite crear servicios locales, servidores de servicios web y clientes
de servicios web de forma automática.</p>
</div>
<div class="sect3">
<h4 id="descripción-9"><a class="anchor" href="#descripción-9"></a>12.1. Descripción</h4>
<div class="paragraph">
<p>Permite crear de forma automática servicios locales, servidores de
servicios web a partir de un método del código fuente, crear servidores
de servicios web basándose en un archivo de descripción de servicios
<em>WSDL</em> y crear clientes de servicios web a partir de un archivo de
descripción de servicios <em>WSDL</em>.</p>
</div>
<div class="paragraph">
<p>La creación de servicios, del mismo modo que todas las funcionalidades
que proporciona el framework, se realiza mediante anotaciones. Para
simplificar esta tarea se puede hacer uso de los comandos que ofrece. A
medida que se van ejecutando comandos del add-on, se van modificando
anotaciones y métodos de la clase Java de forma que acabará conformando
el servicio web que se desea publicar.</p>
</div>
</div>
<div class="sect3">
<h4 id="creación-de-servicios-locales"><a class="anchor" href="#creación-de-servicios-locales"></a>12.2. Creación de servicios locales</h4>
<div class="paragraph">
<p>Un servicio local es una clase Java con una serie de métodos que se
desea que estén disponibles de forma interna para toda la aplicación. La
clase se puede crear con el comando
<a href="#_remote_service_class">remote service class</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Created SRC_MAIN_JAVA/org/gvnix/test/service/Service.java</pre>
</div>
</div>
<div class="paragraph">
<p>La ejecución del comando creará una clase en la ruta especificada con la
anotación <em>@Service</em> que le proporciona unas características especiales
y facilita su uso como servicio local dentro de la aplicación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
@Service
public class Service {
}</pre>
</div>
</div>
<div class="paragraph">
<p>De esta forma, el servicio puede ser utilizar desde cualquier otra clase
Java definiendo una propiedad del tipo de la clase de servicio con la
anotación <em>@Autowired</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Autowired
Service service;</pre>
</div>
</div>
<div class="paragraph">
<p>Una vez creada la clase se pueden crear los métodos que se desea ofrecer
en el servicio. Los métodos se pueden crear mediante el comando
<a href="#_remote_service_operation">remote service
operation</a> que permite añadir métodos en una clase.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;  --name myMethod --service ~.service.Service
        --return java.lang.Long --paramNames param1,param2
        --paramTypes "java.lang.String,java.util.List"
Updated SRC_MAIN_JAVA/org/gvnix/test/service/Service.java</pre>
</div>
</div>
<div class="paragraph">
<p>El comando anterior creará el método con las características solicitadas
en la clase que se le indica como parámetro.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public Long myMethod(String param1, List param2) {
  return null;
}</pre>
</div>
</div>
<div class="paragraph">
<p>Como se puede observar, la implementación del método está vacía y como
es obvio deberá ser definida por el desarrollador.</p>
</div>
</div>
<div class="sect3">
<h4 id="creación-de-servidores-desde-java"><a class="anchor" href="#creación-de-servidores-desde-java"></a>12.3. Creación de servidores desde Java</h4>
<div class="paragraph">
<p>Permite que los métodos de una clase Java puedan ser accedidos desde el
exterior mediante operaciones de un servicio web.</p>
</div>
<div class="paragraph">
<p>En primer lugar se debe elegir una clase Java que contendrá los métodos
que se desea ofrecer al exterior mediante el servicio web. La clase
puede ser cualquiera existente previamente o se puede crear una nueva
mediante el comando <a href="#_remote_service_class">remote
service class</a>.</p>
</div>
<div class="paragraph">
<p>A continuación, se debe elegir los métodos a ofrecer a través del
servicio web. Si todavía no existen, se pueden crear mediante el comando
<a href="#_remote_service_operation">remote service
operation</a>.</p>
</div>
<div class="paragraph">
<p>De momento la clase no es accesible mediante un servicio web. Para ello
se debe ejecutar el comando
<a href="#_remote_service_define_ws">remote service define
ws</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Updated ROOT/pom.xml [
        added repository http://repository.gvnix.org;
        added dependency org.gvnix:org.gvnix.service.roo.addon:X.Y.Z;
        added plugin org.apache.cxf:cxf-java2ws-plugin:${cxf.version}]
Created SRC_MAIN_WEBAPP/WEB-INF/cxf-appname.xml
Updated SRC_MAIN_WEBAPP/WEB-INF/web.xml
Creating a new class 'Service' to export web service.
Created SRC_MAIN_JAVA/org/gvnix/test/service/Service.java
Updated SRC_MAIN_JAVA/org/gvnix/test/service/Service.java
Updated ROOT/pom.xml [
        added dependency org.apache.cxf:cxf-rt-core:${cxf.version};
        added dependency org.apache.cxf:cxf-rt-bindings-soap:${cxf.version};
        added dependency org.apache.cxf:cxf-rt-databinding-jaxb:${cxf.version};
        added dependency org.apache.cxf:cxf-rt-frontend-jaxws:${cxf.version};
        added dependency org.apache.cxf:cxf-rt-transports-http:${cxf.version};
        added dependency javax.xml.bind:jaxb-api:2.1;
        added dependency javax.xml.ws:jaxws-api:2.1;
        added property 'cxf.version' = '2.4.2']
Updated SRC_MAIN_WEBAPP/WEB-INF/cxf-petclinic.xml
Updated ROOT/pom.xml
Created SRC_MAIN_JAVA/org/gvnix/test/service/Service_Roo_GvNix_WebService.aj
* New service defined without operations, use 'service export operation' command to add it
* New service can be shown adding '/services/' suffix to your base application URL</pre>
</div>
</div>
<div class="paragraph">
<p>El comando incluirá la anotación <em>@GvNIXWebService</em> en la clase Java
indicada. También generará los componentes necesarios para exponer la
clase como un servicio web a partir de los atributos de la anotación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
@GvNIXWebService(name = "ServicePortType",
        targetNamespace = "http://service.test.gvnix.org/",
        serviceName = "Service", address = "Service",
        fullyQualifiedTypeName = "org.gvnix.test.service.Service", exported = false)
public class Service {
}</pre>
</div>
</div>
<div class="paragraph">
<p>La clase Java será enlazada en la definición del servicio con un
<em>PortType</em> lo que permitirá la comunicación con la clase desde el
exterior mediante los protocolos y tecnologías de servicios web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>privileged aspect Service_Roo_GvNix_WebService {
declare @type: Service: @WebService(name = "ServicePortType",
        targetNamespace = "http://service.test.gvnix.org/",
        serviceName = "Service", portName = "ServicePortType");
declare @type: Service: @SOAPBinding(style = Style.DOCUMENT, use = Use.LITERAL,
        parameterStyle = ParameterStyle.WRAPPED);
}</pre>
</div>
</div>
<div class="paragraph">
<p>En este momento el servicio web ya está publicado y es accesible, sin
embargo no dispondrá de ninguna operación ya que por defecto todos los
métodos de la clase publicada son configurados inicialmente como no
accesibles por motivos de seguridad. Se podrá hacer accesible cada uno
de los métodos de la clase por separado mediante el comando
<a href="#_remote_service_export_operation">remote service
export operation</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Updated SRC_MAIN_JAVA/org/gvnix/test/service/Service.java
Updated SRC_MAIN_WEBAPP/WEB-INF/cxf-appname.xml
Updated ROOT/pom.xml
Deleted SRC_MAIN_JAVA/org/gvnix/test/service/Service.java
Created SRC_MAIN_JAVA/org/gvnix/test/service/Service.java
Created SRC_MAIN_JAVA/org/gvnix/test/service/Service_Roo_GvNix_WebService.aj
Updated SRC_MAIN_JAVA/org/gvnix/test/service/Service_Roo_GvNix_WebService.aj</pre>
</div>
</div>
<div class="paragraph">
<p>El comando anterior añade la anotación <em>@GvNIXWebMethod</em> al método, de
forma que que se generará el código necesario para que la operación esté
disponible en el servicio web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@GvNIXWebMethod(operationName = "method", requestWrapperName = "method",
            requestWrapperNamespace = "http://service.test.gvnix.org/",
            requestWrapperClassName = "org.gvnix.test.service.MethodRequestWrapper",
            resultName = "return", resultNamespace = "http://service.test.gvnix.org/",
            webResultType = Long.class, responseWrapperName = "methodResponse",
            responseWrapperNamespace = "http://service.test.gvnix.org/",
            responseWrapperClassName = "org.gvnix.test.service.MethodResponse")
public Long method(@GvNIXWebParam(name = "param1", type = String.class)
        @WebParam(name = "param1", partName = "parameters", mode = Mode.IN, header = false)
        String param1,
        @GvNIXWebParam(name = "param2", type = List.class)
        @WebParam(name = "param2", partName = "parameters", mode = Mode.IN, header = false)
        List param2) {
    return null;
}</pre>
</div>
</div>
<div class="paragraph">
<p>Como es obvio, el método no dispone de ningún código en su cuerpo y será
responsabilidad del desarrollador el implementar la lógica de negocio
que sea necesaria.</p>
</div>
</div>
<div class="sect3">
<h4 id="creación-de-servidores-desde-wsdl"><a class="anchor" href="#creación-de-servidores-desde-wsdl"></a>12.4. Creación de servidores desde WSDL</h4>
<div class="paragraph">
<p>Existe otro modo para crear servidores de servicios web. Consiste en
ofrecer al exterior un servicio web partiendo de un archivo de contrato
de servicio conocido como <em>WSDL</em>. Con el comando
<a href="#_remote_service_export_ws">remote service export
ws</a> se proporciona la ruta a un archivo 'WSDL' y se generará una réplica
del servicio en la que las operaciones son métodos vacios que
posteriormente deberán ser personalizadas con la lógica de negocio
adecuada.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>La ruta al <em>WSDL</em> puede ser un archivo local mediante <em><a href="file://ruta" class="bare">file://ruta</a></em>, una
dirección web mediante <em><a href="http://ruta" class="bare">http://ruta</a></em> o una dirección web segura mediante
<em><a href="https://ruta" class="bare">https://ruta</a></em>.</p>
</div>
<div class="paragraph">
<p>Este modo es especialmente cómodo para realizar la migración de
servicios que están implementados en otras aplicaciones o tecnologías o
que se desean integrar en otra aplicación.</p>
</div>
</div>
<div class="sect3">
<h4 id="creación-de-clientes"><a class="anchor" href="#creación-de-clientes"></a>12.5. Creación de clientes</h4>
<div class="paragraph">
<p>Es posible generar un cliente que permita realizar peticiones a un
servicio web remoto existente utilizando para ello el comando
<a href="#_remote_service_import_ws">remote service import
ws</a>. Facilitando la ruta a un 'WSDL', se generará una clase en la ruta
que se especifique y que contendrá los métodos del cliente que darán
acceso al servicio web remoto.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>remote service import ws --class org.gvnix.test.service.Service
            --wsdl ruta
Created SRC_MAIN_JAVA/org/gvnix/test/service/
Created SRC_MAIN_JAVA/org/gvnix/test/service/Service.java
Updated SRC_MAIN_JAVA/org/gvnix/test/service/Service.java
Updated ROOT/pom.xml [
        added dependency org.hibernate.javax.persistence:hibernate-jpa-2.0-api:1.0.0.Final;
        removed dependency org.hibernate.javax.persistence:hibernate-jpa-2.0-api:1.0.1.Final;
        added plugin org.apache.cxf:cxf-codegen-plugin:${cxf.version}]
Updated ROOT/pom.xml</pre>
</div>
</div>
<div class="paragraph">
<p>El comando dará lugar a la creación, si no existía, de la clase Java y a
la inclusión de la anotación <em>@GvNIXWebServiceProxy</em> que define el
servicio web al que da acceso la clase.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
@Service
@GvNIXWebServiceProxy(wsdlLocation = "ruta")
public class Service {
}</pre>
</div>
</div>
<div class="paragraph">
<p>La anotación desencadenará la creación en el aspecto Java
correspondiente de tantos métodos como operaciones ofrece el servicio
web y que enmascaran la comunicación con el sistema remoto.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>privileged aspect Service_Roo_GvNix_WebServiceProxy {

    public String Service.method(String param1) {
            org.web.service.RemoteService s = new org.web.service.RemoteService();
        org.web.service.RemoteServiceSoap p = s.getRemoteServiceSoap12();
        return p.method(param1);
    }

}</pre>
</div>
</div>
<div class="paragraph">
<p>Esta clase se podrá utilizar como si de un servicio local se tratase.
Para usar esta clase simplemente habrá que crear una propiedad en la
clase donde se desea hacer uso de ella y añadirle la anotación
<em>@Autowired</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public class MyClass {
  ...
  @Autowired
  private Service service;
  ...
  public void myMethod() {
    ...
    service.method(..);
    ...
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>La ruta al <em>WSDL</em> puede ser un archivo local mediante <em><a href="file://ruta" class="bare">file://ruta</a></em>, una
dirección web mediante <em><a href="http://ruta" class="bare">http://ruta</a></em> o una dirección web segura mediante
<em><a href="https://ruta" class="bare">https://ruta</a></em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="acceso-a-un-wsdl-en-un-servidor-seguro"><a class="anchor" href="#acceso-a-un-wsdl-en-un-servidor-seguro"></a>12.6. Acceso a un WSDL en un servidor seguro</h4>
<div class="paragraph">
<p>Cuando el <em>WSDL</em> se encuentra en un archivo local o en un servidor no
seguro como HTTP, se puede acceder directamente sin ningún problema.</p>
</div>
<div class="paragraph">
<p>En el caso que un <em>WSDL</em> se encuentra en un servidor seguro al que se
accede mediante HTTPS pueden darse dos posibles escenarios:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>El certificado del servidor ha sido creado por una <strong>Autoridad de
certificación (CA) confiable por la JVM</strong>.</p>
<div class="paragraph">
<p>En este caso, el procesado del <em>WSDL</em> funciona de la misma manera que en
el caso de acceso por HTTP, transparente para el usuario.</p>
</div>
</li>
<li>
<p>El certificado de servidor ha sido creado por un <strong>CA no confiable</strong>
(caso de certificados autofirmados).</p>
<div class="paragraph">
<p>Aquí, es responsabilidad del usuario el aceptar las credenciales del
servidor para poder acceder al <em>WSDL</em>. Recordando como trabajan los
navegadores web, cuando se intenta acceder a un recurso seguro, si el
certificado del servidor no ha sido creado por un CA que se encuentre
entre la lista de CAs conocida (Verisign, Thwate, Equfax, &#8230;&#8203;), el
navegador muestra un mensaje de advertencia y pregunta si se desea
confiar en la identidad del servidor. Cada usuario decide aceptar o no
el certificado.</p>
</div>
<div class="paragraph">
<p>Para simplificar el proceso de importación de servicios web, se intenta
hacer esta tarea de manera transparente para el usuario.</p>
</div>
<div class="paragraph">
<p>Para ello, se manipula el almacén de certificados de la máquina virtual
Java siempre que sea posible. Esto es:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Existe el archivo de keystore en el directorio donde está instalado
Java, por ejemplo en sistemas linux
<em>$JAVA_HOME/jre/lib/security/cacerts</em> y es modificable por el usuario
del sistema que está ejecutando gvNIX.</p>
</li>
<li>
<p>La contraseña del <em>keystore</em> es changeit (la contraseña por defecto
del keystore).</p>
<div class="paragraph">
<p>Si se puede modificar el keystore, se importarán los certificados
implicados en la autenticación del servidor y entonces se podrá acceder
al <em>WSDL</em> requerido para generar el cliente del WS.</p>
</div>
<div class="paragraph">
<p>Al mismo tiempo, se crea en <em>src/main/resources</em> una copia del almacén
de certificados en el archivo gvnix-cacerts y una copia local de los
certificados importados con el nombre
<em>&lt;servidor&gt;-&lt;indice_certificado&gt;.cer</em>. De esta forma, los certificados
pueden ser distribuidos con el resto de archivos del proyecto para que
puedan ser instalados en otros entornos.</p>
</div>
<div class="paragraph">
<p>Si no puede modificar el keystore de la JVM, porque no se cumplen alguna
de las 2 condiciones enumeradas anteriormente, de todas formas realizará
la copia de los certificados necesarios para que sea el usuario quien
instale los mismos en el almacén de certificados de su JVM. Para ello se
puede hacer uso de la herramienta
<a href="http://download.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html">keytool</a>
(distribuida también con el JDK). La operación de importar los
certificados equivale a la aceptación que se hace con el navegador.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="creación-de-clientes-con-firma"><a class="anchor" href="#creación-de-clientes-con-firma"></a>12.6.1. Creación de clientes con firma</h5>
<div class="paragraph">
<p>El add-on permite añadir una firma digital a las peticiones realizadas a
un servicio web externo que se encuentra importado en la aplicación.</p>
</div>
<div class="paragraph">
<p>Actualmente esta opción sólo está disponible para los servicio web que
utilicen la librería Axis (RPC/Encoded). En futuras versiones se añadirá
esta misma opción para servicios que utilicen la librería CXF
(Document/Literal) y otra operaciones relacionadas con la seguridad en
servicios web.</p>
</div>
<div class="paragraph">
<p>Para ello se debe disponer de:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Servicio web importado en la aplicación.</p>
</li>
<li>
<p>Fichero <em>pkc12</em> con el certificado a usar para firmar la petición.</p>
</li>
<li>
<p>Contraseña del certificado.</p>
</li>
<li>
<p>Alias a usar con el certificado</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Disponiendo de esto elementos, se puede hacer uso del comando
<a href="#_remote_service_security_ws">remote service
security ws</a> para añadir la firma en las peticiones del cliente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Created ROOT/src/main/resources/org/gvnix/test/service
Created ROOT/src/main/resources/org/gvnix/test/service/certificate.p12
Updated SRC_MAIN_JAVA/org/gvnix/test/service/Service.java
Created ROOT/src/main/resources/client-config.wsdd
Created ROOT/src/main/resources/org/gvnix/test/service/ServiceSecurity.properties
Updated ROOT/pom.xml [added dependency org.apache.ws.security:wss4j:1.5.11]
Updated ROOT/src/main/resources/client-config.wsdd
Created SRC_MAIN_JAVA/org/gvnix/test/service/Service_Roo_GvNIX_WebSecurity.aj</pre>
</div>
</div>
<div class="paragraph">
<p>Se crearán dos ficheros con distintos parámetros de configuración en
<code>src/main/resources/org/gvnix/test/service/ServiceSecurity.properties</code> y
<code>src/main/resources/client-config.wsdd</code>. El primero contiene los
parámetros introducidos para la configuración de la seguridad y el
segundo la configuración para axis.</p>
</div>
<div class="paragraph">
<p>También dará lugar a la inclusión de la anotación
<em>@GvNIXWebServiceSecurity</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
@GvNIXWebServiceSecurity
public class Service {
}</pre>
</div>
</div>
<div class="paragraph">
<p>La anotación anterior dará lugar a la generación del aspecto Java
correspondiente que establece la clave de acceso al certificado que se
encuentra en el fichero <code>ServiceSecurity.properties</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>privileged aspect Service_Roo_GvNIX_WebSecurity {

    declare parents: Service implements CallbackHandler;

    public Service.new() {
        super();
    }

    public void Service.handle(Callback[] callbacks)
            throws IOException, UnsupportedCallbackException {
        final String propPath = "org/gvnix/test/service/ServiceSecurity.properties";
        final String propKey = "org.apache.ws.security.crypto.merlin.keystore.password";
        try {
// Get class loader to get file from project
            ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
            java.io.File file = new java.io.File(classLoader.getResource(propPath).toURI());
            if (file != null &amp;&amp; file.exists()) {
// Load properties
                java.util.Properties properties = new java.util.Properties();
                java.io.FileInputStream ins = null;
                try {
                    ins = new java.io.FileInputStream(file);
                    properties.load(ins);
                } finally {
                    if (ins != null) {
                        ins.close();
                    }
                }
                String value = properties.getProperty(propKey);
                if (value != null) {
                    ((org.apache.ws.security.WSPasswordCallback) callbacks[0]).setPassword(value);
                } else {
                    throw new IOException("Property ".concat(propKey).concat(" not exists"));
                }
            } else {
                throw new IOException("File ".concat(propPath).concat(" not exists"));
            }
        } catch (java.net.URISyntaxException e) {
            throw new IOException("Problem getting ".concat(propPath).concat(" file"),e);
        }
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Para realizar cambios en los parámetros de firma del servicio es posible
ejecutar de nuevo el comando
<a href="#_remote_service_security_ws">remote service
security ws</a> con los nuevos datos sobre la misma clase (opción
recomendada) o modificar los ficheros antes mencionados a mano.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="listar-los-servicios"><a class="anchor" href="#listar-los-servicios"></a>12.7. Listar los servicios</h4>
<div class="paragraph">
<p>El comando <a href="#_remote_service_list_operation">remote
service list operation</a> muestra los métodos existentes en una clase que
están disponibles para ser ofrecidos al exterior siempre y cuando la
clase esté definida como un servicio web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Method list to export as web service operation in '~.service.Service':
    * myMethod2</pre>
</div>
</div>
<div class="paragraph">
<p>El comando <a href="#_remote_service_ws_list">remote service
ws list</a> permite obtener un listado de los servicios ofrecidos al
exterior o aquellos servicios externos que son utilizados en la
aplicación.</p>
</div>
<div class="paragraph">
<p>El resultado es una salida como esta:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt; remote service ws list
Services                         exported    imported
-------------------------------  ---------   ----------
org.gvnix.test.service.Service1      X
org.gvnix.test.service.Service2                 X
org.gvnix.test.service.Service3                 X</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-web-mvc-i18n"><a class="anchor" href="#add-on-web-mvc-i18n"></a>13. Add-on Web MVC i18n</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permite añadir soporte para nuevos idiomas en el proyecto.</p>
</div>
<div class="sect3">
<h4 id="descripción-10"><a class="anchor" href="#descripción-10"></a>13.1. Descripción</h4>
<div class="paragraph">
<p>Este add-on permite añadir en el proyecto soporte para nuevas lenguas
utilizando para ello una infraestructura común para la inclusión de
nuevos idiomas. Al incluir un nuevo idioma, se añaden en la aplicación
de forma automática los textos traducidos a dicho idioma.</p>
</div>
<div class="paragraph">
<p>Los idiomas soportados son: de (Alemán), en (Inglés), es (Español), it
(Italiano), nl (Holandés), sv (Finlandés), <strong>ca (Valenciano/Catalán)</strong>.
Este último es añadido por gvNIX utilizando la base del add-on de
idiomas de su núcleo Spring Roo.</p>
</div>
</div>
<div class="sect3">
<h4 id="instalación-de-un-idioma"><a class="anchor" href="#instalación-de-un-idioma"></a>13.2. Instalación de un idioma</h4>
<div class="paragraph">
<p>Para instalar uno de los idiomas soportados hay que ejecutar el comando
web mvc install language y proporcionar como parámetro <em>code</em> el código
del idioma deseado.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
    Created SRC_MAIN_WEBAPP/WEB-INF/i18n/messages_ca.properties
    Created SRC_MAIN_WEBAPP/images/ca.png
    Updated SRC_MAIN_WEBAPP/WEB-INF/views/footer.jspx</pre>
</div>
</div>
<div class="paragraph">
<p>Este comando instala un fichero de propiedades en el proyecto con la
traducción de las etiquetas necesarias para el idioma que se requiera.
Por ejemplo, para el idioma valenciano/catalán se creará el fichero
<em>src/main/webapp/WEB-INF/i18n/messages_ca.properties</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#menu
    global_menu_new=Crear nou {0}
    global_menu_list=Llistar {0}
    global_menu_find=Cercar per {0}
    ...</pre>
</div>
</div>
<div class="paragraph">
<p>También realiza las modificaciones necesarias para poder solicitar el
cambio de idioma desde la interfaz visual, lo que implica la inclusión
de una imagen con la bandera del idioma solicitado y la modificación del
pie de página para mostrar el cambio a dicho idioma. Esto se realiza en
el fichero <em>src/main/webapp/WEB-INF/views/footer.jspx</em> mediante el tag
<em>&lt;util:language&gt;</em> que será el encargado de incluir la imagen y generar
el enlace para el cambio de idioma.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;util:language label="Valencian_Catalan" locale="ca"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Para mas información sobre este comando ver el
<a href="#_comandos_del_add_on_web_mvc_i18n">apéndice de comandos del add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="futuras-versiones-4"><a class="anchor" href="#futuras-versiones-4"></a>13.3. Futuras versiones</h4>
<div class="paragraph">
<p>Mejoras a incluir en futuras versiones del add-on.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Incluir el soporte para el resto de lenguas cooficiales del estado
español, es decir, Gallego y Euskera. Se deja abierta la posibilidad de
añadir idiomas de otros estados que pudiesen ser de utilidad.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-dynamic-configuration"><a class="anchor" href="#add-on-dynamic-configuration"></a>14. Add-on Dynamic Configuration</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="descripción-11"><a class="anchor" href="#descripción-11"></a>14.1. Descripción</h4>
<div class="paragraph">
<p>Este add-on pretende simplificar la gestión de distintos valores de
configuración por entorno. Cuando se utiliza Maven como gestor del ciclo
de desarrollo del proyecto existe la posibilidad de utilizar
<a href="http://maven.apache.org/guides/introduction/introduction-to-profiles.html">perfiles</a>
para definir los distintos entornos de ejecución que tendrá la
aplicación (desarrollo, pruebas, integración, preproducción, producción,
&#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>A continuación se muestra un ejemplo de parte de la configuración
necesaria para la definición de perfiles en el fichero <em>pom.xml</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>   &lt;profiles&gt;
     &lt;profile&gt;
       &lt;id&gt;nombre-entorno&lt;/id&gt;
       &lt;properties&gt;
         &lt;nombre.propiedad&gt;valor&lt;/nombre.propiedad&gt;
         ...
       &lt;/properties&gt;
     &lt;/profile&gt;
   &lt;/profiles&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Esta funcionalidad permite configurar el comportamiento de la aplicación
de manera distinta según donde vaya a ser ejecutada. Por ejemplo, la
configuracíón de la conexión con la base de datos de la aplicación
posiblemente será una URL distinta según se esté trabajando en un
entorno de desarrollo o un entorno de producción.</p>
</div>
<div class="paragraph">
<p>Para esto, en la sección <em>&lt;properties&gt;</em> de cada sección <em>&lt;profile&gt;</em> se
pueden declarar tantas propiedades como se desee de forma que al
empaquetar la aplicación (habitualmente en formato WAR), se reemplace el
valor de estas propiedades en los ficheros adecuados. Esto implica que
en distintos archivos del proyecto, como puede ser <em>persistence.xml</em>,
empiecen a aparecer definidas variables con el formato
<em>$\{nombre.propiedad}</em>. Esta circunstancia, a la larga, puede complicar
la comprensión de la configuración del proyecto o dificultar su gestión.
Por ejemplo, podría aparecer la siguiente modificación en el fichero
<em>src/main/resources/META-INF/persistence.xml</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;property name="hibernate.hbm2ddl.auto" value="${hibernate.hbm2ddl.auto}"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Esta circunstancia, a la larga, puede complicar la comprensión de la
configuración del proyecto o dificultar su gestión.</p>
</div>
</div>
<div class="sect3">
<h4 id="funcionalidad"><a class="anchor" href="#funcionalidad"></a>14.2. Funcionalidad</h4>
<div class="paragraph">
<p>Vista la problemática descrita en el punto anterior, el add-on dynamic
configuration pretende simplificar esta gestión. Permite definir
distintas configuraciones de manera rápida y simple. Además, es
independiente del sistema de gestión del ciclo de vida del proyecto, ya
que aunque actualmente las configuraciones solo se pueden exportar a
perfiles Maven, el add-on es lo suficientemente general como para poder
exportar a formatos Ant, etc.</p>
</div>
<div class="paragraph">
<p>A medida que se van ejecutando comandos del add-on se irá modificando el
archivo <em>src/main/resources/dynamic-configuration.xml</em> que almacena la
información sobre las distintas configuraciones definidas hasta el
momento.</p>
</div>
<div class="paragraph">
<p>La creación de una nueva configuración se realiza con el comando
<a href="#_configuration_create">configuration
create</a> que tiene un único parámetro obligatorio ('name') que define el
nombre para la nueva configuración.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
...
roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Configuration created with currently available properties
First created configuration set as default
(use 'configuration property add' to make a property available for all configurations)
roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Configuration created with currently available properties
(use 'configuration property add' to make a property available for all configurations)</pre>
</div>
</div>
<div class="paragraph">
<p>Resaltar que la creación de las configuraciones no es obligatorio
realizarlas al inicio y podrán realizarse en cualquier momento.</p>
</div>
<div class="paragraph">
<p>A partir de este momento es posible añadir nuevas propiedades para que
estén disponibles para su gestión desde todas las configuraciones con
<a href="#_configuration_property_add">configuration
property add</a>. Las propiedades inicialmente tomarán el valor que tengan
definido en el proyecto.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Property available for all configurations
(use 'configuration property value' to set property new values)
(use 'configuration property undefined' to set property with no values)
roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Property available for all configurations
(use 'configuration property value' to set property new values)
(use 'configuration property undefined' to set property with no values)
roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Property available for all configurations
(use 'configuration property value' to set property new values)
(use 'configuration property undefined' to set property with no values)
roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Property available for all configurations
(use 'configuration property value' to set property new values)
(use 'configuration property undefined' to set property with no values)</pre>
</div>
</div>
<div class="paragraph">
<p>A continuación, se podrán modificar los valores de cada propiedad con
<a href="#_configuration_property_value">configuration
property value</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Property value seted
(use 'configuration list' to show configurations and their properties)
roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Property value seted
(use 'configuration list' to show configurations and their properties)
roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Property value seted
(use 'configuration list' to show configurations and their properties)
roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Property value seted
(use 'configuration list' to show configurations and their properties)</pre>
</div>
</div>
<div class="paragraph">
<p>En algunos casos, por seguridad, puede ser necesario que el valor de una
propiedad no esté almacenado en el proyecto, para ello puede utilizarse
el comando
<a href="#_configuration_property_undefined">configuration
property undefined</a> de forma que el valor se tendrá que proporcionar al
empaquetar la aplicación con Maven como un parámetro mediante el
modificador '-D nombre=valor'.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Updated SRC_MAIN_RESOURCES/dynamic-configuration.xml
Property value undefined
(use '-D propname=propvalue' on maven commands to set the property value)
(use 'configuration list' to show configurations and their properties)</pre>
</div>
</div>
<div class="paragraph">
<p>Si se desea ver las distintas configuraciones que creadas, sus
propiedades y los valores definidos para cada una de ellas utilizar el
comando
<a href="#_configuration_list">configuration
list</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
      (Active)      dev
----------------------------------------
 * Database Connection Properties
   - database.url = "jdbc:hsqldb:mem:mydevdb"
   - database.password = ""
 * Persistence Property Attributes XML
   - hibernate.hbm2ddl.auto = "create"
 * Logging Service Properties
   - log4j.rootLogger = "INFO, stdout"
                    pro
----------------------------------------
 * Database Connection Properties
   - database.url = "jdbc:hsqldb:file:myprodb"
   - database.password = (UNDEFINED)
 * Persistence Property Attributes XML
   - hibernate.hbm2ddl.auto = "update"
 * Logging Service Properties
   - log4j.rootLogger = "ERROR, stdout"
(use 'configuration export' to write configurations into the project)</pre>
</div>
</div>
<div class="paragraph">
<p>Para escribir las configuraciones actuales en el proyecto se debe
utilizar el comando
<a href="#_configuration_export">configuration
export</a>. Es muy importante destacar que hasta que no se haya ejecutado
este comando, las configuraciones no serán escritas en los ficheros
destino y por lo tanto hasta ese momento no se podrán utilizar las
configuraciones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Updated ROOT/pom.xml
Updated ROOT/pom.xml
Updated SRC_MAIN_RESOURCES/META-INF/spring/database.properties
Updated SRC_MAIN_RESOURCES/log4j.properties
Updated SRC_MAIN_RESOURCES/META-INF/persistence.xml
Updated SRC_MAIN_RESOURCES/META-INF/spring/database.properties
Updated SRC_MAIN_RESOURCES/log4j.properties
Updated SRC_MAIN_RESOURCES/META-INF/persistence.xml
Configurations exported into project
(use '-P name' on maven commands to use a configuration)
(use 'configuration create' to define a new configuration)</pre>
</div>
</div>
<div class="paragraph">
<p>Una vez exportadas las configuraciones, pueden utilizarse como perfiles
desde Maven mediante el modificador <em>-P nombre</em> utilizando como nombre
el valor que se definió para la configuración con el comando
<a href="#_configuration_create">configuration
create</a>. Por ejemplo, al empaquetar la aplicación para desplegarla en
uno u otro entorno, debe especificarse el nombre de la configuración y
opcionalmente el valor de los parámetros que se crearon como indefinidos
en la configuración.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>shell&gt;
... (Empaquetando la aplicación con la configuración llamada dev) ...
shell&gt;
... (Empaquetando la aplicación con la configuración llamada pro) ...
... (Se utilizará como clave de acceso a la base de datos "mypassword") ...</pre>
</div>
</div>
<div class="paragraph">
<p>También es posible elegir la configuración (perfil) a utilizar desde
Eclipse/STS desde las propiedades del proyecto accediendo a la opción
<em>Maven</em> del menú.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_maven_profiles.png" alt="Selección del perfil Maven desde Eclipse">
</div>
</div>
</div>
<div class="sect3">
<h4 id="mejoras-de-rendimiento"><a class="anchor" href="#mejoras-de-rendimiento"></a>14.3. Mejoras de rendimiento</h4>
<div class="paragraph">
<p>Se pueden definir algunos valores óptimos de rendimiento definidos en la
sección <a href="#_patrones_de_conversión_óptimos_en_el_log">Patrones
de conversión óptimos en el log</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="futuras-versiones-5"><a class="anchor" href="#futuras-versiones-5"></a>14.4. Futuras versiones</h4>
<div class="ulist">
<ul>
<li>
<p>Incluir nuevas propiedades a la lista de propiedades disponibles para
las configuraciones. O por contra, permitir cierta libertad para añadir
cualquier propiedad del proyecto como configurable.</p>
</li>
<li>
<p>Posibilidad de incluir otro tipo de elementos en las configuraciones
como, por ejemplo, distintas dependencias.</p>
</li>
<li>
<p>Definir plantillas de configuración de modo que establezcan unos
valores estándar que se consideren adecuados para una determinada
configuración. Por ejemplo, establecer el formato de los logs en
producción para reducir el consumo de recursos.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-on-web-mvc-binding"><a class="anchor" href="#add-on-web-mvc-binding"></a>15. Add-on Web MVC Binding</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="descripción-12"><a class="anchor" href="#descripción-12"></a>15.1. Descripción</h4>
<div class="paragraph">
<p>El add-on permite registrar ciertos editores de propiedades en Spring
MVC para uno o todos los controladores del proyecto.</p>
</div>
<div class="paragraph">
<p>Los editores son una pieza más de la arquitectura de Spring MVC. Se
encargan de controlar el modo en que las cadenas enviadas por el
navegador cliente, por ejemplo desde un formulario, se convierten en
objetos al llegar al servidor.</p>
</div>
<div class="paragraph">
<p>Para obtener más información sobre los editores de propiedades ver la
<a href="http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#beans-beans-conversion">sección
de conversión de beans</a> de la documentación de Spring.</p>
</div>
<div class="paragraph">
<p>El comando
<a href="#_web_mvc_binding_stringtrimmer">web mvc
binding stringTrimmer</a> permite registrar un editor especialmente útil.
Este editor elimina los espacios en blanco al principio y al final de
las cadenas y además permite transformar las cadenas vacías en valores
nulos.</p>
</div>
<div class="paragraph">
<p>Este editor es especialmente interesante al realizar mantenimientos de
valores almacenados en bases de datos. Por defecto, cuando se deja vacío
un valor de un formulario y está relacionado con una columna de base de
datos del tipo cadena, al almacenar se escribe una cadena vacía. En
estos casos puede suele ser más interesante almacenar un valor nulo.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
Updated SRC_MAIN_JAVA/org/gvnix/test/web/EntityController.java
Updated ROOT/pom.xml added dependency org.gvnix:org.gvnix.web.mvc.binding.roo.addon:X.Y.Z
Created SRC_MAIN_JAVA/org/gvnix/test/web/EntityController_Roo_GvNIXStringTrimmerBinder.aj</pre>
</div>
</div>
<div class="paragraph">
<p>Al ejecutar el comando, el add-on incluirá la anotación
@GvNIXStringTrimmerBinder en la clase controladora especificada en el
parámetro <em>--class</em> del comando o en todas las clases controladoras del
proyecto si no se especificó dicho parámetro. El parámetro
<em>--emptyAsNull</em> por defecto toma el valor <em>true</em> indicando que las
cadenas vacías deben convertirse en valores nulos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
@GvNIXStringTrimmerBinder(emptyAsNull = true)
public class EntityController {
}</pre>
</div>
</div>
<div class="paragraph">
<p>Esto generará en un aspecto Java propio todo el código necesario para
registrar el editor, representado en Spring MVC mediante la clase
<a href="http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/propertyeditors/StringTrimmerEditor.html">StringTrimmerEditor</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>privileged aspect EntityController_Roo_GvNIXStringTrimmerBinder {

    @InitBinder
    public void EntityController.initStringTrimmerBinder(WebDataBinder binder) {
        binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));
    }

}</pre>
</div>
</div>
<div class="paragraph">
<p>Es interesante resaltar que este método puede ser reutilizado haciendo
push-in para registrar cualquier editor asociado a un tipo de datos
adecuado, como se hace en el ejemplo anterior asociando <em>String</em> con
<em>StringTrimmerEditor</em>.</p>
</div>
<div class="paragraph">
<p>Para obtener mas detalles sobre el comando ver el
<a href="#_comandos_del_add_on_web_mvc_binding">apéndice de comandos</a> de
este add-on.</p>
</div>
</div>
<div class="sect3">
<h4 id="futuras-versiones-6"><a class="anchor" href="#futuras-versiones-6"></a>15.2. Futuras versiones</h4>
<div class="ulist">
<ul>
<li>
<p>Para futuras versiones este add-on permitirá registrar más editores de
entre los enumerados en la Tabla 5.2 de la
<a href="http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#beans-beans-conversion">documentación
de Spring</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<h1 id="iii-apéndices" class="sect0"><a class="anchor" href="#iii-apéndices"></a>III. Apéndices</h1>
<div class="paragraph">
<p>En este capitulo se recoge información adicional sobre todo lo comentado
en las secciones anteriores así como un apéndice de todos los comandos disponibles
en la herramienta de desarrollo gvNIX.</p>
</div>
<div class="sect1">
<h2 id="apéndice-de-comandos"><a class="anchor" href="#apéndice-de-comandos"></a>Appendix A: Apéndice de comandos</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="comandos-del-add-on-occ"><a class="anchor" href="#comandos-del-add-on-occ"></a>A.1. Comandos del add-on OCC</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_occ_optimistic_concurrency_control">add-on OCC
(Optimistic Concurrency Control)</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Comandos del add-on OCC</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_occ_checksum_set">occ
checksum set</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Establece un control de concurrencia optimista mediante
una suma de comprobación (checksum) para una determinada entidad del
proyecto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_occ_checksum_all">occ
checksum all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Establece un control de concurrencia optimista mediante
una suma de comprobación (checksum) para todas las entidades del
proyecto</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="occ-checksum-set"><a class="anchor" href="#occ-checksum-set"></a>A.1.1. occ checksum set</h5>
<div class="paragraph">
<p>Establece un control de concurrencia optimista mediante una suma de
comprobación (checksum) en una entidad del modelo. Si la entidad ya
tiene configurado este sistema de control, el comando no permitirá
sobreescribir su configuración y cualquier modificación deberá
realizarse sobre la anotación relacionada <em>@GvNIXEntityOCCChecksum</em> que
se habrá incluido en la clase Java de la entidad.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--entity</dt>
<dd>
<p><em>[Requerido si no está en el contexto] [Clase Java] [Autocompletado]</em>
+
Entidad sobre la que establecer el sistema de control de concurrencia
optimista mediante una suma de comprobación (checksum).</p>
</dd>
<dt class="hdlist1">--fieldName</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nombre del campo de la entidad en donde almacenar la suma de
comprobación (checksum). Habitualmente este parámetro no necesita ser
establecido. Si no se especifica, tomará por convención el nombre
<em>occChekcsum</em> para dicha propiedad.</p>
</dd>
<dt class="hdlist1">--digestMethod</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Método a utilizar en el cálculo de la suma de comprobación (checksum).
Habitualmente este parámetro no necesita ser establecido. Los posibles
valores vienen definidos por los algoritmos aceptados por
<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/security/MessageDigest.html">MessageDigest.getInstance(String
algorithm)</a>. Por defecto, se utilizará el algoritmo <em>md5</em>, pero pueden
utilizarse otros como por ejemplo <em>sha</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="occ-checksum-all"><a class="anchor" href="#occ-checksum-all"></a>A.1.2. occ checksum all</h5>
<div class="paragraph">
<p>Estable un control de concurrencia optimista mediante una suma de
comprobación (checksum) en todas las entidades de la aplicación que no
la tuviesen todavía establecida. Cualquier modificación una vez
establecido el control deberá realizarse sobre la anotación relacionada
<em>@GvNIXEntityOCCChecksum</em> que se habrá incluido en todas las clases Java
de entidad.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--fieldName</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nombre del campo en cada entidad en donde almacenar la suma de
comprobación (checksum). Habitualmente este parámetro no necesita ser
establecido. Si no se especifica, tomará por convención el nombre
<em>occChekcsum</em> para dicha propiedad.</p>
</dd>
<dt class="hdlist1">--digestMethod</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Método a utilizar en el cálculo de la suma de comprobación (checksum).
Habitualmente este parámetro no necesita ser establecido. Los posibles
valores vienen definidos por los algoritmos aceptados por
<a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/security/MessageDigest.html">MessageDigest.getInstance(String
algorithm)</a>. Por defecto, se utilizará el algoritmo <em>md5</em>, pero pueden
utilizarse otros como por ejemplo <em>sha</em>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-jpa"><a class="anchor" href="#comandos-del-add-on-jpa"></a>A.2. Comandos del add-on JPA</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_jpa">add-on JPA</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Comandos de add-on jpa</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_jpa_gvnix_setup">jpa gvnix setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instala el soporte para la funcionalidad</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_jpa_batch_add">jpa batch
add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Genera el servicio de persistencia en bloque para una entidad.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_jpa_batch_all">jpa batch
all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Genera el servicio de persistencia en bloque para todas las
entidades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_jpa_audit_setup">jpa audit
setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configura la auditoría de historico creando la clase que
proveera del nombre de usuario que realiza el cambio. Sólo se puede
ejecutar una vez.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_jpa_audit_add">jpa audit
add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade el soporte de auditoría a una entidad.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_jpa_audit_all">jpa audit
all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade el soporte de auditoría todas las entidades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_jpa_audit_revisionlog">jpa
audit revisionLog</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Establece el proveedor de registro de cambios a
usar.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_jpa_geo_setup">jpa geo setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configura el proyecto para poder guardar entidades con campos de tipo
geográficos.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_field_geo">field geo</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade
un nuevo campo de tipo geográfico a la entidad seleccionada.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_finder_geo_all">finder geo
all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Genera los buscadores de todos los campos de tipo GEO de <em>todas</em>
las entidades registradas en el proyecto.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_finder_geo_add">finder geo
add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Genera los buscadores de todos los campos de tipo GEO para la
entidad seleccionada.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="jpa-gvnix-setup"><a class="anchor" href="#jpa-gvnix-setup"></a>A.2.1. jpa gvnix setup</h5>
<div class="paragraph">
<p>Instala las dependencias necesarias para las funcionalidades del add-on.</p>
</div>
</div>
<div class="sect4">
<h5 id="jpa-batch-add"><a class="anchor" href="#jpa-batch-add"></a>A.2.2. jpa batch add</h5>
<div class="paragraph">
<p>Crea el servicio de persistencia en bloque para una entidad.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--entity</dt>
<dd>
<p><em>[Requerido] [Clase entidad] [Autocompletado]</em>
+
Entidad destino de las operaciones de persistencia.</p>
</dd>
<dt class="hdlist1">--type</dt>
<dd>
<p><em>[Opcional] [Clase] [Autocompletado]</em>
+
Clase de servicio a generar. Si se omite se generará una clase, con
nombre basado en el nombre de la entidad, en el mismo paquete que la
entidad.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="jpa-batch-all"><a class="anchor" href="#jpa-batch-all"></a>A.2.3. jpa batch all</h5>
<div class="paragraph">
<p>Crea el servicio de persistencia en bloque para todas las entidades de
la aplicación.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--package</dt>
<dd>
<p><em>[Opcional] [Paquete] [Autocompletado]</em>
+
Paquete donde se generarán las clases de servicio a generar. Si se
omite se generarán en el mismo paquete que la entidad a la que afecta.
El nombre de la clase del servicio se genera a partir del nombre de la
entidad.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="jpa-audit-setup"><a class="anchor" href="#jpa-audit-setup"></a>A.2.4. jpa audit setup</h5>
<div class="paragraph">
<p>Configura la auditoría de historico creando la clase que proveera del
nombre de usuario que realiza el cambio. Sólo se puede ejecutar una vez.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--service</dt>
<dd>
<p><em>[Requerido] [Clase]</em>
+
Nombre de la clase a crear para hacer de proveedor del objeto usuario.</p>
</dd>
<dt class="hdlist1">--userType</dt>
<dd>
<p><em>[Opcional] [Clase] [Autocompletado]</em>
+
Clase a usar como usuario. Por defecto <code>String</code>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Lanzará un warning informando que tiene que ajustar la implementación de
la clase en dos circunstancias:
Si no está configurado Spring Security::
Si la clase <code>userType</code> no es String y no implementa <code>UserDetails</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="jpa-audit-add"><a class="anchor" href="#jpa-audit-add"></a>A.2.5. jpa audit add</h5>
<div class="paragraph">
<p>Añade el soporte de auditoría a una entidad.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--entity</dt>
<dd>
<p><em>[Requerido] [Clase entidad] [Autocompletado]</em>
+
Entidad a la que añadir la auditoría.</p>
</dd>
<dt class="hdlist1">--type</dt>
<dd>
<p><em>[Opcional] [Clase] [Autocompletado]</em>
+
Clase a crear como <em>EntityListener</em> para establecer los datos de
auditoría. Si no se establece se genera una clase, basada en el nombre
de la entidad, en el mismo paquete que la entidad.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="jpa-audit-all"><a class="anchor" href="#jpa-audit-all"></a>A.2.6. jpa audit all</h5>
<div class="paragraph">
<p>Añade el soporte de auditoría a todas las entidades de la aplicación.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--package</dt>
<dd>
<p><em>[Opcional] [Paquete] [Autocompletado]</em>
+
Paquete donde se generarán las clases <em>EntityListener</em>. Si se omite se
generarán en el mismo paquete que la entidad a la que afecta. El
nombre de la clase <em>EntityListener</em> se genera a partir del nombre de
la entidad.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="jpa-audit-revisionlog"><a class="anchor" href="#jpa-audit-revisionlog"></a>A.2.7. jpa audit revisionLog</h5>
<div class="paragraph">
<p>Selecciona el proveedor de gestión de revisiones de entidades a usar.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--provider</dt>
<dd>
<p><em>[Requerido] [Identificador de proveedor] [Autocompletado]</em>
+
Identificador del proveedor de revisiones a usar. Sólo estarán
visibles aquellos proveedor que puedan utilizarse en el proyecto
actual (esto se consulta al la propia instancia de proveedor). Los
proveedores se registran como add-ons en el framework (al estilo de
los proveedores de JDBC para la ingeniería inversa) y deben de
implementar un interfaz definido.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="jpa-geo-setup"><a class="anchor" href="#jpa-geo-setup"></a>A.2.8. jpa geo setup</h5>
<div class="paragraph">
<p>Configura el proyecto para poder guardar entidades con campos de tipo
geográficos.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--provider</dt>
<dd>
<p><em>[Requerido] [Identificador de proveedor] [Autocompletado]</em>
+
Identificador del proveedor de persistencia GEO a usar. Sólo estarán
visibles aquellos proveedor que puedan utilizarse en el proyecto
actual (esto se consulta al la propia instancia de proveedor). Los
proveedores se registran como add-ons en el framework (al estilo de
los proveedores de JDBC para la ingeniería inversa) y deben de
implementar un interfaz definido.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="field-geo"><a class="anchor" href="#field-geo"></a>A.2.9. field geo</h5>
<div class="paragraph">
<p>Añade un nuevo campo de tipo geográfico a la entidad seleccionada.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Autocompletado]</em>
+
Entidad sobre la que se quiere añadir el nuevo campo de tipo GEO</p>
</dd>
<dt class="hdlist1">--fieldName</dt>
<dd>
<p><em>[Requerido]</em>
+
Nombre del nuevo campo que se quiere añadir</p>
</dd>
<dt class="hdlist1">--type</dt>
<dd>
<p><em>[Requerido] [Autocompletado]</em>
+
Selecciona el tipo de dato GEO que representará el nuevo campo añadido
a la entidad. Puede tomar los siguientes valores:</p>
<div class="ulist">
<ul>
<li>
<p>POINT (Se guarda un único punto en la base de datos)</p>
</li>
<li>
<p>LINESTRING (Se guardan una serie de puntos que forman una linea
continua)</p>
</li>
<li>
<p>MULTILINESTRING (Se guardan una serie de puntos que forman varias
lineas continuas)</p>
</li>
<li>
<p>POLYGON (Se guardan una serie de puntos que forman un polígono.
Siempre empieza y acaba en el mismo punto.)</p>
</li>
<li>
<p>GEOMETRY (Se guarda una serie de puntos que forman una geometría.
Acepta cualquiera de las geometrías anteriores.)</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="finder-geo-all"><a class="anchor" href="#finder-geo-all"></a>A.2.10. finder geo all</h5>
<div class="paragraph">
<p>Genera los buscadores de todos los campos de tipo GEO de <em>todas</em> las
entidades registradas en el proyecto.</p>
</div>
</div>
<div class="sect4">
<h5 id="finder-geo-add"><a class="anchor" href="#finder-geo-add"></a>A.2.11. finder geo add</h5>
<div class="paragraph">
<p>Genera los buscadores de todos los campos de tipo GEO para la entidad
seleccionada.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Autocompletado]</em>
+
Entidad sobre la que se quieren generar los métodos de búsqueda.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-dialog"><a class="anchor" href="#comandos-del-add-on-web-dialog"></a>A.3. Comandos del add-on Web Dialog</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_web_dialog">add-on Web
Dialog</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Comandos del add-on Web Dialog</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_dialog_setup">web
mvc dialog setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instala el soporte para diálogos modales y realiza la
gestión de ciertas excepciones para que sean visualizadas de forma
amigable y en múltiples idiomas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_dialog_exception_list">web
mvc dialog exception list</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muestra por la consola la lista de
excepciones que están siendo actualmente gestionadas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_dialog_exception_add">web
mvc dialog exception add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incluye una nueva excepción dentro de la
gestión de excepciones y permite definir el mensaje amigable asociado a
la excepción en un determinado idioma</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_dialog_exception_set_language">web
mvc dialog exception set language</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade o actualiza un mensaje
amigable asociado a una excepción en un determinado idioma para lo que
la excepción debe haber sido incluida previamente en el sistema de
gestión de excepciones con el comando anterior</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_dialog_exception_remove">web
mvc dialog exception remove</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quita una excepción de la gestión y por lo
tanto no se mostrará un mensaje amigable y en múltiples idiomas en el
caso de producirse y no ser controlada desde el proyecto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_dialog_setup">web
mvc dialog add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade dos métodos en el código fuente de un controlador
que permiten abrir un diálogo modal en una página de la aplicación sin
realizar ninguna implementación en la capa web</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="web-mvc-dialog-setup"><a class="anchor" href="#web-mvc-dialog-setup"></a>A.3.1. web mvc dialog setup</h5>
<div class="paragraph">
<p>Instala en el proyecto el soporte para diálogos de error y de usuario en
ventana modal (pop-up). A partir de ese momento los mensajes de error de
la aplicación se mostrarán con ese formato. También configura un sistema
para visualizar de forma amigable y con soporte multi idioma ciertas
excepciones que se pueden producir en esta clase de aplicaciones. Ver
<a href="#_add_on_web_dialog">Add-on Web Dialog</a> para una información más
detallada.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-dialog-exception-list"><a class="anchor" href="#web-mvc-dialog-exception-list"></a>A.3.2. web mvc dialog exception list</h5>
<div class="paragraph">
<p>Muestra por consola la lista de excepciones que actualmente están siendo
gestionadas. Es decir, las excepciones que si no son controladas desde
la aplicación y se producen, aparecerán al usuario en una ventana modal
con un mensaje amigable y en multiples idiomas. El resultado mostrado
por la consola será algo similar a lo siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Handled Exceptions:
.DataAccessException
.NoSuchRequestHandlingMethodException
.TypeMismatchException
.MissingServletRequestParameterException
java.sql.SQLException
java.io.IOException
org.springframework.transaction.TransactionException
java.lang.UnsupportedOperationException
javax.persistence.OptimisticLockException
org.hibernate.NonUniqueObjectException
org.hibernate.exception.ConstraintViolationException
org.hibernate.id.IdentifierGenerationException</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-dialog-exception-add"><a class="anchor" href="#web-mvc-dialog-exception-add"></a>A.3.3. web mvc dialog exception add</h5>
<div class="paragraph">
<p>Incluye una nueva excepción a la gestión de excepciones. De esta forma,
si se produce dicha excepción en la aplicación se visualizará de forma
amigable mediante un mensaje modal y en múltiples idiomas. Este comando
permite también definir el mensaje amigable asociado a la excepción en
un determinado idioma. El mensaje amigable se compone de título y
descripción.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--exception</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre de la excepción a incluir en la gestión de excepciones. Si se
desea que la definición sea única, se ha de especificar el paquete
java completo del que proviene, por ejemplo
<em>java.lang.NullPointerException</em>, ya que si se especifica únicamente
el nombre, por ejemplo <em>NullPointerException</em>, aplicaría a todas las
excepciones con dicho nombre sea cual sea el paquete en el que se
encuentre.</p>
</dd>
<dt class="hdlist1">--title</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Título de la ventana modal que se mostrará en pantalla cuando se
produzca la excepción.</p>
</dd>
<dt class="hdlist1">--description</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Texto con el contenido de la ventana modal que se mostrará en pantalla
cuando se produzca la excepción.</p>
</dd>
<dt class="hdlist1">--language</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Idioma del título y de la descripción en su formato ISO: <em>es, de, it,
nl, sv, en, etc</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-dialog-exception-set-language"><a class="anchor" href="#web-mvc-dialog-exception-set-language"></a>A.3.4. web mvc dialog exception set language</h5>
<div class="paragraph">
<p>Añade o actualiza el mensaje amigable asociado a una excepción en un
determinado idioma. La excepción debe haber sido incluida anteriormente
en el sistema de gestión de excepciones con el comando <em>web mvc dialog
exception add</em>. El mensaje amigable se compone de título y descripción.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--exception</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre de la excepción ya incluida en la gestión de excepciones para
la que se desea añadir o modificar sus mensajes amigables en un idioma
determinado. Se puede obtener el nombre exacto de la excepción
mediante el comando <em>web mvc dialog exception list</em>.</p>
</dd>
<dt class="hdlist1">--title</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Título de la ventana modal que se mostrará en pantalla cuando se
produzca la excepción.</p>
</dd>
<dt class="hdlist1">--description</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Texto con el contenido de la ventana modal que se mostrará en pantalla
cuando se produzca la excepción.</p>
</dd>
<dt class="hdlist1">--language</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Idioma del título y de la descripción en su formato ISO: <em>es, de, it,
nl, sv, en, etc</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-dialog-exception-remove"><a class="anchor" href="#web-mvc-dialog-exception-remove"></a>A.3.5. web mvc dialog exception remove</h5>
<div class="paragraph">
<p>Quita una excepción del sistema de gestión de excepciones y por lo tanto
no se mostrará un mensaje amigable y en múltiples idiomas en el caso de
producirse cuando no es controlada desde el código fuente de la
aplicación.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--exception</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre de la excepción ya incluida en la gestión de excepciones que se
desea eliminar. Se puede obtener el nombre exacto de la excepción
mediante el comando <em>web mvc dialog exception list</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-dialog-add"><a class="anchor" href="#web-mvc-dialog-add"></a>A.3.6. web mvc dialog add</h5>
<div class="paragraph">
<p>Añade dos métodos en el código fuente de un controlador que permiten
abrir un diálogo modal en una página de la aplicación sin realizar
ninguna implementación en la capa web. Ver la sección de inclusión de
<a href="#_nuevos_diálogos_modales">nuevos diálogos
modales</a> para una información más detallada.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Controlador para el cual generar los métodos de creación de un diálogo
modal.</p>
</dd>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre que se dará a uno de los métodos en el controlador. Este método
y el método por defecto con nombre <em>modalDialog</em> permitirán mostrar un
diálogo modal cada uno con distintas características.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-menu"><a class="anchor" href="#comandos-del-add-on-web-menu"></a>A.4. Comandos del add-on Web Menu</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_web_menu">add-on Web Menu</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Comandos del add-on Web Menu</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_menu_setup">menu setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instala el sistema de gestión del menú web que permite organizar de
forma sencilla su estructura de páginas y permisos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_menu_entry_add">menu entry add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade
un elemento al menú, sea una página o un grupo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_menu_entry_visibility">menu entry visibility</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define un elemento del menú como visible o oculto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_menu_entry_roles">menu entry roles</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Establece una lista de perfiles de usuario para los que se mostrará una
entrada del menú</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_menu_entry_move">menu entry move</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mueve un elemento del menú y todos los hijos que pueda tener</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_menu_entry_update">menu entry update</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualiza un elemento del menú</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_menu_entry_info">menu entry info</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muestra por consola los valores establecidos en un elemento del menú y
en todos los hijos que pueda tener</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_menu_tree">menu tree</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muestra
por consola un árbol con un resumen de los elementos del menú.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="menu-setup"><a class="anchor" href="#menu-setup"></a>A.4.1. menu setup</h5>
<div class="paragraph">
<p>Instala y activa en la aplicación el sistema de gestión del menú web
para la organización de su estructura de páginas y la definición de
permisos. A partir de este momento se podrán utilizar todos los comandos
de gestión del menú para modificar su modelo de datos y definir permisos
de visualización sobre las distintas opciones del menú en función del
perfil de cada usuario. El modelo de datos se encuentra definido en el
fichero <code>src/main/webapp/WEB-INF/views/menu.xml</code>.</p>
</div>
<div class="paragraph">
<p>Para una descripción detallada de las tareas que realiza este comando
consultar la documentación de
<a href="#_instalación_de_la_gestión_del_menú">instalación de la gestión del menú</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="menu-entry-add"><a class="anchor" href="#menu-entry-add"></a>A.4.2. menu entry add</h5>
<div class="paragraph">
<p>Añade un elemento al menú, sea una página o un grupo. La diferencia
entre ambos es que una página tiene asociada una URL y un grupo no. Este
comando crea un elemento del menú, pero no crea una nueva vista en el
proyecto. La creación de una vista puede realizarse con el comando
<a href="http://static.springsource.org/spring-roo/reference/html-single/index.html#command-index-web-mvc-view">web
mvc view</a>.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--category</dt>
<dd>
<p><em>[Opcional] [Elemento del menú] [Autocompletado]</em>
+
Identificador del elemento del menú donde incluir la nueva entrada. El
elemento del menú puede ser una página o un grupo. Si no se especifica
este parámetro la nueva entrada se incluirá en el grupo <em>Page</em> que si
no existe será creado al final del menú.</p>
</dd>
<dt class="hdlist1">--url</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
URL con la que enlazará el elemento del menú.</p>
</dd>
<dt class="hdlist1">--label</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Título para el elemento del menú. Se creará una etiqueta con este
título en el fichero <code>src/main/webapp/WEB-INF/i18n/application.properties</code>.
Este título será ignorado si se define el parámetro
<em>messageCode</em>.</p>
</dd>
<dt class="hdlist1">--messageCode</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Etiqueta que representará la traducción en múltiples idiomas del
título del elemento del menú. Si todavía no existe, se deberá crear
dicha etiqueta en cada fichero de idioma que exista configurado en el
proyecto en <code>src/main/webapp/WEB-INF/i18n/messages_xx.properties</code>.</p>
</dd>
<dt class="hdlist1">--roles</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Lista de perfiles con permiso para ver el elemento del menú. Los
distintos elementos de la lista de perfiles deben estar separados por
comas. Si no se establece este parámetro, el elemento del menú
aparecerá para todos los perfiles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Al finalizar la ejecución de este comando se informará del identificador
del nuevo elemento del menú añadido con un texto similar al siguiente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>New page 'i_page_xxxx_xxxx' added.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="menu-entry-visibility"><a class="anchor" href="#menu-entry-visibility"></a>A.4.3. menu entry visibility</h5>
<div class="paragraph">
<p>Cambia la visibilidad de un elemento del menú, es decir, permite
definirlo como visible o oculto.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--id</dt>
<dd>
<p><em>[Requerido] [Elemento del menú] [Autocompletado]</em>
+
Identificador del elemento del menú, sea página o grupo.</p>
</dd>
<dt class="hdlist1">--hidden</dt>
<dd>
<p><em>[Requerido] [Booleano] [Autocompletado]</em>
+
Indica si este elemento del menú debe ocultarse. Si se especifica este
parámetro sin ningún valor, tomará el valor <em>true</em> y ocultará el
elemento del menú. Si no se especifica este parámetro, tomará el valor
<em>false</em> y mostrará el elemento del menú.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="menu-entry-roles"><a class="anchor" href="#menu-entry-roles"></a>A.4.4. menu entry roles</h5>
<div class="paragraph">
<p>Establece una lista de perfiles de usuario para los que se mostrará una
entrada del menú. No se mostrará a los usuarios que no tengan algún
perfil de la lista.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--id</dt>
<dd>
<p><em>[Requerido] [Elemento del menú] [Autocompletado]</em>
+
Identificador del elemento del menú, sea página o grupo.</p>
</dd>
<dt class="hdlist1">--roles</dt>
<dd>
<p>[Requerido] [Cadena]
+
Lista de perfiles con permiso para ver el elemento del menú. Los
distintos elementos de la lista de perfiles deben estar separados por
comas.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="menu-entry-move"><a class="anchor" href="#menu-entry-move"></a>A.4.5. menu entry move</h5>
<div class="paragraph">
<p>Mueve un elemento del menú y todos los hijos que pueda tener. Se puede
cambiar su posición en el orden de elementos del menú o se puede mover
dentro de otro elemento del menú.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--id</dt>
<dd>
<p><em>[Requerido] [Elemento del menú] [Autocompletado]</em>
+
Identificador del elemento del menú, sea página o grupo.</p>
</dd>
<dt class="hdlist1">--into</dt>
<dd>
<p><em>[Opcional] [Elemento del menú] [Autocompletado]</em>
+
Identificador de un elemento del menú donde añadir como hijo el
elemento del menú. El elemento se insertará en la última posición de
la lista de hijos. Este parámetro no se puede especificar
simultaneamente junto al parámetro <em>before</em>.</p>
</dd>
<dt class="hdlist1">--before</dt>
<dd>
<p><em>[Opcional] [Elemento del menú] [Autocompletado]</em>
+
Identificador de un elemento del menú antes del cual insertar el
elemento del menú. Este parámetro no se puede especificar
simultaneamente junto al parámetro <em>into</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="menu-entry-update"><a class="anchor" href="#menu-entry-update"></a>A.4.6. menu entry update</h5>
<div class="paragraph">
<p>Actualiza un elemento del menú, sea una página o un grupo. Los valores
no especificados en el comando se mantendrán con su valor original.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--id</dt>
<dd>
<p><em>[Requerido] [Elemento del menú] [Autocompletado]</em>
+
Identificador del elemento del menú, sea página o grupo.</p>
</dd>
<dt class="hdlist1">--nid</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nuevo identificador para el elemento del menú. Por convención, se
utiliza el prefijo _c<em> para los grupos e _i</em> para las páginas.</p>
</dd>
<dt class="hdlist1">--label</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Título para el elemento del menú. Se actualizará con el nuevo título
la etiqueta correspondiente en el fichero
<code>src/main/webapp/WEB-INF/i18n/application.properties</code>.
Este título será ignorado si se define o ya estaba
definido el parámetro <em>messageCode</em>.</p>
</dd>
<dt class="hdlist1">--messageCode</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Etiqueta que representará la traducción en múltiples idiomas del
título del elemento del menú. Si todavía no existe, se deberá crear
dicha etiqueta en cada fichero de idioma que exista configurado en el
proyecto en <code>src/main/webapp/WEB-INF/i18n/messages_xx.properties</code>.</p>
</dd>
<dt class="hdlist1">--url</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
URL con la que enlazará el elemento del menú.</p>
</dd>
<dt class="hdlist1">--roles</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Lista de perfiles con permiso para ver el elemento del menú. Los
distintos elementos de la lista de perfiles deben estar separados por
comas.</p>
</dd>
<dt class="hdlist1">--hidden</dt>
<dd>
<p>[Requerido] [Booleano] [Autocompletado]
+
Indica si este elemento del menú debe ocultarse. Si se especifica este
parámetro sin ningún valor, tomará el valor <em>true</em> y ocultará el
elemento del menú. Si no se especifica este parámetro, tomará el valor
<em>false</em> y mostrará el elemento del menú.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="menu-entry-info"><a class="anchor" href="#menu-entry-info"></a>A.4.7. menu entry info</h5>
<div class="paragraph">
<p>Muestra por consola los valores establecidos en un elemento del menú y
en todos los hijos que pueda tener, formateados de forma amigable para
su fácil lectura.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--id</dt>
<dd>
<p><em>[Requerido] [Elemento del menú] [Autocompletado]</em>
+
Identificador del elemento del menú, sea página o grupo.</p>
</dd>
<dt class="hdlist1">--lang</dt>
<dd>
<p>[Opcional] [Idioma]
+
Idioma en el que mostrar los valores de las distintas etiquetas
definidas para cada elemento del menú.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>El comando mostrará un resultado similar al siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[c_person]
URL          : No
Label Code   : menu_category_person_label
Label        : Person
Message Code :
Message      :
Roles        :
Hidden       : false
Children     :
               [i_person_new]
               URL          : /people?form
               Label Code   : menu_item_person_new_label
               Label        : Person
               Message Code : global_menu_new
               Message      : Create new {0}
               Roles        :
               Hidden       : false

               [i_person_list]
               URL          : /people?page=1&amp;size=${empty param.size ? 10 : param.size}
               Label Code   : menu_item_person_list_label
               Label        : People
               Message Code : global_menu_list
               Message      : List all {0}
               Roles        :
               Hidden       : false</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="menu-tree"><a class="anchor" href="#menu-tree"></a>A.4.8. menu tree</h5>
<div class="paragraph">
<p>Muestra por consola un árbol con un resumen de los elementos del menú,
opcionalmente a partir de un determinado elemento del menú.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--id</dt>
<dd>
<p><em>[Opcional] [Elemento del menú] [Autocompletado]</em>
+
Identificador del elemento del menú, sea página o grupo, a partir del
cual comenzar a mostrar el árbol resumen. Si no se especifica, se
muestran todas las página del menú.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>El comando mostrará un resultado similar al siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt;
[c_pet, visible, no-URL]
          /pets?form  [i_pet_new, visible]
          /pets?page=1&amp;size=${empty param.size ? 10 : param.size}  [i_pet_list, visible]
          /pets?find=ByNameAndWeight&amp;form  [fi_pet_nameandweight, visible]
          /pets?find=ByOwner&amp;form  [fi_pet_owner, visible]
          /pets?find=BySendRemindersAndWeightLessThan&amp;form
                [fi_pet_sendremindersandweightlessthan, visible]
          /pets?find=ByTypeAndNameLike&amp;form  [fi_pet_typeandnamelike, visible]

[c_owner, visible, no-URL]
          /owners?form  [i_owner_new, visible]
          /owners?page=1&amp;size=${empty param.size ? 10 : param.size}
                [i_owner_list, visible]

[c_visit, visible, no-URL]
          /visits?form  [i_visit_new, visible]
          /visits?page=1&amp;size=${empty param.size ? 10 : param.size}
                [i_visit_list, visible]
          /visits?find=ByDescriptionAndVisitDate&amp;form
                [fi_visit_descriptionandvisitdate, visible]
          /visits?find=ByDescriptionLike&amp;form  [fi_visit_descriptionlike, visible]
          /visits?find=ByVisitDateBetween&amp;form  [fi_visit_visitdatebetween, visible]

[c_vet, visible, no-URL]
          /vets?form  [i_vet_new, visible]
          /vets?page=1&amp;size=${empty param.size ? 10 : param.size}  [i_vet_list, visible]

[c_seleniumtests, visible, no-URL]
          /resources/selenium/test-suite.xhtml  [si_seleniumtests_test, visible]</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-report"><a class="anchor" href="#comandos-del-add-on-web-report"></a>A.5. Comandos del add-on Web Report</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_web_report">add-on Web
Report</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Comandos del add-on Web Report</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_report_setup">web report setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configura en el proyecto el soporte para la generación de informes en
formato PDF, XLS, CSV y HTML</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_report_add">web report add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crea un
nuevo informe y permite su acceso desde el controlador de una entidad
que se le proporciona como parámetro</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="web-report-setup"><a class="anchor" href="#web-report-setup"></a>A.5.1. web report setup</h5>
<div class="paragraph">
<p>Configura en el proyecto el soporte para la generación de informes en
formato PDF, XLS, CSV y HTML mediante <em>Jasper Reports</em> y su descarga
desde la aplicación web.</p>
</div>
<div class="paragraph">
<p>El comando sólo estará disponible si el proyecto utiliza Spring MVC en
la capa web y <a href="#Tiles">Tiles</a> como motor de
vistas web.</p>
</div>
<div class="paragraph">
<p>Este comando no tiene ningún parámetro obligatorio ni opcional.</p>
</div>
<div class="paragraph">
<p>Para una descripción detallada de las configuraciones que realiza este
comando en el proyecto, consultar la sección de
<a href="#_add_on_web_report">instalación</a> del add-on Web Report.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-report-add"><a class="anchor" href="#web-report-add"></a>A.5.2. web report add</h5>
<div class="paragraph">
<p>Crea un nuevo informe y permite su acceso desde el controlador de una
entidad que se le proporciona como parámetro al comando. El controlador
debe obligatoriamente estar gestionando una entidad del proyecto. El
informe, por defecto, mostrará los 10 primeros registros de la entidad.</p>
</div>
<div class="paragraph">
<p>Si el comando se ejecuta varias veces sobre el mismo controlador y con
el mismo nombre de informe, se añadirán al informe existente los nuevos
formatos de generación que se hayan podido especificar. Para mas
información consultar la sección de
<a href="#_generación_de_un_informe">generación de un informe</a> del add-on
Web Report.</p>
</div>
<div class="paragraph">
<p>El comando sólo estará disponible si el proyecto utiliza Spring MVC en
la capa web y <a href="#Tiles">Tiles</a> como motor de
vistas web.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--controller</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Clase controladora que gestiona una entidad en la que se desea añadir
el informe. Este controlador ha de contener la anotación
<em>@RooWebScaffold</em> y su atributo <em>formBackingObject</em> indicará la
entidad para la que se generará el informe.</p>
</dd>
<dt class="hdlist1">--reportName</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre que se le quiere dar al informe y que servirá de identificador
único. No admite espacios y el valor proporcionado será convertido a
minúsculas.</p>
</dd>
<dt class="hdlist1">--format</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Lista de formatos en los que se permitirá generar el informe. Los
formatos de la lista deberán estar separados por comas y sin espacios.
Los formatos soportados son: <em>pdf, xls, csv y html</em>. Si el nombre del
informe ya existe en un controlador, los formatos nuevos que se
hubiesen podido definir se añadirán al informe existente. Los formatos
siempre serán convertidos a minúsculas. Si este parámetro no se
especifica, tomará por defecto el valor <em>pdf</em>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-service"><a class="anchor" href="#comandos-del-add-on-service"></a>A.6. Comandos del add-on Service</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_service">add-on Service</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 6. Comandos del add-on Service</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_remote_service_class">remote service class</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crea
una clase Java que actuará como servicio local dentro de la aplicación</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_remote_service_operation">remote service
operation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade un nuevo método en una clase Java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_remote_service_define_ws">remote service define
ws</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hace que una clase Java pueda ser accedida desde el exterior a
través de un servicio web</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_remote_service_export_operation">remote service
export operation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hace que un método de una clase Java pueda ser
accedido desde el exterior a través de una operación del servicio web</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_remote_service_list_operation">remote service
list operation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muestra el listado de métodos de una clase Java que
podrían ser ofrecidos al exterior como operaciones del servicio web</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_remote_service_export_ws">remote service export
ws</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crea en el proyecto la infraestructura necesaria definida por un
<em>WSDL</em> para ofrecer ciertas operaciones mediante un servicio web</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_remote_service_import_ws">remote service import
ws</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crea en el proyecto la infraestructura necesaria definida por un
<em>WSDL</em> para acceder a ciertas operaciones situadas en un servicio web</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_remote_service_ws_list">remote service ws list</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lista los servicios web que se encuentran definidos en la aplicación</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_remote_service_security_ws">remote service
security ws</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade o actualiza la configuración necesaria para firmar
las peticiones que se hacen a un servicio web remoto</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="remote-service-class"><a class="anchor" href="#remote-service-class"></a>A.6.1. remote service class</h5>
<div class="paragraph">
<p>Crea una clase Java que actuará como servicio local dentro de la
aplicación. El servicio se podrá utilizar desde cualquier otra clase
Java definiendo una propiedad del tipo de la clase de servicio con la
anotación <em>@Autowired</em>.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Paquete y nombre donde crear la clase Java de servicio.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="remote-service-operation"><a class="anchor" href="#remote-service-operation"></a>A.6.2. remote service operation</h5>
<div class="paragraph">
<p>Añade un nuevo método en una clase Java. La clase Java puede ser una
entidad, controlador, servicio o cualquier otro tipo.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre del método a añadir en la clase Java.</p>
</dd>
<dt class="hdlist1">--service</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Paquete y nombre de la clase Java donde crear el nuevo método.</p>
</dd>
<dt class="hdlist1">--return</dt>
<dd>
<p><em>[Opcional] [Tipo Java] [Autocompletado]</em>
+
Tipo de dato Java que devolverá el método.</p>
</dd>
<dt class="hdlist1">--paramNames</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nombre de los parámetros de entrada del método, separados mediante
comas y sin espacios.</p>
</dd>
<dt class="hdlist1">--paramTypes</dt>
<dd>
<p><em>[Opcional] [Tipos Java] [Autocompletado]</em>
+
Tipos Java de los parámetros de entrada del método, separados mediante
comas y sin espacios.</p>
</dd>
<dt class="hdlist1">--exceptions</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Tipos Java de las excepciones que puede lanzar el método, separados
mediante comas y sin espacios.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="remote-service-define-ws"><a class="anchor" href="#remote-service-define-ws"></a>A.6.3. remote service define ws</h5>
<div class="paragraph">
<p>Hace que una clase Java pueda ser accedida desde el exterior a través de
un servicio web. Para ello, creará toda la infraestructura necesaria
para que sistemas externos puedan comunicarse con ella mediante los
protocolos y tecnologías propias de los servicios web. Si la clase
indicada como parámetro no existe, será creada automáticamente.</p>
</div>
<div class="paragraph">
<p>Se recomienda no especificar en este comando ningún parámetro opcional
si no es estrictamente necesario y se conoce las implicaciones que
tendrá desde el punto de vista de la interoperabilidad de servicios web.
Si no se especifica, para cada parámetro se proporcionará un valor
adecuado para facilitar la máxima interoperabilidad del servicio web con
el exterior.</p>
</div>
<div class="paragraph">
<p>Tras publicar una clase Java a través de un servicio web, sus métodos
todavía no serán accesibles como operaciones del servicio web hasta que
no se le indique para cada método.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Paquete y nombre de la clase Java a hacer accesible desde el exterior
a través de un servicio web. Si la clase Java no existe, será creada y
además se le aplicará las características propias de un servicio
local. Por ejemplo, <em>org.gvnix.test.service.Service</em>.</p>
</dd>
<dt class="hdlist1">--serviceName</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nombre con el que se quiere publicar el servicio web. Por defecto,
tomará el mismo nombre que la clase Java. Por ejemplo, <em>Service</em>.</p>
</dd>
<dt class="hdlist1">--portTypeName</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nombre para el tipo de puerto o <em>PortType</em> del servicio web. Por
defecto, tomará el mismo nombre que la clase Java seguido del sufijo
<em>PortType</em>. Por ejemplo, <em>ServicePortType</em>.</p>
</dd>
<dt class="hdlist1">--addressName</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Dirección URL relativa a la raíz de la aplicación desde donde se podrá
acceder al servicio web. Por defecto, tomará el mismo nombre que la
clase Java. Por ejemplo, <em>Service</em>.</p>
</dd>
<dt class="hdlist1">--targetNamespace</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Espacio de nombres o <em>Namespace</em> del servicio web. Debe tener formato
de URL. Por defecto, tendrá el mismo valor que el paquete de la clase
Java en sentido inverso y con formato de URL. Por ejemplo,
<em><a href="http://service.test.gvnix.org/" class="bare">http://service.test.gvnix.org/</a></em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="remote-service-export-operation"><a class="anchor" href="#remote-service-export-operation"></a>A.6.4. remote service export operation</h5>
<div class="paragraph">
<p>Hace que un método de una clase Java pueda ser accedido desde el
exterior a través de una operación del servicio web. Para ello, creará
toda la infraestructura necesaria para que sistemas externos puedan
comunicarse con ella mediante los protocolos y tecnologías propias de
los servicios web. Si la clase indicada como parámetro no está
configurada todavía para ser accedida a través de un servicio web, se le
aplicará esta configuración automáticamente.</p>
</div>
<div class="paragraph">
<p>Se recomienda no especificar en este comando ningún parámetro opcional
si no es estrictamente necesario y se conoce las implicaciones que
tendrá desde el punto de vista de la interoperabilidad de servicios web.
Si no se especifica, para cada parámetro se proporcionará un valor
adecuado para facilitar la máxima interoperabilidad de la operación del
servicio web con el exterior.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Paquete y nombre de la clase Java que contiene el método que se desea
hacer accesible a través de una operación del servicio web. Por
ejemplo, <em>org.gvnix.test.service.Service</em>.</p>
</dd>
<dt class="hdlist1">--method</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre del método que se desea hacer accesible a través de una
operación del servicio web. Por ejemplo, <em>method</em>.</p>
</dd>
<dt class="hdlist1">--operationName</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nombre que tendrá la operación del servicio web y que dará acceso al
método de la clase Java. Por defecto, tomará el mismo nombre que el
método. Por ejemplo, <em>method</em>.</p>
</dd>
<dt class="hdlist1">--resultName</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nombre que tendrá el resultado de la operación del servicio web y que
será de un tipo de datos equivalente al resultado del método. Por
defecto, tomará el nombre <em>result</em>.</p>
</dd>
<dt class="hdlist1">--resultNamespace</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Espacio de nombres o <em>Namespace</em> del resultado de la operación del
servicio web. Debe tener formato de URL. Por defecto, tendrá el mismo
valor que el paquete de la clase Java en sentido inverso y con formato
de URL. Por ejemplo, <em><a href="http://service.test.gvnix.org/" class="bare">http://service.test.gvnix.org/</a></em>.</p>
</dd>
<dt class="hdlist1">--responseWrapperName</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nombre que tendrá el objeto que contendrá la respuesta de la operación
del servicio web. Por defecto, tomará el mismo nombre que el método
seguido del sufijo <em>Response</em>. Por ejemplo, <em>methodResponse</em>.</p>
</dd>
<dt class="hdlist1">--responseWrapperNamespace</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Espacio de nombres o <em>Namespace</em> del objeto que contendrá el resultado
de la operación del servicio web. Debe tener formato de URL. Por
defecto, tendrá el mismo valor que el paquete de la clase Java en
sentido inverso y con formato de URL. Por ejemplo,
<em><a href="http://service.test.gvnix.org/" class="bare">http://service.test.gvnix.org/</a></em>.</p>
</dd>
<dt class="hdlist1">--requestWrapperName</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Nombre que deberá tener el objeto que contendrá la petición a la
operación del servicio web. Por defecto, tomará el mismo nombre que el
método. Por ejemplo, <em>method</em>.</p>
</dd>
<dt class="hdlist1">--requestWrapperNamespace</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Espacio de nombres o <em>Namespace</em> del objeto que contendrá el la
petición a la operación del servicio web. Debe tener formato de URL.
Por defecto, tendrá el mismo valor que el paquete de la clase Java en
sentido inverso y con formato de URL. Por ejemplo,
<em><a href="http://service.test.gvnix.org/" class="bare">http://service.test.gvnix.org/</a></em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="remote-service-list-operation"><a class="anchor" href="#remote-service-list-operation"></a>A.6.5. remote service list operation</h5>
<div class="paragraph">
<p>Muestra el listado de métodos de una clase Java que podrían ser
ofrecidos como operaciones del servicio web. La clase Java debe haber
sido previamente definida como accesible a través de un servicio web.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Paquete y nombre de la clase Java de la que obtener el listado de
métodos que podrían ser ofrecidos como operaciones del servicio web.
Por ejemplo, <em>org.gvnix.test.service.Service</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="remote-service-export-ws"><a class="anchor" href="#remote-service-export-ws"></a>A.6.6. remote service export ws</h5>
<div class="paragraph">
<p>Crea en el proyecto toda la infraestructura necesaria para ofrecer
ciertas operaciones mediante un servicio web. El servicio web y sus
operaciones vendrán definidas mediante un contrato de servicio o <em>WSDL</em>.</p>
</div>
<div class="paragraph">
<p>El comando creará una clase Java que representará en el proyecto al
servicio web y creará dentro tantos métodos como operaciones hubiesen
definidas en el contrato de servicio. Con esto, el servicio web y sus
operaciones ya son accesibles desde el exterior. Será responsabilidad
del desarrollador el implementar la lógica de negocio de cada método.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--wsdl</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Ruta al archivo que define el contrato de servicio o <em>WSDL</em> cuya
infraestructura Java se desea crear en el proyecto. La ruta puede ser
a un archivo local mediante <em><a href="file://ruta" class="bare">file://ruta</a></em>, a una dirección web
mediante <em><a href="http://ruta" class="bare">http://ruta</a></em> o a una dirección web segura mediante
<em><a href="https://ruta" class="bare">https://ruta</a></em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="remote-service-import-ws"><a class="anchor" href="#remote-service-import-ws"></a>A.6.7. remote service import ws</h5>
<div class="paragraph">
<p>Crea en el proyecto toda la infraestructura necesaria para acceder a
ciertas operaciones situadas en un servicio web. El servicio web y sus
operaciones vendrán definidas mediante un contrato de servicio o <em>WSDL</em>.</p>
</div>
<div class="paragraph">
<p>El comando creará una clase Java que representará en el proyecto al
servicio web y creará dentro tantos métodos como operaciones hubiesen
definidas en el contrato de servicio. Invocando a alguno de estos
métodos se estará accediendo a la operación correspondiente del sistema
externo.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--wsld</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Ruta al archivo que define el contrato de servicio o <em>WSDL</em> cuya
infraestructura Java se desea crear en el proyecto. La ruta puede ser
a un archivo local mediante <em><a href="file://ruta" class="bare">file://ruta</a></em>, a una dirección web
mediante <em><a href="http://ruta" class="bare">http://ruta</a></em> o a una dirección web segura mediante
<em><a href="https://ruta" class="bare">https://ruta</a></em>.</p>
</dd>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Paquete y nombre de la clase Java que permitirá acceder al servicio
web externo creando un método por cada una de las operaciones del
servicio web. Si la clase Java no existe, será creada y además se le
aplicará las características propias de un servicio local. Por
ejemplo, <em>org.gvnix.test.service.Service</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="remote-service-ws-list"><a class="anchor" href="#remote-service-ws-list"></a>A.6.8. remote service ws list</h5>
<div class="paragraph">
<p>Lista los servicios web que se encuentran definidos en la aplicación,
tanto los que ofrecen servicios web al exterior como los que acceden a
servicios web externos.</p>
</div>
<div class="paragraph">
<p>Este comando no tiene ningún parámetro obligatorio ni opcional.</p>
</div>
</div>
<div class="sect4">
<h5 id="remote-service-security-ws"><a class="anchor" href="#remote-service-security-ws"></a>A.6.9. remote service security ws</h5>
<div class="paragraph">
<p>Añade o actualiza la configuración necesaria para firmar las peticiones
que se hacen a un servicio web remoto.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Paquete y nombre de la clase Java que define realiza el acceso al
servicio web externo. Por ejemplo, <em>org.gvnix.test.service.Service</em>.</p>
</dd>
<dt class="hdlist1">--certificate</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Ruta y nombre del fichero donde se encuentra el certificado a utilizar
para firmar la petición. El certificado debe de tener un formato
<em>pkcs12</em> y una extensión <em>p12</em>. El certificado será copiado al
directorio de recursos del proyecto. Por ejemplo,
<em>/tmp/certificado.p12</em>.</p>
</dd>
<dt class="hdlist1">--password</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Contraseña para acceder al certificado de firma.</p>
</dd>
<dt class="hdlist1">--alias</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Alias a utilizar para la firma.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-mvc-i18n"><a class="anchor" href="#comandos-del-add-on-web-mvc-i18n"></a>A.7. Comandos del add-on Web MVC i18n</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_web_mvc_i18n">add-on Web MVC
i18n</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 7. Comandos de add-on Web MVC i18n</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_install_language">web mvc install
language</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instala el soporte para un nuevo idioma en el proyecto</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="web-mvc-install-language"><a class="anchor" href="#web-mvc-install-language"></a>A.7.1. web mvc install language</h5>
<div class="paragraph">
<p>Crea un fichero de propiedades con las traducciones de las etiquetas
multi idioma del proyecto en el lenguage solicitado y configura en la
capa web un acceso para cambiar a dicho idioma.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--code</dt>
<dd>
<p><em>[Requerido] [Idioma] [Autocompletado]</em>
+
Código del idioma a instalar. Los idiomas disponibles son <em>de, en, es,
it, nl y sv.</em></p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-dynamic-configuration"><a class="anchor" href="#comandos-del-add-on-dynamic-configuration"></a>A.8. Comandos del add-on Dynamic Configuration</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_dynamic_configuration">add-on Dynamic
Configuration</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 8. Comandos del add-on Dynamic Configuration</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_configuration_create">configuration
create</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crea una nueva configuración con un determinado nombre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_configuration_property_add">configuration
property add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade una propiedad a la gestión de configuraciones</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_configuration_property_value">configuration
property value</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cambia el valor que tiene una propiedad en una
determinada configuración</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_configuration_property_undefined">configuration
property undefined</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deja sin valor una propiedad en una determinada
configuración</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_configuration_list">configuration
list</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lista todas las configuraciones definidas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_configuration_export">configuration
export</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escribe en el proyecto los cambios definidos hasta el momento
en las configuraciones</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="configuration-create"><a class="anchor" href="#configuration-create"></a>A.8.1. configuration create</h5>
<div class="paragraph">
<p>Crea una nueva configuración con un determinado nombre.</p>
</div>
<div class="paragraph">
<p>La primera configuración creada quedará marcada como la configuración
por defecto de modo que en el caso de empaquetar la aplicación sin
elegir ninguna configuración, será esta la que se aplique.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre para la nueva configuración que la referenciará de forma
unívoca.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="configuration-property-add"><a class="anchor" href="#configuration-property-add"></a>A.8.2. configuration property add</h5>
<div class="paragraph">
<p>Añade una propiedad a la gestión de configuraciones de modo que dicha
propiedad podrá tener distinto valor para cada configuración.</p>
</div>
<div class="paragraph">
<p>Al añadir una nueva propiedad, quedará almacenado internamente el valor
que tubiese en dicho momento. En todas las configuraciones existentes en
ese momento y en aquellas que se creen en un futuro la propiedad tendrá
por defecto dicho valor.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [Propiedad] [Autocompletado]</em>
+
Nombre de la propiedad cuyo valor puede tomar distinto valor en cada
configuración.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="configuration-property-value"><a class="anchor" href="#configuration-property-value"></a>A.8.3. configuration property value</h5>
<div class="paragraph">
<p>Cambia el valor que tiene una propiedad en una determinada
configuración.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--configuration</dt>
<dd>
<p><em>[Requerido] [Configuración] [Autocompletado]</em>
+
Nombre de la configuración cuyo valor para una propiedad se quiere
modificar.</p>
</dd>
<dt class="hdlist1">--property</dt>
<dd>
<p><em>[Requerido] [Propiedad] [Autocompletado]</em>
+
Nombre de la propiedad cuyo valor se desea modificar.</p>
</dd>
<dt class="hdlist1">--value</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nuevo valor para la propiedad en la configuración.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="configuration-property-undefined"><a class="anchor" href="#configuration-property-undefined"></a>A.8.4. configuration property undefined</h5>
<div class="paragraph">
<p>Deja sin valor una propiedad en una determinada configuración.</p>
</div>
<div class="paragraph">
<p>Esto es útil para evitar que quede almacenado en el código fuente del
proyecto algunos valores críticos como puede ser la clave de conexión
con la base de datos de producción. El valor se tendrá que proporcionar
al empaquetar la aplicación con Maven como un parámetro mediante el
modificador <em>-Dnombre.propiedad=valor</em>.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--configuration</dt>
<dd>
<p><em>[Requerido] [Configuración] [Autocompletado]</em>
+
Nombre de la configuración cuyo valor para una propiedad se desea
dejar sin valor.</p>
</dd>
<dt class="hdlist1">--property</dt>
<dd>
<p><em>[Requerido] [Propiedad] [Autocompletado]</em>
+
Nombre de la propiedad cuyo valor se desea dejar sin valor.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="configuration-list"><a class="anchor" href="#configuration-list"></a>A.8.5. configuration list</h5>
<div class="paragraph">
<p>Lista todas las configuraciones definidas junto con las propiedades
incluidas y los valores definidos para cada una de ellas.</p>
</div>
<div class="paragraph">
<p>Este comando no tiene ningún parámetro obligatorio ni opcional.</p>
</div>
</div>
<div class="sect4">
<h5 id="configuration-export"><a class="anchor" href="#configuration-export"></a>A.8.6. configuration export</h5>
<div class="paragraph">
<p>Escribe en el proyecto los cambios definidos hasta el momento en las
configuraciones mediante todos los comandos anteriores utilizando para
ello el sistema de perfiles de Maven. Mientras no se ejecute este
comando, las configuraciones no serán aplicadas en el proyecto y por lo
tanto no podrán ser utilizadas.</p>
</div>
<div class="paragraph">
<p>Este comando no tiene ningún parámetro obligatorio ni opcional.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-mvc-binding"><a class="anchor" href="#comandos-del-add-on-web-mvc-binding"></a>A.9. Comandos del add-on Web MVC Binding</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_web_mvc_binding">add-on Web
MVC Binding</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 9. Comandos del add-on Web MVC Binding</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_binding_stringtrimmer">web mvc
binding stringTrimmer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registra el StringTrimmerEditor.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="web-mvc-binding-stringtrimmer"><a class="anchor" href="#web-mvc-binding-stringtrimmer"></a>A.9.1. web mvc binding stringTrimmer</h5>
<div class="paragraph">
<p>Configura en un controlador concreto o en todos los controladores del
proyecto un editor de propiedades para cadenas que elimina espacios al
inicio y al fin y opcionalmente permite transformar cadenas vacías a
valores nulos.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Opcional] [Clase Java] [Autocompletado]</em>
+
Nombre de la clase Java controladora en la que registrar el editor. Si
no se indica este parámetro, se registrará el editor en todos los
controladores del proyecto.</p>
</dd>
<dt class="hdlist1">--emptyAsNull</dt>
<dd>
<p><em>[Opcional] [Booleano] [Autocompletado]</em>
+
Indica si las cadenas vacias deben convertirse en valores nulos.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-mvc"><a class="anchor" href="#comandos-del-add-on-web-mvc"></a>A.10. Comandos del add-on Web MVC</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_web_mvc">add-on Web MVC</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 10. Comandos de add-on Web MVC</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_batch_setup">web
mvc batch setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instala el soporte para la funcionalidad Web Batch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_batch_add">web
mvc batch add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Genera los métodos de de persistencia en bloque para un
controlador.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_batch_all">web
mvc batch all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Genera los métodos de de persistencia en bloque para
todos los controladores.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_jquery_setup">web
mvc jquery setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instala los artefacto necesario para usar vistas
usando la librería JavaScript jQuery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_jquery_update_tags">web
mvc jquery update tags</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualiza los artefactos, ya instalados en el
add-on, por los actuales.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_jquery_add">web
mvc jquery add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convierte las vistas de un controlador a jQuery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_jquery_all">web
mvc jquery all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convierte todas las vistas a jQuery.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="web-mvc-batch-setup"><a class="anchor" href="#web-mvc-batch-setup"></a>A.10.1. web mvc batch setup</h5>
<div class="paragraph">
<p>Instala las dependencias necesarias y configura el proyecto para dar
soporte a las peticiones de persistencia en bloque.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-batch-add"><a class="anchor" href="#web-mvc-batch-add"></a>A.10.2. web mvc batch add</h5>
<div class="paragraph">
<p>Añade los métodos al controlador para peticiones de persistencia en
bloque.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--controller</dt>
<dd>
<p><em>[Requerido] [Clase controlador] [Autocompletado]</em>
+
Controlador destino.</p>
</dd>
<dt class="hdlist1">--service</dt>
<dd>
<p><em>[Opcional] [Clase de servicios de persistencia] [Autocompletado]</em>
+
Añade los métodos al todos los controladores para peticiones de
persistencia en bloque.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-batch-all"><a class="anchor" href="#web-mvc-batch-all"></a>A.10.3. web mvc batch all</h5>
<div class="paragraph">
<p>Crea el servicio de persistencia en bloque para todas las entidades de
la aplicación.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-jquery-setup"><a class="anchor" href="#web-mvc-jquery-setup"></a>A.10.4. web mvc jquery setup</h5>
<div class="paragraph">
<p>Instala los artefactos necesario para usar vistas que use la librería
jQuery.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-jquery-update-tags"><a class="anchor" href="#web-mvc-jquery-update-tags"></a>A.10.5. web mvc jquery update tags</h5>
<div class="paragraph">
<p>Actualiza todos los artefactos necesario para que el add-on funcione.
Este comando es útil cuando se actualiza la versión del add-on y se
desea utilizar los cambios en los tagx u otros artefactos de la nueva
versión.</p>
</div>
<div class="paragraph">
<p><em>Advertencia:_Al ejecutar este comando, _los artefactos del proyecto
serán reescritos</em>. Cualquier cambio sobre los originales se perderá. Por
lo tanto, es conveniente disponer de una <em>copia de seguridad o un
sistema de control de versiones</em> para revisar las diferencias entre los
artefactos anteriores y la actualización.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-jquery-add"><a class="anchor" href="#web-mvc-jquery-add"></a>A.10.6. web mvc jquery add</h5>
<div class="paragraph">
<p>Convierte las vistas de un controlador a jQuery.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--type</dt>
<dd>
<p><em>[Requerido] [Clase controlador] [Autocompletado]</em>
+
Controlador cuyas vistas se desea convertir a jQuery.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-jquery-all"><a class="anchor" href="#web-mvc-jquery-all"></a>A.10.7. web mvc jquery all</h5>
<div class="paragraph">
<p>Convierte las vistas de todos los controladores a jQuery.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-mvc-bootstrap"><a class="anchor" href="#comandos-del-add-on-web-mvc-bootstrap"></a>A.11. Comandos del add-on WEB MVC Bootstrap</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_bootstrap">add-on
Bootstrap</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 11. Comandos de Addo-on Bootstrap</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_bootstrap_setup">web mvc bootstrap
setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Este comando importará e instalará todos los recursos necesarios
para utilizar bootstrap. Además, modificará la estructura de algunos
tagx existentes para que funcionen correctamente con Bootstrap y
modificará todas las vistas de la aplicación para que utilicen los tags
de JQuery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_bootstrap_update">web mvc
bootstrap update</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Este comando permite regenerar de forma correcta
todos los componentes importados por Bootstrap. En caso de una
modificación incorrecta de estos componentes, podremos regenerarlos para
que vuelvan a su estado inicial.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="web-mvc-bootstrap-setup"><a class="anchor" href="#web-mvc-bootstrap-setup"></a>A.11.1. web mvc bootstrap setup</h5>
<div class="paragraph">
<p>Este comando importará e instalará todos los recursos necesarios para
utilizar bootstrap. Además, modificará la estructura de algunos tagx
existentes para que funcionen correctamente con Bootstrap y modificará
todas las vistas de la aplicación para que utilicen los tags de JQuery.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-bootstrap-update"><a class="anchor" href="#web-mvc-bootstrap-update"></a>A.11.2. web mvc bootstrap update</h5>
<div class="paragraph">
<p>Este comando permite regenerar de forma correcta todos los componentes
importados por Bootstrap. En caso de una modificación incorrecta de
estos componentes, podremos regenerarlos para que vuelvan a su estado
inicial.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-mvc-datatables"><a class="anchor" href="#comandos-del-add-on-web-mvc-datatables"></a>A.12. Comandos del add-on Web MVC Datatables</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_web_mvc_datatables">add-on Web
MVC Datatables</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 12. Comandos del add-on Web MVC Datatables</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_datatables_setup">web
mvc datatables setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instala los artefactos y dependencias requeridas
para el funcionamiento del add-on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_datatables_update_tags">web
mvc datatables update tags</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actualiza los artefactos, ya instalados en
el add-on, por los actuales.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_datatables_add">web
mvc datatables add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade el uso de datatables al controlador
especificado.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_datatables_all">web
mvc datatables all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade el uso de Datatables a todos los
controladores de la aplicación.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_datatables_details_add">web
web mvc datatables details add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade un detalle a la vistas list de un
controlador.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="web-mvc-datatables-setup"><a class="anchor" href="#web-mvc-datatables-setup"></a>A.12.1. web mvc datatables setup</h5>
<div class="paragraph">
<p>Instala todos los artefactos necesario para que el add-on funcione.</p>
</div>
<div class="paragraph">
<p>Los cambios en el proyecto son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">webapp/styles/datatables</dt>
<dd>
<p>Css usadas por el widget.</p>
</dd>
<dt class="hdlist1">webapp/images/datatables/</dt>
<dd>
<p>Imágenes usadas por el widget.</p>
</dd>
<dt class="hdlist1">webapp/scripts/datatables</dt>
<dd>
<p>JavaScript usado por el widget.</p>
</dd>
<dt class="hdlist1">webapp/WEB-INF/tags/datatables</dt>
<dd>
<p>Tagx que adaptan los parámetros de los tags estándar a los de
Dandelion-DataTables.</p>
</dd>
<dt class="hdlist1">src/main/resources/datatables*.properties</dt>
<dd>
<p>Fichero con opciones de configuración de Dandelion-DataTables y
cadenas de internacionalización.</p>
</dd>
<dt class="hdlist1">webapp/WEB-INF/tags/util/load-scripts.tagx</dt>
<dd>
<p>Añade la carga de ficheros js y css a la páginas.</p>
</dd>
<dt class="hdlist1">webapp/WEB-INF/web.xml</dt>
<dd>
<p>Registra configuración necesaria para el uso de Dandelion-DataTables.</p>
</dd>
<dt class="hdlist1">webapp/WEB-INF/spring/webmvc-config.xml</dt>
<dd>
<p>Registra configuración necesaria para el uso de Dandelion-DataTables.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-datatables-update-tags"><a class="anchor" href="#web-mvc-datatables-update-tags"></a>A.12.2. web mvc datatables update tags</h5>
<div class="paragraph">
<p>Actualiza todos los artefactos necesario para que el add-on funcione.
Este comando es útil cuando se actualiza la versión del add-on y se
desea utilizar los cambios en los tagx u otros artefactos de la nueva
versión.</p>
</div>
<div class="paragraph">
<p><em>Advertencia:_Al ejecutar este comando, _los artefactos del proyecto
serán reescritos</em>. Cualquier cambio sobre los originales se perderá. Por
lo tanto, es conveniente disponer de una <em>copia de seguridad o un
sistema de control de versiones</em> para revisar las diferencias entre los
artefactos anteriores y la actualización.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-datatables-add"><a class="anchor" href="#web-mvc-datatables-add"></a>A.12.3. web mvc datatables add</h5>
<div class="paragraph">
<p>Añade el uso de Datatables al controlador especificado.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--type</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Nombre de la clase Java controladora a la que se aplicará los cambios.</p>
</dd>
<dt class="hdlist1">--ajax</dt>
<dd>
<p><em>[Opcional] [Booleano] [Autocompletado]</em>
+
Establece el modo de datos a AJAX (por defecto) o a DOM (cuando es
<em>false</em>).</p>
</dd>
<dt class="hdlist1">--mode</dt>
<dd>
<p><em>[Opcional] [Cadena]</em>
+
Muestra la vista de la entidad que elijamos. En caso de utilizar
la vista de "show" se establece el modo de visualización a
<a href="#_modo_visualización_de_registro">modo
registro</a>.
Si se utiliza "--mode list" se estará mostrando la página list.jspx asociada
a la entidad.</p>
</dd>
<dt class="hdlist1">--inline</dt>
<dd>
<p><em>[Opcional] [Boolean] [Autocompletado]</em>
+
Habilita la funcionalidad
<a href="#_edición_en_línea">edición en línea</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-datatables-all"><a class="anchor" href="#web-mvc-datatables-all"></a>A.12.4. web mvc datatables all</h5>
<div class="paragraph">
<p>Añade el uso de Datatables a todos los controladores de la aplicación,
usando los valores por defecto del comando
<a href="#_web_mvc_jquery_add">web mvc
jquery add</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-datatables-details-add"><a class="anchor" href="#web-mvc-datatables-details-add"></a>A.12.5. web mvc datatables details add</h5>
<div class="paragraph">
<p>Un detalle a la vista list para en base a una propiedad <em>1 a N</em> de la
entidad relacionada (ver descripción en
<a href="#_visualización_de_detalles">Visualización de detalles</a>).</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--type</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Nombre de la clase Java controladora a la que se aplicará los cambios.
Este controlador ya debe estar usando la funcionalidad <em>dataTables</em></p>
</dd>
<dt class="hdlist1">--property</dt>
<dd>
<p><em>[Requerido] [Nombre de propiedad]</em>
+
Nombre de la propiedad <em>1 a N</em> de la entidad relación con el
controlador a usar para el detalle.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-mvc-geo"><a class="anchor" href="#comandos-del-add-on-web-mvc-geo"></a>A.13. Comandos del add-on Web MVC GEO</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_web_mvc_geo">add-on Web MVC
GEO</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 13. Comandos del add-on Web MVC GEO</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_geo_setup">web mvc geo
setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instala los artefactos y dependencias requeridas para el
funcionamiento del add-on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_geo_controller">web
mvc geo controller</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Genera una nueva vista de Mapa en nuestro proyecto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_geo_field">web mvc geo
field</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transforma los campos de texto generados por defecto, a campos
de tipo mapa para facilitar el guardado de campos geográficos.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_geo_entity_all">web
mvc geo entity all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade todas las entidades con campos de tipo GEO a
la vista de mapa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_geo_entity_add">web
mvc geo entity add</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade la entidad seleccionada a la vista de mapa.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_geo_tilelayer">web mvc
geo tilelayer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade una capa base de tipo Tile a la vista del mapa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_geo_wmslayer">web mvc
geo wmslayer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade una capa base de tipo WMS a la vista del mapa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_geo_tool_measure">web
mvc geo tool measure</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade una nueva herramienta de medición a la
vista del mapa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_geo_tool_custom">web
mvc geo tool custom</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade una nueva herramienta personalizada a la
vista del mapa</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="web-mvc-geo-setup"><a class="anchor" href="#web-mvc-geo-setup"></a>A.13.1. web mvc geo setup</h5>
<div class="paragraph">
<p>Instala todos los artefactos necesario para que el add-on funcione.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-geo-controller"><a class="anchor" href="#web-mvc-geo-controller"></a>A.13.2. web mvc geo controller</h5>
<div class="paragraph">
<p>Genera una vista de mapa en nuestro proyecto. Es posible generar tantas
vistas de mapa como se necesiten. Cada una de ellas será independiente y
podrán personalizarse de manera individual</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Clase Java]</em>
+
Nombre de la clase Java controladora que se desea crear.</p>
</dd>
<dt class="hdlist1">--preferredMapping</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
Path que se quiere utilizar en el controller</p>
</dd>
<dt class="hdlist1">--projection</dt>
<dd>
<p><em>[Opcional] [CRS] [Autocompletado]</em>
+
Proyección con la que trabajará el mapa generado</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-geo-field"><a class="anchor" href="#web-mvc-geo-field"></a>A.13.3. web mvc geo field</h5>
<div class="paragraph">
<p>Por defecto, a la hora de guardar campos de tipo geográfico se utilizará
formato #http://es.wikipedia.org/wiki/Well_Known_Text[WKT] que tendrá
que ser introducido de forma manual por el usuario.</p>
</div>
<div class="paragraph">
<p>Sin embargo, este add-on permite transformar estos campos de texto a
componentes de tipo Mapa, gracias a los cuales se facilita la
introducción de datos de tipo GEO en una entidad.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--controller</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Controlador Java asociado a la entidad sobre la cual queremos
actualizar campo de tipo input a campo de tipo mapa.</p>
</dd>
<dt class="hdlist1">--field</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
Campo que queremos modificar</p>
</dd>
<dt class="hdlist1">--center</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Configura el centro del mapa que se va a generar. Formato 'lat, lng'</p>
</dd>
<dt class="hdlist1">--color</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Color con el que se pintarán los datos en el mapa</p>
</dd>
<dt class="hdlist1">--maxZoom</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Nivel de Zoom máximo que se aplicará al mapa generado</p>
</dd>
<dt class="hdlist1">--weight</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Grosor de la linea que se utilizará para pintar sobre el mapa</p>
</dd>
<dt class="hdlist1">--zoom</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Nivel de Zoom inicial con el que aparecerá el mapa</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-geo-entity-all"><a class="anchor" href="#web-mvc-geo-entity-all"></a>A.13.4. web mvc geo entity all</h5>
<div class="paragraph">
<p>Añade todas las entidades con campos de tipo GEO a la vista de mapa</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-geo-entity-add"><a class="anchor" href="#web-mvc-geo-entity-add"></a>A.13.5. web mvc geo entity add</h5>
<div class="paragraph">
<p>Añade la entidad seleccionada a la vista de mapa.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--controller</dt>
<dd>
<p><em>[Requerido] [Clase Java] [Autocompletado]</em>
+
Selecciona el controlador asociado a la entidad que quieres añadir a
la vista de Mapa.</p>
</dd>
<dt class="hdlist1">--map</dt>
<dd>
<p><em>[Opcional] [Map]</em>
+
Indica el mapa en el cual quieres añadir la nueva entidad. Si no se
selecciona ningún mapa, se añade a todas las vistas de mapa generadas.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-geo-tilelayer"><a class="anchor" href="#web-mvc-geo-tilelayer"></a>A.13.6. web mvc geo tilelayer</h5>
<div class="paragraph">
<p>Añade una capa base de tipo Tile a la vista del mapa</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
Indica el nombre de la nueva Capa Base. Este nombre debe ser único
para cada una de las capas añadidas.</p>
</dd>
<dt class="hdlist1">--url</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
URL del servidor de mapas que devolverá la capa base</p>
</dd>
<dt class="hdlist1">--map</dt>
<dd>
<p><em>[Opcional] [Mapa]</em>
+
Indica sobre que mapa quieres añadir la nueva capa base. Si no
selecciona ningún mapa se añadirá a todas las vistas de mapas
existentes.</p>
</dd>
<dt class="hdlist1">--index</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Posición en la que aparecerá la capa base. Si no se introduce ningun
indice, se generará uno automáticamente para evitar erorres en la
visualización de capas.</p>
</dd>
<dt class="hdlist1">--opacity</dt>
<dd>
<p><em>[Opcional] [Number]</em>
+
Indica la opacidad que tendrá la capa. Podemos indicar valores entre
el 0 y el 1. 1 significa que no es transparente y 0 que es totalmente
transparente.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-geo-wmslayer"><a class="anchor" href="#web-mvc-geo-wmslayer"></a>A.13.7. web mvc geo wmslayer</h5>
<div class="paragraph">
<p>Añade una capa base de tipo WMS a la vista del mapa</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
Indica el nombre de la nueva Capa Base. Este nombre debe ser único
para cada una de las capas añadidas.</p>
</dd>
<dt class="hdlist1">--url</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
URL del servidor de mapas que devolverá la capa base</p>
</dd>
<dt class="hdlist1">--map</dt>
<dd>
<p><em>[Opcional] [Mapa]</em>
+
Indica sobre que mapa quieres añadir la nueva capa base. Si no
selecciona ningún mapa se añadirá a todas las vistas de mapas
existentes.</p>
</dd>
<dt class="hdlist1">--index</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Posición en la que aparecerá la capa base. Si no se introduce ningun
indice, se generará uno automáticamente para evitar erorres en la
visualización de capas.</p>
</dd>
<dt class="hdlist1">--opacity</dt>
<dd>
<p><em>[Opcional] [Number]</em>
+
Indica la opacidad que tendrá la capa. Podemos indicar valores entre
el 0 y el 1. 1 significa que no es transparente y 0 que es totalmente
transparente.</p>
</dd>
<dt class="hdlist1">--layers</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Indica qué capas quieres obtener del servicio WMS</p>
</dd>
<dt class="hdlist1">--format</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Indica en qué formato se obtienen las imágenes del servicio WMS.
Formato 'image/png'</p>
</dd>
<dt class="hdlist1">--transparent</dt>
<dd>
<p><em>[Opcional] [Boolean]</em>
+
Indica si la imágen que devuelve tiene transparencia o no</p>
</dd>
<dt class="hdlist1">--styles</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Indica qué estilos quieres obtener para cada una de las capas</p>
</dd>
<dt class="hdlist1">--version</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Versión del servicio WMS</p>
</dd>
<dt class="hdlist1">--crs</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Indica en qué proyección se obtiene la capa WMS. Por defecto EPSG3857</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-geo-tool-measure"><a class="anchor" href="#web-mvc-geo-tool-measure"></a>A.13.8. web mvc geo tool measure</h5>
<div class="paragraph">
<p>Añade una nueva herramienta de medición a la vista del mapa</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
Indica el nombre de la herramienta de medición. Este nombre es único y
cada una de las herramientas deben tener el suyo propio.</p>
</dd>
<dt class="hdlist1">--map</dt>
<dd>
<p><em>[Opcional] [Map]</em>
+
Indica el mapa sobre el que se desea añadir la nueva herramienta. Si
no se espeicifica ningún mapa, se añadirá a todas las vistas de mapa
registradas en el proyecto.</p>
</dd>
<dt class="hdlist1">--preventExitMessageCode</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Código del mensaje multi-idioma que aparecerá al cambiar de
herramienta para evitar que se pierdan los cambios aplicados sobre el
mapa.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-geo-tool-custom"><a class="anchor" href="#web-mvc-geo-tool-custom"></a>A.13.9. web mvc geo tool custom</h5>
<div class="paragraph">
<p>Añade una nueva herramienta personalizada a la vista del mapa</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
Indica el nombre de la herramienta de medición. Este nombre es único y
cada una de las herramientas deben tener el suyo propio.</p>
</dd>
<dt class="hdlist1">--icon</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
Indica el icono que mostrará la herramienta personalizada</p>
</dd>
<dt class="hdlist1">--activateFunction</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
Nombre de la función Javascript que se ejecutará al seleccionar la
herramienta personalizada.</p>
</dd>
<dt class="hdlist1">--deactivateFunction</dt>
<dd>
<p><em>[Requerido] [String]</em>
+
Nombre de la función Javascript que se ejecutará al cambiar de
herramienta si esta se encuentra seleccionada.</p>
</dd>
<dt class="hdlist1">--map</dt>
<dd>
<p><em>[Opcional] [Map]</em>
+
Indica el mapa sobre el que se desea añadir la nueva herramienta. Si
no se espeicifica ningún mapa, se añadirá a todas las vistas de mapa
registradas en el proyecto.</p>
</dd>
<dt class="hdlist1">--iconLibrary</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Indica qué librería se utilizará para representar el icono.</p>
</dd>
<dt class="hdlist1">--actionTool</dt>
<dd>
<p><em>[Opcional] [Boolean]</em>
+
Indica si la herramienta es únicamente clicable o si puede mantenerse
seleccionada</p>
</dd>
<dt class="hdlist1">--cursorIcon</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Indica el icono que tendrá el cursor sobre el mapa al activar esta
herramienta.</p>
</dd>
<dt class="hdlist1">--preventExitMessageCode</dt>
<dd>
<p><em>[Opcional] [String]</em>
+
Código del mensaje multi-idioma que aparecerá al cambiar de
herramienta para evitar que se pierdan los cambios aplicados sobre el
mapa.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-web-mvc-lupa"><a class="anchor" href="#comandos-del-add-on-web-mvc-lupa"></a>A.14. Comandos del add-on WEB MVC Lupa</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_campos_lupa">add-on Lupa</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 14. Comandos de Addo-on Componentes Lupa</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_loupe_setup">web mvc loupe setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Este comando importará a nuestro proyecto todos los recursos necesarios
para utilizar componentes lupa.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_loupe_set">web mvc loupe set</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Este comando nos permite generar los métodos necesarios para la
búsqueda y visualización de registros del componente lupa en el
controlador seleccionado.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_loupe_field">web mvc loupe field</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Este comando nos permite transformar a componente lupa cualquier campo
válido de la entidad a la que está asociado el Controlador en el que se
han generado los métodos de lupa.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_web_mvc_loupe_update">web mvc loupe
update</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Este comando nos permite mantener actualizados todos los
componentes importados mediante el comando de instalación.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="web-mvc-loupe-setup"><a class="anchor" href="#web-mvc-loupe-setup"></a>A.14.1. web mvc loupe setup</h5>
<div class="paragraph">
<p>Este comando importará a nuestro proyecto todos los recursos necesarios
para utilizar componentes lupa.</p>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-loupe-set"><a class="anchor" href="#web-mvc-loupe-set"></a>A.14.2. web mvc loupe set</h5>
<div class="paragraph">
<p>Este comando nos permite generar los métodos necesarios para la búsqueda
y visualización de registros del componente lupa en el controlador
seleccionado.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--controller</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre y ruta del Controlador sobre el cual queremos generar los nuevo
métodos de búsqueda para el componente lupa.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-loupe-field"><a class="anchor" href="#web-mvc-loupe-field"></a>A.14.3. web mvc loupe field</h5>
<div class="paragraph">
<p>Este comando nos permite transformar a componente lupa cualquier campo
válido de la entidad a la que está asociado el Controlador en el que se
han generado los métodos de lupa.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--controller</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre y ruta del Controlador que ya dispone de los métodos generados.</p>
</dd>
<dt class="hdlist1">--field</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre del campo que queremos transformar a componente lupa en la
vista de creación y actualización de la capa web.</p>
</dd>
<dt class="hdlist1">--additionalFields</dt>
<dd>
<p><em>[Cadena]</em>
+
Campos adicionales de la entidad sobre los que se realizará la
búsqueda cuando el usuario escriba en el componente lupa. Si no se
especifica ningún valor solo será posible buscar por id.</p>
</dd>
<dt class="hdlist1">--baseFilter</dt>
<dd>
<p><em>[Cadena]</em>
+
Filtro base que se aplica a todas las búsquedas realizadas en el
componente lupa.</p>
</dd>
<dt class="hdlist1">--caption</dt>
<dd>
<p><em>[Cadena]</em>
+
Campo de la entidad relacionada que se mostrará en el desplegable del
componente lupa cuando se encuentré un resultado.</p>
</dd>
<dt class="hdlist1">--listPath</dt>
<dd>
<p><em>[Cadena]</em>
+
Opcionalmente, añadiendo la ruta del fichero a este comando, se puede
mostrar un listado distinto al generado por defecto para cada
controlador.</p>
</dd>
<dt class="hdlist1">--max</dt>
<dd>
<p><em>[Cadena]</em>
+
Se especifica el número máximo de resultados que se quiere mostrar en
el desplegable del componente lupa. Por defecto se muestran los 3
primeros resultados obtenidos.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="web-mvc-loupe-update"><a class="anchor" href="#web-mvc-loupe-update"></a>A.14.4. web mvc loupe update</h5>
<div class="paragraph">
<p>Este comando mantiene actualizados todos los componentes que se importan
al proyecto gvNIX al realizar la instalación del add-on.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comandos-del-add-on-monitoring"><a class="anchor" href="#comandos-del-add-on-monitoring"></a>A.15. Comandos del add-on Monitoring</h4>
<div class="paragraph">
<p>Para una descripción detallada de las características del add-on
consultar la documentación del <a href="#_add_on_monitoring">add-on
Monitoring</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 15. Comandos del add-on Monitoring</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_monitoring_setup">monitoring
setup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instala las dependencias de JavaMelody además de configurar el
proyecto con lo necesario para su funcionamiento.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_monitoring_all">monitoring all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Establece todas las clases del proyecto para ser monitorizadas a través
de Spring.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_monitoring_add_class">monitoring
add class</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade la monitorización a una clase determinada.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_monitoring_add_method">monitoring
add method</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade la monitorización de un método de una clase. Es
posible que si se trata de una clase controlador y el método que
deseamos monitorizar está incluido en el .aj no funcione, para
solucionarlo bastará con hacer push-in del método previo a ejecutar el
comando.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_monitoring_add_package">monitoring
add package</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Añade la monitorización a un paquete determinado.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="monitoring-setup"><a class="anchor" href="#monitoring-setup"></a>A.15.1. monitoring setup</h5>
<div class="paragraph">
<p>Instala las dependencias de JavaMelody además de configurar el proyecto
con lo necesario para su funcionamiento.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--path</dt>
<dd>
<p><em>[Cadena]</em>
+
Ruta de la carpeta donde se guardaran los datos de la monitorización
dentro del servidor.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="monitoring-all"><a class="anchor" href="#monitoring-all"></a>A.15.2. monitoring all</h5>
<div class="paragraph">
<p>Establece todas las clases del proyecto para ser monitorizadas a través
de Spring.</p>
</div>
</div>
<div class="sect4">
<h5 id="monitoring-add-class"><a class="anchor" href="#monitoring-add-class"></a>A.15.3. monitoring add class</h5>
<div class="paragraph">
<p>Añade la monitorización a una clase determinada.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Ruta de la clase sobre la que se va a establecer la monitorización.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="monitoring-add-method"><a class="anchor" href="#monitoring-add-method"></a>A.15.4. monitoring add method</h5>
<div class="paragraph">
<p>Añade la monitorización de un método de una clase. Es posible que si se
trata de una clase controlador y el método que deseamos monitorizar está
incluido en el .aj no funcione, para solucionarlo bastará con hacer
push-in del método previo a ejecutar el comando.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--name</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Nombre del método de la clase que se va a establecer la
monitorización.</p>
</dd>
<dt class="hdlist1">--class</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Ruta de la clase sobre cuyo método se va a establecer la
monitorización.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="monitoring-add-package"><a class="anchor" href="#monitoring-add-package"></a>A.15.5. monitoring add package</h5>
<div class="paragraph">
<p>Añade la monitorización a un paquete determinado.</p>
</div>
<div class="paragraph">
<p>Sus parámetros son:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--path</dt>
<dd>
<p><em>[Requerido] [Cadena]</em>
+
Ruta del paquete sobre cuyas clases se va a establecer la
monitorización.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="desarrollo-con-eclipse"><a class="anchor" href="#desarrollo-con-eclipse"></a>Appendix B: Desarrollo con eclipse</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="instalación-3"><a class="anchor" href="#instalación-3"></a>B.1. Instalación</h4>
<div class="paragraph">
<p>Spring ha desarrollado una extensión para Eclipse llamada SpringSource
Tool Suite o STS, que ofrece soporte para trabajar en Eclipse con
aplicaciones de Spring, entre ellas Spring Roo y por tanto gvNIX. Entre
otras funcionalidades incorpora un intérprete de comandos de Roo que
permite ejecutar órdenes sin necesidad de salir de Eclipse.</p>
</div>
<div class="paragraph">
<p>Hay dos formas de instalar STS, la primera es como una distribución
propia y la segunda es como un plugin de un Eclipse ya existente. Se
recomienda encarecidamente utilizar la primera de ellas por su facilidad
de instalación y mejor rendimiento.</p>
</div>
<div class="sect4">
<h5 id="sts-como-distribución"><a class="anchor" href="#sts-como-distribución"></a>B.1.1. STS como distribución</h5>
<div class="paragraph">
<p><em>Para instalar el IDE como una distribución propia realizar los
siguientes pasos:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Descargar la última versión de Springsource Tool Suite desde
<a href="#"><a href="http://spring.io/tools" class="bare">http://spring.io/tools</a></a></p>
</li>
<li>
<p>Descomprimir el archivo descargado y moverlo a una carpeta, por
ejemplo $HOME/software.</p>
</li>
<li>
<p>Ejecutar STS
($HOME/software/springsource-X.X.X/sts-X.X.X.RELEASE/STS). Tener en
cuenta que STS es una aplicación Java por lo que requiere tener una
máquina virtual Java instalada en el sistema.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="sts-como-plugin"><a class="anchor" href="#sts-como-plugin"></a>B.1.2. STS como plugin</h5>
<div class="paragraph">
<p><em>Para instalar el IDE en un Eclipse existente seguir los siguientes
pasos:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Si no se dispone todavía de él, descargar Eclipse IDE for Java EE
Developers de <a href="#"><a href="http://www.eclipse.org/downloads/" class="bare">http://www.eclipse.org/downloads/</a></a></p>
</li>
<li>
<p>Crear la variable de classpath de Eclipse M2_REPO, para ello:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><em>Window &gt; Preferences &gt; Java &gt; Build Path
&gt; Classpath Variables</em></strong>, botón <em>`New&#8230;&#8203;`</em>.</p>
</li>
<li>
<p>Definir los siguientes valores:</p>
<div class="ulist">
<ul>
<li>
<p><em>`Name`</em> = <em>`M2_REPO`</em>.</p>
</li>
<li>
<p><em>`Path`</em> = directorio correspondiente al repositorio de Maven
(normalmente en Unix: $HOME/.m2/repository)</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Ok</em> para crear la variable, y <em>Ok</em> de nuevo para cerrar la ventana
de preferencias y guardar cambios.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Instalar plugin M2Eclipse para Eclipse
(<a href="http://m2eclipse.sonatype.org/installing-m2eclipse.html" class="bare">http://m2eclipse.sonatype.org/installing-m2eclipse.html</a>)</p>
<div class="paragraph">
<p>En el menú Help &gt; Install New Software, en el campo de texto "Work
with:" indicar que se usará el site:
<a href="#"><a href="http://m2eclipse.sonatype.org/sites/m2e" class="bare">http://m2eclipse.sonatype.org/sites/m2e</a></a>. A continución
eleccionar "Maven Integration for Eclipse". Pulsar en siguiente y tras
aceptar la licencia del plugin instalar.</p>
</div>
</li>
<li>
<p>Activa la opción <em>`Enable Window &gt; Preferences &gt; General &gt;
Workspace &gt; Refresh Automatically`</em>.</p>
</li>
<li>
<p>Opcionalmente, instalar el plugin Subeclipse para trabajar sobre el
sistema de control de versiones Subversion (SVN).</p>
<div class="paragraph">
<p>Para ello en Eclipse, en el menú <em>Help &gt; Install New Software</em>. En la
ventana que se abre hacer click sobre el botón <em>Add</em> que hay a la
derecha de <em>Work with</em>. Se abre un diálogo en el que se indicará como
nombre Subeclipse por ejemplo y en la URL indicar
<em><a href="http://subclipse.tigris.org/update_1.6.x" class="bare">http://subclipse.tigris.org/update_1.6.x</a></em> guardar con <em>OK</em> y la ventana
anterior empezará la carga de los plugins que hay disponibles.
Seleccionarlos y seguir haciendo click en <em>Next</em>. La URL indicada es de
la versión actual, revisar el sitio oficial de <a href="http://subclipse.tigris.org/">Subeclipse</a> para
más información y futuras versiones.</p>
</div>
</li>
<li>
<p>Para instalar el plugin STS seguir las instrucciones del punto "UPDATE
SITE INSTALLATION" del documento <em>Spring Source Tool Suite Installation
Instructions</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="integrar-soporte-roo-en-sts"><a class="anchor" href="#integrar-soporte-roo-en-sts"></a>B.1.3. Integrar soporte ROO en STS</h5>
<div class="paragraph">
<p>Spring Roo ya no está incluido en la distribución de STS a partir de su
versión <em>3.6.0</em>, por ello necesitaremos instalar este soporte para poder
trabajar con gvNIX.</p>
</div>
<div class="paragraph">
<p>Para incluir este soporte, sigue los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abre tu STS</p>
</li>
<li>
<p>Abre el dashboard del STS y busca Spring ROO</p>
</li>
<li>
<p>Instala <em>Spring Roo (current production release)</em> y <em>Spring IDE -
Roo Extension</em></p>
</li>
<li>
<p>Reinicia tu STS</p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/sts_install.jpeg" alt="Integrando soporte ROO en STS">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="consola-gvnix-roo-integrada-en-eclipse"><a class="anchor" href="#consola-gvnix-roo-integrada-en-eclipse"></a>B.2. Consola gvNIX / Roo integrada en Eclipse</h4>
<div class="paragraph">
<p>El plugin o distribución de STS instalado ofrece la posibilidad de
incluir la consola de ROO en el propio entorno de desarrollo. Para
ello antes hay que indicarle a Eclipse donde está instalada la nueva
versión de ROO.</p>
</div>
<div class="paragraph">
<p>En el menú <em>Window &gt; Preferences &gt; Spring &gt; Roo Support</em>. Pulsar sobre
el botón Add y buscar en el navegador de archivos el lugar donde está
instalado ROO. Aparecerá una pantalla similar a la siguiente:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/preferences_roo.png" alt="Configuración del soporte gvNIX en Eclipse">
</div>
</div>
<div class="paragraph">
<p>Presionando en OK sobre las dos pantallas que abiertas ya estará
configurado el soporte para la linea de comandos de ROO. Para poder
usarlo abrir la perspectiva de Spring con <em>Window &gt; Open Perspective &gt;
Other &gt; Spring</em>. En la parte inferior de la pantalla aparecerá una
pestaña llamada Roo Shell. Si no apareciese la pestaña, puede abrirse
seleccionando <em>Window &gt; Show View &gt; Roo Shell.</em></p>
</div>
<div class="paragraph">
<p>Para abrir la consola pulsar en el botón que aparece en la parte
superior derecha de la pestaña con el título <em>Open Roo Shell.</em> Entonces
seleccionar el proyecto en el que se va a trabajar y ya se puede empezar
a ejecutar comandos. Si no se dispone todavía de ningún proyecto, en el
punto siguiente se verá como crear un nuevo proyecto.</p>
</div>
<div class="paragraph">
<p>La ejecución de comandos también se puede hacer de forma gráfica
pulsando en el botón que aparece en la parte superior derecha de la
pestaña con el título Open Roo Command Wizard.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_gvNIX_shell.png" alt="Consola gvNIX en Eclipse">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Hay que tener en cuenta una pequeña diferencia a la hora de usar la
línea de comandos desde Eclipse con respecto a la linea de comandos de
gvNIX en la consola del sistema. Mientras en una consola del sistema se
utiliza la tecla TAB para completar los comandos, en el IDE se utilizará
Ctrl+Space que es el atajo por defecto usado en Eclipse.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="utilizar-eclipse-como-ide"><a class="anchor" href="#utilizar-eclipse-como-ide"></a>B.3. Utilizar Eclipse como IDE</h4>
<div class="sect4">
<h5 id="crear-proyecto-gvnix-en-eclipse-ide"><a class="anchor" href="#crear-proyecto-gvnix-en-eclipse-ide"></a>B.3.1. Crear proyecto gvNIX en Eclipse IDE</h5>
<div class="paragraph">
<p>Crear un proyecto gvNIX desde Eclipse a través del menú: <em>File &gt; New &gt;
Spring Roo Project</em>:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_new_roo_project.png" alt="Nuevo proyecto Spring Roo con soporte gvNIX">
</div>
</div>
<div class="paragraph">
<p>Esta primera pantalla habrá ejecutado de forma automática el comando de
creación de un nuevo proyecto:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>project setup --topLevelPackage com.gvnix.tenminutes</pre>
</div>
</div>
<div class="paragraph">
<p>En este punto ya se dispone de un proyecto Maven preparado.</p>
</div>
<div class="paragraph">
<p>A continuación, añadir el soporte para el manejo de la persistencia de
datos a través de JPA. El siguiente ejemplo muestra los comandos que se
deben usar para configurar el soporte JPA. Recordar que se puede usar
Ctrl+Space como ayuda a la escritura en los comandos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt; jpa setup --provider HIBERNATE --database HYPERSONIC_IN_MEMORY
Created ...
roo&gt; entity jpa --class ~.domain.Timer --testAutomatically
Created ...
~.domain.Timer roo&gt; field string --fieldName message --notNull
Managed ...</pre>
</div>
</div>
<div class="paragraph">
<p>El comando <strong>jpa setup</strong> permite configurar la capa de acceso a datos de
manera sencilla. El comando <strong>entitiy jpa</strong> sirve para crear una nueva
entidad y <strong>field</strong> crea atributos en la entidad. Estos comandos se verán
con más detalle en la sección
<a href="#_persistencia_de_objetos">Persistencia de
objetos</a> y
<a href="#guia-desarrollo_gestion-entidades_definicion_crear-con-comando">Crear
una entidad con el intérprete de comandos</a>, también se verá como generar
todas las entidades de una aplicación mediante el proceso de ingeniería
inversa contra un esquema de BBDD existente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~.domain.Timer roo&gt; web mvc setup
~.domain.Timer roo&gt; web mvc all --package ~.web
Created ...</pre>
</div>
</div>
<div class="paragraph">
<p>Los comandos <strong>web mvc</strong> crean la capa capa web que gestionaran la
interacción del usuario con la aplicación. Se verán con más detalle en
<a href="#_web_mvc_controller">Crear la capa web con el
intérprete de comandos</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~.web roo&gt; selenium test --controller ~.web.Time</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="importar-proyecto-gvnix-en-eclipse"><a class="anchor" href="#importar-proyecto-gvnix-en-eclipse"></a>B.3.2. Importar proyecto gvNIX en Eclipse</h5>
<div class="paragraph">
<p>gvNIX/Roo permite crear proyectos desde la linea de comandos, aunque
puede suceder que se necesite importar un proyecto ya existente en el
IDE. Si se está ejecutando gvNIX en la línea de comandos, bastaría con
ejecutar el comando <code>perform eclipse</code> para crear una estructura de
proyecto Eclipse:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~.domain.PizzaOrder roo&gt; perform eclipse</pre>
</div>
</div>
<div class="paragraph">
<p>Este comando termina ejecutando el comando del
sistema`mvn eclipse:eclipse` en el proyecto, por lo que es indiferente
el uso de cualquiera de los dos métodos. Tener en cuenta que este último
comando necesita tener configurado Maven.</p>
</div>
<div class="paragraph">
<p>Ahora se puede importar en el entorno de trabajo mediante
<code>File &gt; Import &gt; General &gt; Existing Projects
      into workSpace</code>. Si aparece el mensaje <em>Turn Weaving Service on?</em>,
marcar la casilla <em>Don&#8217;t ask again until next upgrade</em> y clic en <em>Yes</em>
(será necesario reiniciar Eclipse).</p>
</div>
<div class="paragraph">
<p>También es posible borrar la configuración de eclipse ejecutando el
comando <code>mvn eclipse:clean</code> en una consola del sistema que tenga
configurada Maven. Para regenerar la configuración de eclipse en un solo
comando usar <code>mvn eclipse:clean eclipse:eclipse</code>.</p>
</div>
<div class="paragraph">
<p>Al importar un proyecto en Eclipse es importante comprobar que dicho
proyecto tiene configuradas las características de proyecto Maven y
proyecto de aspectos java. Esto aparece de forma visual en el proyecto
mediante unas pequeñas letras M y AJ. Si no apareciesen se pueden añadir
estas características seleccionando el proyecto y con el segundo botón
del ratón eligiendo la opción <em>Configure</em>. Esto es muy importante ya que
en el caso de no estar correctamente configurado nos aparecerán falsos
errores en el proyecto.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="generación-de-pruebas-de-integración"><a class="anchor" href="#generación-de-pruebas-de-integración"></a>B.4. Generación de pruebas de integración</h4>
<div class="paragraph">
<p>El comando <em>entity jpa</em> dispone de la opción testAutomatically que al
ser especificada generará los test de integración para dicha entidad
usando JUnit.</p>
</div>
<div class="paragraph">
<p>Si los tests no fueron creados en el momento de la ejecución del comando
<em>entity</em>, pueden ser generados con posterioridad mediante otro comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt; test integration --entity ~.domain.Timer</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="arrancar-la-aplicación-con-eclipse"><a class="anchor" href="#arrancar-la-aplicación-con-eclipse"></a>B.5. Arrancar la aplicación con Eclipse</h4>
<div class="paragraph">
<p>Es posible arrancar la aplicación desde el propio Eclipse y, además de
permitir depurarla, permite hacer cambios en caliente sobre la
aplicación.</p>
</div>
<div class="paragraph">
<p>Para ello, debemos tener la aplicación importada en un <em>workspace</em> de
Eclipse y configurar el servidor dónde ejecutarlo. Eclipse es capaz de
gestionar distinto tipos de servidores, generando sus propios directorio
y ficheros de configuración.</p>
</div>
<div class="paragraph">
<p>Para prepara un servidor seguir los siguiente pasos:</p>
</div>
<div class="sect4">
<h5 id="mostrar-la-vista-de-servidores-en-eclipse"><a class="anchor" href="#mostrar-la-vista-de-servidores-en-eclipse"></a>B.5.1. Mostrar la Vista de Servidores en Eclipse</h5>
<div class="paragraph">
<p>Eclipse tiene una vista que permite ver los distintos servidores
configurados y gestionarlos desde ahí. Estos son los pasos para mostrar
la vista</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra la opción del menú <code>Window &gt; Show view &gt;
Other..</code>..</p>
</li>
<li>
<p>Busque la vista llamada <code>Servers</code> y pulse el botón <code>Ok</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="crear-un-nuevo-servidor"><a class="anchor" href="#crear-un-nuevo-servidor"></a>B.5.2. Crear un nuevo Servidor</h5>
<div class="paragraph">
<p>Se pueden definir múltiples entornos de ejecución para los servidores.
Esta configuración incluye el tipo de servidor (Tomcat, Jetty, JBoss,
etc..), Máquina Virtual Java (JRE 1.5, JRE 1.6, etc&#8230;&#8203;) y la ruta a los
binarios del servidor.</p>
</div>
<div class="paragraph">
<p>Cabe destacar que eclipse <strong>no usa la configuración que exista en la
instalación del servidor</strong> en la mayoría de los casos. Solo usa los
ejecutables para arrancarlo con ficheros de configuración que almacena
en el propio workspace.</p>
</div>
<div class="paragraph">
<p>En este caso, vamos a preparar el entorno para Tomcat 6 siguiendo los
pasos indicados a continuación:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Dentro de la pestaña Servers, pinchar con el segundo botón del ratón
y seleccionar New &gt; Server.</p>
</li>
<li>
<p>Seleccionar <code>Apache Tomcat
v6.0 Server</code> de la lista de tipos y pulsar el botón <code>Next</code>.</p>
<div class="paragraph">
<p>En el caso en que no aparezca ningún tipo de servidor o no aparezcan los
de Apache Tomcat se ha de realizar lo siguiente:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ir a <code>Help &gt; Install New
Software&#8230;&#8203;</code>.</p>
</li>
<li>
<p>Desmarcar la casilla "<em>Hide items that are already installed.</em>"</p>
</li>
<li>
<p>En "<em>Work With</em>" seleccionar el sitio "<em>Eclipse Web Tools Platform
Repository</em> - <em><a href="http://download.eclipse.org/webtools/updates/" class="bare">http://download.eclipse.org/webtools/updates/</a></em>" (si no
aparece, añadirlo usando el botón <code>Add&#8230;&#8203;</code>.)</p>
</li>
<li>
<p>En el listado de software desplegar <code>Web Tools
              Platform Tests (WST Tests)</code> (si hay más de un <em>WST Tests</em>
seleccionar el de la última versión).</p>
</li>
<li>
<p>Instalar (seleccionándolos) <code>WST Server
              tests</code> y <code>JST Server Tests</code> (si ya están instalado
aparecerá su icono en gris)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Introducir un nombre para la configuración.</p>
</li>
<li>
<p>Seleccionar el directorio donde se encuentra una instalación de
Tomcat 6. Si no se dispone de ninguna instalación de Tomcat 6 crear un
nuevo directorio, seleccionarlo y pulsar sobre el botón Download and
Install &#8230;&#8203; que pasados unos segundos terminará la descarga y permitirá
continuar.</p>
</li>
<li>
<p>Seleccionar la máquina virtual Java con la que ejecutar el servidor.</p>
</li>
<li>
<p>Pulsar el botón Next.</p>
</li>
<li>
<p>Añadir las aplicaciones a ejecutar en este servidor de entre las
disponibles.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="ajustar-la-configuración-del-servidor"><a class="anchor" href="#ajustar-la-configuración-del-servidor"></a>B.5.3. Ajustar la configuración del Servidor</h5>
<div class="paragraph">
<p>Puede ser necesario ajustar algunas opciones de la configuración del
servidor. Para poder acceder a dichas opciones hay que seleccionar el
servidor desde la pestaña de servidores y, con el botón derecho del
ratón sobre él pulsar <code>Open</code>.</p>
</div>
<div class="paragraph">
<p>Desde el panel abierto podremos gestionar:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Datos generales del servidor.</p>
</li>
<li>
<p>Opciones de publicación y seguridad.</p>
</li>
<li>
<p>TimeOuts (muy útil si se está depurando algún proceso de arranque).</p>
</li>
<li>
<p>Puertos</p>
</li>
<li>
<p>Configuración de tipos MIME.</p>
</li>
<li>
<p>Las aplicaciones/modulos a lanzar (admite módulos externos).</p>
</li>
<li>
<p>Configuración de arranque del servidor.</p>
<div class="paragraph">
<p>El servidor Tomcat arranca con cierta cantidad de memoria que no
soportar mas de 4 cambios en el proyecto antes de llenarse y dejar de
funcionar. Para evitar esto, se puede incrementar la cantidad de memoria
con la que arranca Tomcat.</p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Es muy interesante modificar los parámetros de memoría con los que
trabaja el servidor. Para ello:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>En la pantalla de opciones de la configuración del servidor acceder a
<em>Open launch configuration</em></p>
</li>
<li>
<p>En la nueva ventana, en la pestaña <em>Arguments</em> añadir al final del
texo que aparece en el apartado <em>VM Arguments</em> lo siguiente:
<code>-Xms64m -Xmx256m -XX:MaxPermSize=128m
            -XX:PermSize=128m</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ejecución-de-la-aplicación-en-el-servidor"><a class="anchor" href="#ejecución-de-la-aplicación-en-el-servidor"></a>B.5.4. Ejecución de la aplicación en el Servidor</h5>
<div class="paragraph">
<p>Una vez configurado el servidor, se podrá añadir a este la aplicación
que se desea ejecutar en él. Se puede ejecutar más de una a la vez. En
la vista Servers, pulsar con el botón derecho sobre el servidor deseado
y seleccionar la opción <em>Add and Remove &#8230;&#8203;</em>. En el diálogo que se abre
seleccionar de la lista de la izquierda la aplicación y pulsar el botón
<em>Add</em>. Por último, cerrar el diálogo con <em>Finish</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_servers-addremoveapp.png" alt="Añadir / Eliminar aplicaciones al Servidor">
</div>
</div>
<div class="paragraph">
<p>Ya es posible arrancar el servidor y probar la aplicación.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_servers.png" alt="Vista de servidores disponibles en el workspace de Eclipse">
</div>
</div>
<div class="paragraph">
<p>En la imagen anterior se observa un servidor Tomcat 6 con la aplicación
<em>tenminutes</em> disponible para ejecutar. Con los botones disponibles se
puede arrancar la aplicación en modo debug, arrancar la aplicación de
manera normal (botón verde con triángulo blanco en el centro), arrancar
en modo profile, pararlo o re-publicar los cambios del proyecto en el
servidor.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_servers-buttons.png" alt="Botones de la vista servidores de Eclipse">
</div>
</div>
<div class="paragraph">
<p>Una vez arrancado el servidor se podrá navegar por la aplicación bien
desde un navegador externo (Firefox) o bien desde un navegador propio
que incorpora Eclipse accediendo a la dirección
<a href="#"><a href="http://localhost:8080/tenminutes" class="bare">http://localhost:8080/tenminutes</a></a>. Observar que el final de la
dirección se corresponde con el nombre de la aplicación proporcionado al
crear el proyecto. Para abrir el navegador interno de Eclipse utilizar
<em>Window &gt; Show view &gt; Internal Web Browser</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_browser.png" alt="Navegador interno de Eclipse">
</div>
</div>
<div class="paragraph">
<p>Ejecutar la apliación desde Eclipse puede ser muy útil a la hora de
hacer cambios en el proyecto, modificaciones en las vistas, en los
objetos de aplicación, bien desde el propio IDE o desde la línea de
comandos de gvNIX, ya que automáticamente se verán reflejados los
cambios en el navegador.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="trabajando-con-el-código-de-la-aplicación-en-eclipse"><a class="anchor" href="#trabajando-con-el-código-de-la-aplicación-en-eclipse"></a>B.6. Trabajando con el código de la aplicación en Eclipse</h4>
<div class="paragraph">
<p>Al generar un proyecto con gvNIX/Roo habrá que trabajar sobre el código
de la aplicación para añadir más funcionalidades y/o modificar alguna de
las que se han generado. A continuación se explicarán un par de detalles
que simplificaran esta tarea usando Eclipse y el plugin STS instalado.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_crossreference.png" alt="Vista de editor y Cross References en Eclipse">
</div>
</div>
<div class="paragraph">
<p>En la imagen anterior se observa el editor de Eclipse con el archivo
Timer.java que se ha generado al ejecutar los comandos <em>entity</em> y
<em>field</em> anteriores. En la parte derecha de la captura se ve una ventana
que muestra información de la clase Timer. Se trata de la vista <em>Cross
Reference</em>. Si no está disponible en la perspectiva de trabajo, se puede
incorporar desde el menú <em>Window &gt; Show view &gt; Cross References</em>. Esta
vista es similar a la vista <em>Outline</em> que muestra los campos y métodos
declarados en una clase.</p>
</div>
<div class="paragraph">
<p>La particularidad de la vista Cross References es que muestra los campos
y métodos asociados a la clase Java mediante aspectos java que se verán
en el Cápitulo sobre el
<a href="#_código_generado_por_gvnix_roo">código que genera gvNIX/Roo</a>.</p>
</div>
<div class="paragraph">
<p>Esta información también está disponible desde un menú contextual
accesible haciendo click con el botón derecho sobre la flecha que hay a
la izquierda de la declaración de la clase. El menú contextual es el
siguiente.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_cross-contextual.png" alt="Contextual Cross References">
</div>
</div>
<div class="paragraph">
<p>Haciendo click sobre una de las entradas que aparecen en la ventana
<em>Cross References</em> o en el menú contextual, se abrirá el fichero .aj que
tiene declarado ese campo o método. Por ejemplo, si se accede al método
<em>Timer.toString()</em> se abrirá el editor con el archivo
<em>Timer_Roo_ToString.aj</em>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Cabe destacar que para que aparezca esta información sobre el código
asociado a una clase Java mediante aspectos java, la clase debe estar
libre de errores de compilación.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="modificación-del-código-generado"><a class="anchor" href="#modificación-del-código-generado"></a>B.6.1. Modificación del código generado</h5>
<div class="paragraph">
<p>Como se ha comentado, seguramente será necesario añadir nuevas
funcionalidades o modificar algunas de las que se han generado
automáticamente para adaptar el código a los requisitos de la
aplicación. En estos casos hay que tener en cuenta que <strong>no se debe hacer
ningún cambio sobre los aspectos java (ficheros aj) asociados a una
clase Java</strong>. gvNIX/Roo ya nos lo avisa en la primera línea del archivo
.aj. El motivo de esto es, que teniendo la consola gvNIX funcionando, o
al arrancar, gvNIX/Roo volvería a generar el código automáticamente
perdiendo las modificaciones que hubiésemos realizado.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_edicion-aj.png" alt="Edición archivo Timer_Roo_ToString.aj">
</div>
</div>
<div class="paragraph">
<p>Para modificar el código de un método o la declaración de un campo que
se encuentre en un aspecto java, se puede mover el método o el campo a
la clase Java, del que depende el aspecto java. En el ejemplo, se
movería a la clase <em>Timer.java</em>. Puede realizarse cortando y pegando,
pero Eclipse con el plugin STS ofrece una opción mucho más adecuada para
esto.</p>
</div>
<div class="paragraph">
<p>Seleccionando el nombre del método a mover y a través del menú
contextual <em>AspectJ Refactoring &gt; Push In &#8230;&#8203;</em> Eclipse se ocupará de
eliminar el código del .aj y moverlo al .java.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/eclipse_pushincontextual.png" alt="Menú contextual AspecJ Refactoring">
</div>
</div>
<div class="paragraph">
<p>Una vez en el .java, se podrá hacer cuantas modificaciones se necesiten
sin peligro de que se pierdan por la acción de gvNIX/Roo.</p>
</div>
<div class="paragraph">
<p>Del mismo modo, si se necesita añadir nuevos métodos o campos a la clase
Java, se debe hacer directamente en el .java.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Es interesante tener abierta la consola gvNIX para que los cambios
realizados sobre los ficheros del proyecto disparen los cambios
automáticos que realiza gvNIX/Roo.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="recetas"><a class="anchor" href="#recetas"></a>Appendix C: Recetas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En este capítulo se verá como realizar algunas modificaciones sobre el
código generado para adaptar la aplicación a distintos requerimientos
habituales dada la experiencia de uso del framework.</p>
</div>
<div class="sect3">
<h4 id="repositorios-maven"><a class="anchor" href="#repositorios-maven"></a>C.1. Repositorios Maven</h4>
<div class="paragraph">
<p>Cuando una funcionalidad generada por el framework requiere de librerías
externas, el add-on correspondiente registrará el repositorio de
artefactos Maven necesario en el fichero <em>pom.xml</em>, si todavía no lo
estaba.</p>
</div>
<div class="paragraph">
<p>No es habitual, pero en el caso de ser necesario añadir algún
repositorio adicional al proyecto puede realizarse mediante el comando
de la consola
<a href="http://static.springsource.org/spring-roo/reference/html-single/index.html#command-index-maven-repository-add">maven
repository add</a>. El siguiente ejemplo define el repositorio Maven
interno de la Conselleria de Infraestructuras, Transporte y Medio
Ambiente. Este repositorio es accesible únicamente desde la red interna
de la Conselleria.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt; maven repository add --id citma-maven --name "CITMA Maven Repository"
        --url http://benigno.coput.gva.es:8081/nexus/content/groups/public
Updated ROOT/pom.xml [
        added repository http://benigno.coput.gva.es:8081/nexus/content/groups/public]</pre>
</div>
</div>
<div class="paragraph">
<p>El comando modificará el fichero pom.xml y en la sección
<em>&lt;repositories&gt;</em> añadirá la definición del repositorio indicado.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;repositories&gt;
    ...
    &lt;repository&gt;
        &lt;id&gt;citma-maven&lt;/id&gt;
        &lt;url&gt;http://benigno.coput.gva.es:8081/nexus/content/groups/public&lt;/url&gt;
        &lt;name&gt;CITMA Maven Repository&lt;/name&gt;
    &lt;/repository&gt;
    ...
&lt;/repositories&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>En el lado opuesto, también es posible eliminar repositorios Maven del
proyecto mediante el comando
<a href="http://static.springsource.org/spring-roo/reference/html-single/index.html#command-index-maven-repository-remove">maven
repository remove</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="desarrollo-de-buscadores-con-gran-cantidad-de-campos"><a class="anchor" href="#desarrollo-de-buscadores-con-gran-cantidad-de-campos"></a>C.2. Desarrollo de buscadores con gran cantidad de campos</h4>
<div class="paragraph">
<p>El add-on de los buscadores (finder) tiene una limitación impuesta por
el sistema operativo Windows en el tamaño máximo del nombre de archivos.
La limitación del tamaño máximo del nombre de archivo limita al comando
<em>finder add</em> a generar nombres de buscadores que generen paths a
archivos jspx de tamaño menor de 244 caracteres.</p>
</div>
<div class="paragraph">
<p>Existe una forma para generar buscadores con un tamaño superior al de la
limitación impuesta. Consiste en dividir el buscador necesario en varios
más pequeños, parciales de unos pocos campos cada uno, y al final unir
el código que se genera para cada uno de ellos en un unico método. Esto
implica tener que modificar el código que se ha generado para el
buscador en la entidad, el controlador y la jspx de la siguiente forma:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>En el archivo Java de la entidad para la que se está generando el
buscador crear un método con el nombre, por ejemplo, <em>findByTodo</em> y
cuyos parámetros de entrada serán todos los parámetros que reciben los
métodos de los buscadores parciales que se hayan generado. Del mismo
modo, el cuerpo de este nuevo método es la unión de la implementación de
todos los buscadores parciales. Es posible modificar el código, según se
explica en el siguiente apartado, de forma que los parámetros sean
opcionales.</p>
</li>
<li>
<p>De manera similar, en el fichero Java del controlador de la entidad
crear dos métodos: uno <em>findByTodoForm</em> que devolverá la vista del
formulario del buscador y otro <em>findByTodo</em> que responderá a las
peticiones que lleguen desde el formulario del buscador. Este segundo
método, al igual que en el método creado en la entidad, deberá tener
como parámetros la unión de todos parámetros de los métodos de los
buscadores parciales en el controlador. El cuerpo de este método deberá
invocar al método <em>findByTodo</em> creado en la entidad. Para definir la
anotación @RequestMapping de estos dos métodos se recomienda utilizar
como guía los buscadores parciales ya existentes.</p>
</li>
<li>
<p>Finalmente, crear una página jspx (por ejemplo, con nombre
findByTodo.jspx) en el directorio WEB-INF/views/&lt;entidad&gt; que contendrá
el formulario del buscador. Esta página debe incluir todos los campos
que hayan en el resto de páginas jspx de los buscadores parciales.
Recordar, que esta vista se ha de definir también en el fichero
views.xml que hay en la misma carpeta y que esta vista es la que
devuelve el método findByTodoForm creada anteriormente en el
controlador.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Con todo lo anterior se ha descrito un proceso manual que permite montar
buscadores con cualquier cantidad de campos.</p>
</div>
</div>
<div class="sect3">
<h4 id="campos-opcionales-en-los-buscadores"><a class="anchor" href="#campos-opcionales-en-los-buscadores"></a>C.3. Campos opcionales en los buscadores</h4>
<div class="paragraph">
<p>El comportamiento que implementa automáticamente la generación de
buscadores es hacer todos los campos de busqueda obligatorios. Por lo
tanto, si no se proporciona alguno de los parámetros se generará una
excepción indicando la falta de un parámetro obligatorio. En ocasiones
no es lo deseado, es decir, puede necesario que los parámetros no
informados simplemente no se incluyan en la consulta si no se
especifican. Para ello se debe modificar el código del método
<em>finderByXxxx</em> declarado en el aspecto Java <em>*_Roo_Finder.aj</em>. A
continuación se ejemplifica como hacer este cambio.</p>
</div>
<div class="paragraph">
<p>Hacer <em>push-in</em> del método tal y como se comenta en la sección sobre
<a href="#_código_generado_por_gvnix_roo">modificación del código generado</a>
y llevarlo al fichero Java de la entidad. Una vez allí
modificarlo para que no requiera los campos y así construir la consulta
considerando tan solo los parámetros que lleguen informados:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public static TypedQuery&lt;Owner&gt; findOwnersByLastNameLikeAndCityLike(
            String lastName, String city) {




    lastName = lastName.replace('*', '%');
    if (lastName.charAt(0) != '%') {
        lastName = "%" + lastName;
    }
    if (lastName.charAt(lastName.length() - 1) != '%') {
        lastName = lastName + "%";
    }

  }


    city = city.replace('*', '%');
    if (city.charAt(0) != '%') {
        city = "%" + city;
    }
    if (city.charAt(city.length() - 1) != '%') {
        city = city + "%";
    }

  }


  EntityManager em = Owner.entityManager();
  TypedQuery&lt;Owner&gt; q = em.createQuery(, Owner.class);

    q.setParameter("lastName", lastName);
  }

    q.setParameter("city", city);
  }
  return q;
}</pre>
</div>
</div>
<div class="paragraph">
<p>Se han marcado en negrita las líneas de código modificadas. Como puede
observarse, se construye la consulta de forma dinámica de forma que se
añaden los distintos filtros al <em>where</em> de la consulta solo si el campo
asociado al filtro tiene algún valor y se elimina la generación de
excepciones al detectar alguno de dichos campos como vacío.</p>
</div>
<div class="paragraph">
<p>En este ejemplo se ha construido la consulta usando un StringBuilder en
el que se genera la consulta deseada, pero se podría utilizar cualquier
otra tecnología como por ejemplo Hibernate Criteria Builder.</p>
</div>
<div class="paragraph">
<p>Como ya se ha comentado, el código generado fuerza que todos los
parámetros de búsqueda sean obligatorios, esto implica también al
formulario situadao en la página jspx. Tal como se genera, si alguno de
los campos no se rellena, no dejará enviar la petición. Se debe editar
la jspx y modificar el atributo <em>required</em> de los campos <em>field</em> y
establecer su valor a <em>false</em>, no olvidar cambiar el valor del atributo
<em>z</em> a "<em>user-managed</em>" para indicar que este campo ha sido
personalizado.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;field:input disableFormBinding="true" field="city"
            id="f_com_springsource_petclinic_domain_Owner_city" max="30" /&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>En los buscadores en los que uno de los parámetros sea una entidad del
modelo, es decir una relación con otra entidad del modelo, será
necesario realizar un cambio adicional. En estos casos se visualiza un
selector desplegable, mediante el componente <em>select.tagx</em>. Sin embargo,
este selector tiene el inconveniente de que no incluye una opción vacía
entre las disponibles, con lo que obliga a elegir siempre algún valor.
Un ejemplo de este caso se encuentra en el buscador findPetsByOwner
generado para la entidad Pet en el ejemplo de <em>clinic.roo</em> .</p>
</div>
<div class="paragraph">
<p>La forma de tratar estas peticiones en Spring MVC es intentar cargar el
registro asociado con el valor del selector que llega como parámetro.
Por tanto si llega como parámetro un dato que no concuerda con ningún
registro de la entidad parámetro, usará null como valor. Como se ha
comentado, el componente <em>select.tagx</em> no ofrece una opción vacía.</p>
</div>
</div>
<div class="sect3">
<h4 id="instalar-fuentes-de-letra-para-los-informes"><a class="anchor" href="#instalar-fuentes-de-letra-para-los-informes"></a>C.4. Instalar fuentes de letra para los informes</h4>
<div class="paragraph">
<p>Las fuentes instaladas automáticamente proporcionan soporte para la
inclusión de texto en negrita y cursiva. El desarrollador debe instalar
cualquier otro tipo de fuente que se utilice en los informes que diseñe.
Para ello, basta con ampliar las definiciones <em>fontFamily</em> realizadas en
el archivo <em>gvnix_reportfonts.xml</em> y copiar los archivos de fuente en la
carpeta <em>jasperfonts</em>. La inclusión de nuevas fuentes se puede realizar
utilizando una utilidad que ofrece iReport. Desde el menú <em>Herramientas
&gt; Opciones &gt; Pestaña Fonts</em> se accederá a la siguiente pantalla:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/iReportFonts.png" alt="Herramienta de gestión de fuentes de IReport">
</div>
</div>
<div class="paragraph">
<p>Desde esta pantalla, seleccionando una fuente de la lista de fuentes
instaladas en iReports y con el botón <em>"Export as extension"</em> se creará
un archivo JAR que al descomprimirlo contiene:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Directorio fonts</p>
<div class="ulist">
<ul>
<li>
<p>Archivos de fuentes en formato TTF.</p>
</li>
<li>
<p>Archivo <em>fontsfamily&lt;IdentificadorAleatorio&gt;.xml</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Archivo <em>jasperreports_extension.properties</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para instalar esta fuente en la aplicación se deben copiar los ficheros
con extensión TTF a <em>/WEB-INF/classes/jasperfonts</em> y del archivo
<em>fontsfamily&lt;IdentificadorAleatorio&gt;.xml</em> adaptar el elemento
&lt;fontFamily/&gt; para copiarlo en el archivo del proyecto
<em>gvnix_reportfonts.xml</em> (modificando las rutas para que apunten a
<em>jasperfonts</em>). El archivo <em>jasperreports_extension.properties</em> se puede
ignorar porque ya se encuentra definido en el proyecto en
<em>/WEB-INF/classes.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="diseño-de-informes-con-sub-informes"><a class="anchor" href="#diseño-de-informes-con-sub-informes"></a>C.5. Diseño de informes con sub informes</h4>
<div class="paragraph">
<p>gvNIX mediante el <a href="#_add_on_web_report">Add-on Web Report</a> facilita la
creación de informes sobre una entidad. El add-on genera el diseño de un
informe Jasper Reports básico el cual se puede modificar utilizando un
diseñador gráfico como iReport.</p>
</div>
<div class="paragraph">
<p>Puede ser necesario mostrar en un informe una lista de entidades
relacionadas con la entidad sobre la que se ha generado el informe. Por
ejemplo, en la aplicación del script de ejemplo clinic.roo, se podría
definir un informe sobre la entidad Owner y desear mostrar para cada
Owner la lista de mascotas que le pertenecen, es decir, listar la
relación definida por el campo <em>Set&lt;Pet&gt; pets</em> de la entidad Owner.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Para este ejemplo se utilizará la versión 4.0.1 de iReport.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Partiendo del informe definido por el siguiente comando de gvNIX:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>roo&gt; web report add --controller ~.web.OwnerController --reportName ownerpets</pre>
</div>
</div>
<div class="paragraph">
<p>En src/main/webapp/WEB-INF/reports se creará el archivo con el diseño
del informe <em>owner_ownerpets.jrxml</em>. Abriendo este archivo usando
iReport (<em>Archivo &gt; Open</em>) aparecerá una pantalla como la que se muestra
a continuación.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/recetas-subreport-ireport-1.png" alt="iReport - Diseñador">
</div>
</div>
<div class="paragraph">
<p>En la parte izquierda, en la pestaña con título <em>Report Inspector</em> se
pueden observar los elementos principales del diseño de informes.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/recetas-subreport-ireport-2.png" alt="iReport - Report Inspector">
</div>
</div>
<div class="paragraph">
<p>Lo primero que se debe hacer es declarar un nuevo parámetro con, por
ejemplo, el nombre <em>SubReportPetsLocation</em>. Para ello hacer click con el
botón derecho sobre el elemento <em>Parameters</em> y seleccionar la opción
<em>Agregar Parameter</em>. Justo debajo del último parámetro aparecerá uno
nuevo con nombre <em>parameter1</em>. Al seleccionarlo, en la parte derecha de
la ventana de iReport se podrán ver sus propiedades. Modificar sus
propiedades estableciendo en la propiedad_Name_ el valor
<em>SubReportPetsLocation</em> y en la propiedad <em>Parameter Class</em> el valor
<em>net.sf.jasperreports.engine.JasperReport</em>.</p>
</div>
<div class="paragraph">
<p>A continuación, añadir un elemento <em>Subreport</em> al diseño. Para que
aparezca el <em>Subreport</em> para cada elemento de la lista de Owners, se
debe añadir en la banda de detalle <em>Detail1</em> del informe. Será necesario
aumentar la altura de la banda <em>Detail1</em>. Para ello, seleccionarla y en
sus propiedad <em>Band height</em> especificar el valor <em>55</em>. De la paleta de
elementos seleccionar el <em>Subreport</em> y arrastrarlo a la banda de
detalle. Se abrirá un asistente, seleccionar la opción <em>Just create the
subreport element</em> y cerrar con <em>Terminar</em>. Es posible modificar las
dimensiones del elemento <em>Subreport</em> arrastrando las esquinas de la caja
del elemento.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/recetas-subreport-ireport-3.png" alt="iReport - Subreport">
</div>
</div>
<div class="paragraph">
<p>Antes de seguir con el establecimiento de las propiedades del Subreport,
es necesario declarar un campo del informe que permitirá acceder al
campo <em>pets</em> de la Entidad <em>Owner</em>. En <em>Report Inspector</em>, seleccionar
<em>Fields</em> y con el botón derecho <em>Agregar Field</em>. Modificar también este
elemento estableciendo en la propiedad <em>Name</em> el valor <em>pets</em> y en la
propiedad <em>Field Class</em> el valor <em>java.util.Collection</em>.</p>
</div>
<div class="paragraph">
<p>Se debe indicar cuales son las propiedades del <em>Subreport</em>. Para ello,
en la ventana de propiedades de la derecha buscar las siguientes
propiedades y establecer los valores que se especifican a continuación:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Subreport Expression = $P{SubReportPetsLocation}</p>
</li>
<li>
<p>Expression Class = net.sf.jasperreports.engine.JasperReport</p>
</li>
<li>
<p>Connection type = Use a datasource expression</p>
</li>
<li>
<p>Data Source Expression = new
net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{pets})</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>En el flujo de ejecución de un informe en Jasper Reports, los parámetros
del mismo han de ser informados antes de su visualización o, de lo
contrario, se tomarán los valores por defecto que se hubiesen definido o
<em>null</em> en su defecto. Observar que se ha definido el parámetro
<em>SubReportPetsLocation</em> y el valor que toma este parámetro en tiempo de
ejecución ha de ser una ruta absoluta al sistema de archivos o al
classpath de la aplicación.</p>
</div>
<div class="paragraph">
<p>En la sección del
<a href="#_add_on_web_report">Add-on Web Report</a> se explicó que al añadir un
informe a la aplicación, utilizando el comando 'web report add', en el
archivo 'src/main/webapp/WEB-INF/spring/jasper-views.xml' se declara un
bean que establece la ruta hasta el fichero jrxml del informe añadido.
Este bean tiene un atributo que indica el lugar donde se declaran los
subreports que se usan en los distintos informes mediante el atributo
'p:subReportsUrls-ref'.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;bean id="owner_ownerpets"
class=
 "com.springsource.petclinic.web.servlet.view.jasperreports.CustomJasperReportsMultiFormatView"
p:reportDataKey="ownerpetsList" p:url="/WEB-INF/reports/owner_ownerpets.jrxml"
p:subReportDataKeys-ref="subReportDataKeys"  /&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>El elemento anterior marcado en negrita apunta al elemento
<em>&lt;util:map/&gt;</em>, declarado también en el fichero jasper-views.xml. Aquí se
ha de especificar el valor que debe tomar el parámetro
<em>SubReportPetsLocation.</em> Modificar este elemento añadiendo una entrada,
quedando como se muestra a continuación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;util:map id=""&gt;
  &lt;!-- This entry key must be declared exactly as declared in the master JRXML file --&gt;
  &lt;!-- Add one &lt;entry /&gt; node for each sub-report you need to define --&gt;

&lt;/util:map&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>En el elemento <em>&lt;util:map/&gt;</em> se pueden definir tantos elementos
<em>&lt;entry/&gt;</em> como sea necesario para definir los parámetros que indican el
lugar donde se localizan los archivos jrxml de los distintos subreports.</p>
</div>
<div class="paragraph">
<p>Ahora se debe diseñar el informe que mostrará el listado de mascotas
(pets) que conformará el subreport.</p>
</div>
<div class="paragraph">
<p>Crear un nuevo diseño de informe (<em>Archivo &gt; Nuevo</em>), y en el asistente
seleccionar <em>Blank A4</em> y <em>Open This Template</em>. Se solicitará un nombre
para el diseño y el lugar donde guardarlo. Indicar, por ejemplo
<em>owner_ownerpets_sub_pets.jrxml</em> y guardarlo en el mismo directorio
donde se encuentre el report padre (<em>owner_ownerpets.jrxml</em>).</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/recetas-subreport-ireport-4.png" alt="iReport - Nuevo diseño">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Se debe validar que el nuevo informe se crea con el lenguage Java
configurado para las expresiones. En <em>Report Inspector</em>, al seleccionar
el primer elemento (el nombre del informe) y mirar en sus propiedades
(parte derecha de la pantalla de iReport) se debe buscar la propiedad
<em>Language</em>, si no tiene el valor Java, cambiarla usando el desplegable.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Este nuevo informe, que constituirá el subreport, es un informe a todos
los efectos, por tanto se debe definir los campos (elemento Fields del
diseño), parámetros (elemento Parameters), etc.</p>
</div>
<div class="paragraph">
<p>Al igual que se ha hecho anteriormente con el campo pets del informe
padre, definir los campos que permiten acceder a los valores de la
entidad Pet que se visualizarán en el subreport. Click con el botón
derecho sobre Fields y Agregar Field:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Crear field con nombre <em>name</em> y clase <em>java.lang.String</em></p>
</li>
<li>
<p>Crear field con nombre <em>weight</em> y clase <em>java.lang.Float</em></p>
</li>
<li>
<p>Crear field con nombre <em>type</em> y clase
<em>com.springsource.petclinic.reference.PetType</em> (enumerado declarado en
el proyecto clinic.roo)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>El diseño del informe se compone de distitnas bandas, donde se colocan
los elementos a mostrar (<em>Title, Page Header, Column Header, Detail1,
Column Footer, &#8230;&#8203;</em>). Para un subreport como el de este ejemplo, algunas
bandas son innecesarias y pueden ser eliminadas. Esto permitirá ajustar
mejor el diseño completo del informe (informe padre ownerpets<br>
subreport pets). Si se hace click con el botón derecho sobre <em>Title</em> y
se selecciona <em>Delete Band</em>, es eliminada. Hacerlo con todas las bandas
excepto con <em>Column Header, Detail1 y Summary</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/recetas-subreport-ireport-6.png" alt="iReport - Bandas subreport">
</div>
</div>
<div class="paragraph">
<p><em>Column Header</em> es una banda que se dibujará solo al inicio de la
columna del informe (en este caso solo existirá una). Añadir textos
estáticos que harán las veces de cabecera de tabla. Para ello, de la
paleta de componentes, seleccionar <em>Static Text</em> y arrastrarlo hasta la
banda <em>Column Header</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/recetas-subreport-ireport-5.png" alt="iReport - Paleta">
</div>
</div>
<div class="paragraph">
<p>En el primer <em>Static Text</em> establecer el valor <em>Nombre</em> y repetir la
misma operación para definir un texto para el campo <em>Peso</em> y para el
campo <em>Tipo</em>. Es posible distribuir las etiquetas para que quede tal y
como se muestra en la captura anterior.</p>
</div>
<div class="paragraph">
<p>A continuación, hacer lo mismo pero usando el elemento <em>Text Field</em>.
Este elemento sirve para mostrar el valor de un campo de la entidad
<em>Pet</em> y se ha de corresponder con los field definidos anteriormente
(<em>name, weight, type</em>). Estos elementos <em>Text Field</em> se definirán en la
banda <em>Detail1</em>, puesto que se repetirán para cada uno de los elementos
de la fuente de datos del subreport. Recordar que la fuente de datos de
este subreport se había definido anteriormente como
<em>JRBeanCollectionDataSource</em> usando la colección de <em>Pets</em> que
pertenecen a un <em>Owner</em>.</p>
</div>
<div class="paragraph">
<p>En los Text Field, es importante establecer correctamente la propiedad
Expression Class, esta se ha de corresponder con el tipo Java del field
definido y que se va a usar para mostrarlo. Por ejemplo, el Text Field
que mostará el peso de la mascota tendría las propiedades como sigue:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Text Field Expression = $F{weight}</p>
</li>
<li>
<p>Expression Class = java.lang.Float</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para establecer el Text Field Expression se puede utilizar el diálogo
que se muestra a continuación Este diálogo permite seleccionar elementos
de los campos definidos en el informe, de los parámetros e incluso
acceder a alguna de las operaciones que proporcionan estos objetos.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/recetas-subreport-ireport-7.png" alt="iReport - Diálogo Text Field Expression">
</div>
</div>
<div class="paragraph">
<p>Obviamente, en un <em>Text Field</em> es posible establecer expresiones más
elaboradas, como añadir a la cadena las unidades de peso. Se debe tener
en cuenta que la propiedad <em>Expression Class</em> deberá establecerse al
tipo Java resultante de la expresión (por ejemplo, $F{weight} + "kg" da
como resultado un java.lang.String). Establecer en el <em>Text Field</em>
asociado con el tipo de mascota la expresión <em>$F{type}.toString()</em> y la
clase <em>java.lang.String</em>.</p>
</div>
<div class="paragraph">
<p>Ya está diseñada la banda de detalle y para terminar el subreport,
opcionalmente, se puede definir un <em>Text Field</em> que indique cuantos
registros de <em>Pet</em> se han impreso cada vez que se ejecuta el subreport.
Esto ya se encuentra incluido en el informe padre (owners) y se consigue
utilizando la variable del report <em>REPORT_COUNT</em>, ya difinida por
defecto. Incluirla en la banda <em>Summary</em> con un <em>Text Field</em> en la que
el <em>Expression</em> tome el valor <em>$V{REPORT_COUNT}</em> y el <em>Class</em> sea
<em>java.lang.Integer</em>.</p>
</div>
<div class="paragraph">
<p>Solo queda arrancar de nuevo la aplicación, desde el Tomcat de Eclipse o
desde la línea de comandos y probar la generación del informe de Owners.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/recetas-subreport-ireport-8.png" alt="Informe Owners con subreport Pets">
</div>
</div>
<div class="paragraph">
<p>JasperReports permite gran cantidad de opciones al trabajar con
subreports (paso de parámetros desde el informe padre a los subinformes,
devolución de parámetros desde los subinformes al informe padre,
actualización de variables, &#8230;&#8203;). Para conocerlas con profundidad
consultar la documentación de referencia de Jasper Reports e iReport.</p>
</div>
</div>
<div class="sect3">
<h4 id="operaciones-durante-el-inicio-de-la-aplicación"><a class="anchor" href="#operaciones-durante-el-inicio-de-la-aplicación"></a>C.6. Operaciones durante el inicio de la aplicación</h4>
<div class="paragraph">
<p>Se pueden crear clases que se invoquen durante la inicialización de una
aplicación.</p>
</div>
<div class="paragraph">
<p>En alguna aplicación puede ser necesario realizar alguna acción durante
el inicio de una aplicación, como por ejemplo. Existen diversas formas
para hacer esto en Spring.</p>
</div>
<div class="paragraph">
<p>Sino se va a interaccionar con datos, se puede usar la anotación
@PostConstruct en un método de una clase anotada con <em>@Component</em>. Hay
que tener en cuenta que la inicialización del soporte de datos y
transacciones puede no estar todavía listo en este punto.</p>
</div>
<div class="paragraph">
<p>Crear un listener del contexto de Spring de la siguiente forma:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Component
  public class DataSeeder implements ApplicationListener&lt;ContextRefreshedEvent&gt; {

    @Override
        @Transactional
    public void onApplicationEvent(ContextRefreshedEvent event) {
        if (Model.countModels() == 0) {
            // Create initial Model values
        }
    }</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="obtener-el-bindstatus-de-un-atributo-dentro-de-un-formulario"><a class="anchor" href="#obtener-el-bindstatus-de-un-atributo-dentro-de-un-formulario"></a>C.7. Obtener el BindStatus de un atributo dentro de un formulario</h4>
<div class="paragraph">
<p>Obtener el BindStatus de un atributo dentro de un formulario:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;spring:bind path="${field}"&gt;
        &lt;c:set var="fieldValue" value="${status.value}" /&gt;
    &lt;/spring:bind&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="código-generado-por-gvnix-roo"><a class="anchor" href="#código-generado-por-gvnix-roo"></a>Appendix D: Código generado por gvNIX/Roo</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="clases-java-y-ficheros-aj"><a class="anchor" href="#clases-java-y-ficheros-aj"></a>D.1. Clases Java y ficheros AJ</h4>
<div class="sect4">
<h5 id="archivos-java"><a class="anchor" href="#archivos-java"></a>D.1.1. Archivos Java</h5>
<div class="paragraph">
<p>Por lo general, la norma que se sigue es mantener la clase Java, el
archivo .java, lo más sencillo posible y por ello, muchas veces, se
puede observar que el archivo .java está prácticamente vacio. Contiene
poco más que la declaración de la clase y anotaciones asociadas a la
misma. El resto del código, campos y métodos se declaran en sus aspectos
java de los que se hablará a continuación.</p>
</div>
</div>
<div class="sect4">
<h5 id="archivos-aj"><a class="anchor" href="#archivos-aj"></a>D.1.2. Archivos AJ</h5>
<div class="paragraph">
<p>Estos son los ficheros que genera automáticamente el framework y que
contienen las operaciones básicas, los campos definidos con sus getter y
setter, el identificador, etc. En general contine el código que un
programador haria de manera rutinaria. Estos ficheros tienen nombres
como <strong><em>Roo</em></strong>.aj y <strong><em>gvNIX</em></strong>.aj. Se trata de aspectos java que no son más
que porciones de código que al compilar el proyecto, se asocian como
código de la propia clase Java a la que están vinculadas. Si se desea
personalizar alguna de las operaciones básicas, un getter determinado o
añadir nuevas funcionalidades, estas deberán realizarse en los ficheros
.java. En los ficheros aj no se debe de hacer ningún cambio. El motivo
de esto es, que teniendo la consola funcionando, o al arrancarla, se
volvería a generar el código automáticamente perdiendo las
modificaciones que se hubiesen realizado. Y al contrario si en el
fichero .java se ha creado el getter personalizandolo, automáticamente
lo borrara del fichero .aj.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mejoras-de-rendimiento-2"><a class="anchor" href="#mejoras-de-rendimiento-2"></a>Appendix E: Mejoras de rendimiento</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="descripción-13"><a class="anchor" href="#descripción-13"></a>E.1. Descripción</h4>
<div class="paragraph">
<p>En las aplicaciones generadas en algún caso pueden requerir la
implementación de alguna pequeña mejora para mejorar su rendimiento.</p>
</div>
<div class="paragraph">
<p>Las mejoras de rendimiento no serán siempre necesarias ya que dependen
de las características de la aplicación en desarrollo.</p>
</div>
</div>
<div class="sect3">
<h4 id="patrones-de-conversión-óptimos-en-el-log"><a class="anchor" href="#patrones-de-conversión-óptimos-en-el-log"></a>E.2. Patrones de conversión óptimos en el log</h4>
<div class="paragraph">
<p>Se puede mejorar el rendimiento del sistema de log (log4j) evitando que
se muestre información innecesaria. Para ello modificar el fichero
<em>src/main/resources/log4j.properties</em> modificando el <em>ConversionPattern</em>
del appender que esté utilizando la aplicación, por ejemplo
<em>log4j.appender.stdout.layout.ConversionPattern=</em>.</p>
</div>
<div class="paragraph">
<p>El <em>ConversionPattern</em> adecuado depende del entorno en el que nos
encontremos. Será interesante disponer de mayor información en el log en
entornos de desarrollo aunque se reduzca algo el rendimiento y ofrecer
una menor información en los logs en entornos productivos. A
continuación se recomiendan unos valores adecuados para cada tipo de
entorno:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Entornos de desarrollo e integración: %d{dd/MM/yyyy HH:mm:ss.SSS} [%t] %p %c{1}.%M(%L) | %m%n
Entornos de preproducción y producción: %d{dd/MM/yyyy HH:mm:ss.SSS} [%t] %p %c{1} | %m%n</pre>
</div>
</div>
<div class="paragraph">
<p>Los distintos valores en función del entorno se pueden establecer de
forma automática mediante el <a href="#_add_on_dynamic_configuration">add-on de
configuración dinámica</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="evitar-la-carga-de-listas-de-valores-innecesarias"><a class="anchor" href="#evitar-la-carga-de-listas-de-valores-innecesarias"></a>E.3. Evitar la carga de listas de valores innecesarias</h4>
<div class="paragraph">
<p>Las vistas (páginas jspx) y los controladores (clases Java) son
generadas con toda la información necesaria para que funcionen todas las
acciones de listado, creación, actualización, borrado, búsqueda, etc.
sobre una entidad.</p>
</div>
<div class="paragraph">
<p>En algunos casos, estas pantallas son personalizadas para ocultar campos
que no son necesarios. Esto es especialmente importante en el caso de
las relaciones con otras entidades y que se representan en página como
campos desplegables.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>        ... field="propertyname" render="false" ...</pre>
</div>
</div>
<div class="paragraph">
<p>En dicho caso es recomendable evitar que se carguen las listas de datos
que no se van a utilizar ya que realizan consultas a la base de datos
innecesarias. Para ello, se puede personalizar los métodos del
controlador llamados <em>populate</em> y comentar aquellas líneas relacionadas
con el campo que se ha ocultado.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>        void populateEditForm(Model uiModel, Entity entity) {
        ...
        uiModel.addAttribute("propertyname", OtherEntity.findAllOtherEntities());
        ...
        }</pre>
</div>
</div>
</div>
</div>
</div>
<h1 id="iv-recursos" class="sect0"><a class="anchor" href="#iv-recursos"></a>IV. Recursos</h1>
<div class="sect2">
<h3 id="recursos"><a class="anchor" href="#recursos"></a>1.1. Recursos</h3>
<div class="paragraph">
<p>En este apartado pondremos una lista de recursos de documentación,
tutoriales, etc que pueden ser útiles.</p>
</div>
<div class="sect3">
<h4 id="proyecto-gvnix"><a class="anchor" href="#proyecto-gvnix"></a>1.1.1. Proyecto gvNIX</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.gvnix.org">Sitio Web</a></p>
</li>
<li>
<p><a href="http://github.com/gvSIGAssociation/gvnix">Repositorio</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ejemplos-y-demo-online-gvnix"><a class="anchor" href="#ejemplos-y-demo-online-gvnix"></a>1.1.2. Ejemplos y Demo Online gvNIX</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://github.com/DISID/gvnix-samples">Repositorio de ejemplos</a></p>
</li>
<li>
<p><a href="http://petclinic-gvnix.rhcloud.com">Demo Online</a></p>
</li>
<li>
<p><a href="http://geo-gvnix.rhcloud.com">Demo Online componentes GEO</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="proyectos-relacionados-con-gvnix"><a class="anchor" href="#proyectos-relacionados-con-gvnix"></a>1.1.3. Proyectos relacionados con gvNIX</h4>
<div class="paragraph">
<p>Proyectos relacionados con gvNIX y con la Conselleria de
Infraestructuras, Transporte y Medio Ambiente de la Generalitat
Valenciana.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.gvpontis.gva.es/">gvPONTIS</a></p>
</li>
<li>
<p><a href="http://www.gvsig.org/">gvSIG</a></p>
</li>
<li>
<p><a href="http://www.gvpontis.gva.es/proyectos-integra/proy-desarrollo/gvhidra-herramienta/">gvHIDRA</a></p>
</li>
<li>
<p><a href="http://www.moskitt.org/">Moskitt</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="recursos-de-spring-roo"><a class="anchor" href="#recursos-de-spring-roo"></a>1.1.4. Recursos de Spring Roo</h4>
<div class="paragraph">
<p>Esta es una lista de recursos relacionados con Spring Roo:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://static.springsource.org/spring-roo/reference/html-single/index.html">Documentación
de referencia Spring Roo (<em>on-line</em>)</a></p>
</li>
<li>
<p><a href="http://projects.spring.io/spring-roo/">Página del proyecto</a></p>
</li>
<li>
<p><a href="http://forum.spring.io/forum/spring-projects/roo">Foro de Spring Roo</a></p>
</li>
<li>
<p><a href="https://jira.springsource.org/browse/ROO">JIRA de Spring Roo</a></p>
</li>
<li>
<p><a href="http://spring.io/tools">Spring STS Spring Tools Suite</a></p>
</li>
<li>
<p><a href="http://forum.spring.io/forum/spring-projects/roo/64079-latest-project-links-and-version-details">Página
con recursos para Roo</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="recursos-de-librerías-relacionadas"><a class="anchor" href="#recursos-de-librerías-relacionadas"></a>1.1.5. Recursos de librerías relacionadas</h4>
<div class="paragraph">
<p>Enlaces a recursos de librerías relacionadas con los proyectos
generados.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://spring.io/">Spring</a></p>
</li>
<li>
<p><a href="http://docs.spring.io/spring/docs/3.2.3.RELEASE/spring-framework-reference/html/">Documentación
de Spring Framework</a></p>
</li>
<li>
<p><a href="http://docs.spring.io/spring/docs/3.2.3.RELEASE/spring-framework-reference/html/mvc.html">Documentación
de Spring MVC</a></p>
</li>
<li>
<p><a href="http://docs.spring.io/spring-security/site/docs/3.1.4.RELEASE/reference/springsecurity.html/">Spring
Security</a></p>
</li>
<li>
<p><a href="http://www.eclipse.org/aspectj/">AspectJ (Aspectos Java)</a></p>
</li>
<li>
<p><a href="http://www.eclipse.org/ajdt/">AJDT</a></p>
</li>
<li>
<p><a href="http://jquery.com/">jQuery</a></p>
</li>
<li>
<p><a href="http://jqueryui.com/">jQueryUI</a></p>
</li>
<li>
<p><a href="http://datatables.net/">DatatTables</a></p>
</li>
<li>
<p><a href="http://dandelion.github.io/datatables/">Dandelion-DatatTables</a></p>
</li>
<li>
<p><a href="http://jqueryvalidation.org/">jQuery Validation Plugin</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-06-30 13:01:54 CEST
</div>
</div>
</body>
</html>