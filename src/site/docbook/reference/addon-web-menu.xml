<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xml:id="addon-web-menu" xml:lang="es"
         xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:ns5="http://www.w3.org/1998/Math/MathML"
         xmlns:ns4="http://www.w3.org/2000/svg"
         xmlns:ns3="http://www.w3.org/1999/xhtml"
         xmlns:ns="http://docbook.org/ns/docbook">
  <title>Add-on Web Menu</title>

  <para>Sistema de menú Web de gvNIX</para>

  <section xml:id="addon-web-menu_descripcion">
    <title>Descripción</title>

    <para xml:lang="es">Este Add-on instala un nuevo sistema de gestión del menú web
    de la aplicación sobre la que se está trabajando para facilitar la organización de
    su estructura de páginas.</para>

    <para xml:lang="es">Las principales características de este sistema
    son:</para>

    <variablelist>
      <varlistentry>
        <term xml:lang="es">Modelo de menú separado de su formato de visualización.</term>

        <listitem>
          <para xml:lang="es">El modelo de menú no está ubicado en la misma
          página que lo visualiza como ocurre por defecto en Spring Roo.
          Actualmente se define en un archivo XML y en un futuro podrá
          estar almacenada en base de datos.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term xml:lang="es">Múltiples niveles de menú</term>

        <listitem>
          <para xml:lang="es">Soporte para crear elementos jerarquizados con
          múltiples niveles. Permite añadir, mover y anidar en varios niveles
          los elementos del menú.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term xml:lang="es">Gestión de elementos desde consola</term>

        <listitem>
          <para xml:lang="es">Permite añadir, quitar, mover, actualizar,
          definir permisos, ocultar, crear enlaces externos, etc. para 
          cada uno de los elementos del menú desde la consola del framework.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term xml:lang="es">Integración con Spring Security</term>

        <listitem>
          <para xml:lang="es">Si está instalado el sistema de seguridad,
          se puede definir que ciertos elementos de menú no sean visibles si el
          usuario no no está entre los roles permitidos para ello.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term xml:lang="es">Gestiona las peticiones de Roo</term>

        <listitem>
          <para xml:lang="es">Aunque el sistema de menú de gvNIX es distintos al de Roo,
          este nuevo sistema también gestiona las peticiones de generación de elementos
          del menú realizadas por los comandos de Spring Roo.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>

  <section>
    <title xml:lang="es">Definiciones</title>

    <para xml:lang="es">Antes de continuar explicando las funcionalidades de
    la herramienta vamos a dar una lista de definiciones:</para>

    <variablelist>
      <varlistentry>
        <term xml:lang="es">Página</term>

        <listitem>
          <para xml:lang="es">Representación de una URL. El destino puede ser
          interno (dentro de la propia aplicación) o externo. <emphasis
          role="bold">Los destinos internos deben de ser únicos</emphasis>: no
          pueden existir dos páginas con exáctamente el mismo destino.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term xml:lang="es">Grupo</term>

        <listitem>
          <para xml:lang="es">Contenedor de páginas. El contenido de un grupo puede ser
          también otros grupos. También puede tener asociado una URL pero con
          las misma restricciones que la Página.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term xml:lang="es">Menú</term>

        <listitem>
          <para xml:lang="es">Estructura de árbol de páginas y grupos.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term xml:lang="es">Ítem de menú</term>

        <listitem>
          <para xml:lang="es">Un elemento del menú que puede ser una Página o
          un Grupo.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>

  <section>
    <title xml:lang="es">Instalación de la gestión de menús</title>

    <para xml:lang="es">El uso de el sistema de menús aportado por esta
    herramienta es opcional. Por ello, para ponerlo en marcha es necesario utilizar
    el comando <command><link
    linkend="apendice-comandos_addon-web-menu_page-menu-setup">menu
    setup</link></command>. Este comando añadirá lo siguiente:</para>

    <orderedlist>
      <listitem>
        <para xml:lang="es">Clases para el modelo de datos del menú. Cada una
        de estas clases están anotadas con una anotación
        <classname>@GvNIXMenu*</classname> para poder ser
        identificadas.</para>
      </listitem>

      <listitem>
        <para xml:lang="es">Una Clase para la carga del menú y hacerlo
        disponible para su pintado en la vista.</para>
      </listitem>

      <listitem>
        <para xml:lang="es">Archivo XML para almacenar el modelo de datos del
        menú, rellenado previamente con la información del menú de Roo que existiese
        en ese momento.</para>
      </listitem>

      <listitem>
        <para xml:lang="es"><emphasis>Tagx</emphasis> necesarios para el
        pintado del menú.</para>
      </listitem>

      <listitem xml:lang="es">
        <para>Una nueva página de menú en la que utiliza los
        <emphasis>tagx</emphasis> de pintado del menú.</para>
      </listitem>

      <listitem>
        <para xml:lang="es">Clases para el uso de los menús
        contextuales.</para>
      </listitem>
    </orderedlist>

    <para xml:lang="es">Para más información sobre el comando ver
    <command><link
    linkend="apendice-comandos_addon-web-menu_page-menu-setup">menu
    setup</link></command> en el <link
    linkend="apendice-comandos_addon-web-menu">apéndice de comandos de este
    add-on</link>.</para>

    <para xml:lang="es">El nombre del fichero XML que contiene el modelo es
    tomado de la constante <constant>MENU_CONFIG_FILE</constant> de la clase
    anotada como <classname>@GvNIXMenuLoader</classname>.</para>
  </section>

  <section>
    <title xml:lang="es">Modificación del menú.</title>

    <para xml:lang="es">Para hacer cambios en el menú se deben utilizar los comando
    disponibles en la consola, que serán accesibles después de haber
    instalado la nueva gestión de menú.</para>

    <para xml:lang="es">Para mas información sobre los comandos ver el <link
    linkend="apendice-comandos_addon-web-menu">apéndice de comandos de este
    add-on</link>.</para>
  </section>
</chapter>
